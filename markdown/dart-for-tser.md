---
title: "å†™ç»™Typescripterçš„Dartæ•™ç¨‹"
date: 2019/7/15
categories: å‰ç«¯
---

ä¸åŒè¯­è¨€çš„å®šä½

Dart is a client-optimized language
hot-reload
å¼ºç±»å‹
ç•Œé¢
è·¨å¹³å°ï¼Œæ”¯æŒç¼–è¯‘ä¸ºJavascript, æ”¯æŒæœåŠ¡ç«¯ã€ç§»åŠ¨ç«¯

hello world

```dart
/**
 * hello.dart
 */
void main(List<String> args) {
  print("hello world"); // ä¸èƒ½çœç•¥åˆ†å·
}
```

æ‰§è¡Œ:

```shell
dart hello.dart # hello world
```

é€šè¿‡hello worldç¨‹åºå¯ä»¥é€éœ²ä¸€ä¸‹ä¿¡æ¯:

- main: ç¨‹åºéœ€è¦ä¸€ä¸ªmainä½œä¸ºç¨‹åºå…¥å£
- ç±»å‹æ³¨è§£é£æ ¼å’ŒJavaç±»ä¼¼. ä¸è¿‡ç±»å‹æ³¨è§£ä¹Ÿæ˜¯å¯é€‰çš„ï¼Œæ”¯æŒç±»å‹æ¨å¯¼
- ä¸èƒ½çœç•¥åˆ†å·ã€‚åœ¨Javascriptä¸­æ—©å·²ä¹ æƒ¯äº†ä¸ä½¿ç”¨åˆ†å·
- æ”¯æŒæ³›å‹
- printï¼šdartæœ‰æ ‡å‡†åº“
- æ”¯æŒé¡¶å±‚å‡½æ•°ã€é¡¶å±‚å˜é‡ã€‚ä¸åƒJavaæ‰€æœ‰éƒ½æ˜¯ç±»ï¼Œmainå‡½æ•°ä¹Ÿæ˜¯éœ€è¦å°è£…åœ¨ç±»ä¸­

å¤§éƒ¨åˆ†è¯­æ³•ç‰¹æ€§å’ŒJavascriptéå¸¸ç›¸ä¼¼

AOTç¼–è¯‘

å˜é‡

```dart
var a = 1;       // let a = 1; â‘ 
var b = '2';     // let b = '2'; â‘¡
String c = '12'; // let c: string = '12' â‘¢
var d;           // let d; æˆ– let d: any; â‘£
int e;           // let e: number | null = null; â‘¤
```

- â‘  å˜é‡å‘½åä½¿ç”¨`var`
- â‘¡ å’Œtsä¸€æ ·ï¼Œdartæ”¯æŒç±»å‹æ¨å¯¼ï¼Œæ‰€ä»¥åœ¨å˜é‡å€¼æœ‰åˆå§‹å€¼æ—¶ä¸éœ€è¦æ˜¾å¼å£°æ˜æ•°æ®ç±»å‹. æ‰€ä»¥`var a = 1`ç­‰ä»·äº`int a = 1`
- â‘¢ Dartç±»å‹æ³¨è§£è¯­æ³•æ›´åƒJavaï¼Œè€ŒTypescriptä½¿ç”¨å†’å·æ³¨è§£æ³•ï¼Œè¿™æ ·è·Ÿæ¥è¿‘JavaScriptçš„è¯­æ³•. å£°æ˜ç±»å‹åå¯ä»¥å¿½ç•¥varå…³é”®å­—
- â‘£ å¦‚æœdartæ— æ³•æ¨å¯¼å‡ºå˜é‡çš„ç±»å‹ï¼Œåˆ™é»˜è®¤ä¸º**dynamicç±»å‹**, dynamic ç›¸å½“äºTypescriptçš„**any**
- â‘¤ å¯¹äºæ²¡æœ‰åˆå§‹å€¼çš„å˜é‡ï¼Œé»˜è®¤å€¼ä¸ºnullã€‚è€ŒTypescriptæ˜¯**ä¸¥æ ¼Nullç±»å‹**(å¯é…ç½®), ä¹Ÿå°±æ˜¯è¯´nullæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç±»å‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç®€å•çš„å€¼, è¿™æ ·å¯ä»¥æ›´åŠ å®‰å…¨. æ¢å¥è¯è¯´åœ¨ä¸¥æ ¼Nullæ¨¡å¼ä¸‹, å¦‚æœä¸€ä¸ªå˜é‡æ˜¯numberç±»å‹ï¼Œé‚£ä¹ˆå®ƒå°±ä¸€å®šæ˜¯æ•°å­—ï¼Œä¸èƒ½å°†nullèµ‹ç»™å®ƒï¼Œå˜é‡ä¹Ÿä¸éœ€è¦åˆ¤æ–­æ˜¯å¦ä¸ºnull.

  å¦å¤–Typescriptæœªåˆå§‹åŒ–å˜é‡é»˜è®¤å€¼ä¸ºundefined, è€ŒDartæ²¡æœ‰undefined. JavaScriptåŒºåˆ†nullå’Œundefinedæœ¬æ¥å°±æ˜¯ä¸€ä¸ªæ‹™åŠ£çš„è®¾è®¡ï¼Œå¤§éƒ¨åˆ†æƒ…å†µæˆ‘ä»¬éƒ½ä¼šå°†nullç­‰ä»·ä¸ºundefined, å¾ˆå¤šlintå·¥å…·ä¹Ÿæœ‰è§„åˆ™æ¥é™å®šåªç”¨nullæˆ–åªç”¨undefined

<br>

å¸¸é‡

```dart
final name = 'Blob';             // const name = 'Blob';
final String nickname = 'bobi';  // const nickname: string = 'bobi';
final pets = [];                 // const pets: any[] = []

name = 'newName';                // âŒ åªèƒ½è®¾ç½®ä¸€æ¬¡
pets.add('cat');                 // ğŸ‘Œ æ²¡é—®é¢˜
```

å°†finalå–ä»£varæ¥å£°æ˜ä¸€ä¸ªâ€™å¸¸é‡', finalç­‰ä»·äºJavaScriptä¸­çš„constå…³é”®å­—, è¿™äº›å¸¸é‡ä¸å¯ä»¥è¢«äºŒæ¬¡èµ‹å€¼.

<br>

ğŸ†•ç¼–è¯‘æ—¶å¸¸é‡

dartè¿˜æœ‰å¦å¤–ä¸€ç§å¸¸é‡ç±»å‹: **ç¼–è¯‘æ—¶å¸¸é‡(compile-time constants)**, å®ƒæœ‰ä»¥ä¸‹ç‰¹ç‚¹:

- åˆå§‹åŒ–å€¼å¿…é¡»èƒ½åœ¨ç¼–è¯‘æ—¶ç¡®å®š, è€Œfinalçš„åˆå§‹å€¼æ˜¯ä»»æ„çš„ã€‚æ‰€ä»¥é€šå¸¸å®ƒçš„å€¼æ˜¯ä¸€äº›åŸºæœ¬ç±»å‹çš„å­—é¢é‡è¡¨è¾¾å¼ã€‚ä¾‹å¦‚`1`ã€`â€˜2â€™`ã€`['cat']`, `{}`. ä¸èƒ½æ˜¯ä¸€äº›åŠ¨æ€çš„è¡¨è¾¾å¼, å¦‚`const int n2 = func();`. è¿™ä¸ªè·ŸTypescriptçš„Enumæˆå‘˜å€¼æ˜¯ä¸€æ ·çš„
- å€¼æ˜¯ä¸å¯å˜çš„ã€‚å¯ä»¥ç”¨äºå®ç°ä¸å¯å˜æ•°æ®
- é™¤äº†å¯ä»¥ä¿®é¥°å¸¸é‡è¿˜å¯ä»¥ç”¨äºä¿®é¥°å€¼. è¿™å¯ä»¥è®©ä¸€ä¸ªå€¼ä¸å¯ä»¥å˜


```dart
const String nickname = 'bobi';
const pets =  [];

pets.add('cat');                 // âŒ å€¼ä¸èƒ½è¢«ä¿®æ”¹

const int n2 = func();           // âŒ å€¼å¿…é¡»åœ¨ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®š

// å¸¸é‡åˆå§‹åŒ–è¡¨è¾¾å¼å¯ä»¥å¼•ç”¨å…¶ä»–å¸¸é‡å€¼
const msPerSecond = 1000;
const secondsUntilRetry = 5;
const msUntilRetry = secondsUntilRetry * msPerSecond;
```

ä¿®é¥°å€¼:

```dart
List<String> pets = const [];

pets.add('cat');                // âŒ å½“å‰å€¼ä¸èƒ½è¢«ä¿®æ”¹

pets = [];                      // å˜é‡é‡æ–°èµ‹å€¼
pets.add('cat');                // ğŸ‘Œ OKï¼Œå½“å‰å€¼ä¸æ˜¯ä¸å¯å˜æ•°æ®
```

<br>

## åŸºæœ¬ç±»å‹

| dart ç±»å‹  | Typescriptç±»å‹ | æè¿°      | å­—é¢é‡å½¢å¼ | æ³¨æ„ |
|-----------|----------------|----------|-----------|-----|
| int       | number         | 64bitæ•´å‹ |  1ã€ 0xDEADBEEF ||
| double       | number         | 64bitæµ®ç‚¹å‹ï¼Œ IEEE 754æ ‡å‡† |  1.1ã€1.42e5 | |
| bool      | boolean | å¸ƒå°”å€¼ | trueã€false | æ¡ä»¶è¡¨è¾¾å¼åªèƒ½æ¥å—boolç±»å‹ï¼Œè€ŒJSå¾ˆå®½æ¾ |
| String(æ³¨æ„å¤§å°å†™) | string |  UTF-16ç¼–ç å­—ç¬¦ä¸² åºåˆ— |'å•å¼•å·'ã€"åŒå¼•å·"ã€ '${expr}å­—ç¬¦ä¸²å†…åµŒè¡¨è¾¾å¼'ã€ `'å­—ç¬¦ä¸²'+'è¿æ¥'`ã€ `â€œâ€â€œä¸‰å¼•å·è·¨è¶Šå¤šè¡Œâ€â€œâ€`| |
| List<T> | Array<T> æˆ–T[] | æ•°ç»„ç±»å‹ | `[1, 2]`ã€`[1, '2', true]` |
| Set<T> | Set<T> | é›†åˆç±»å‹ | `{1, 2, 3}` | JavaScriptæ²¡æœ‰Setå­—é¢é‡å½¢å¼ |
| Map<K, V> | {[key: K]: V} | æ˜ å°„ç±»å‹ï¼Œç›¸å½“äºJavascriptçš„å¯¹è±¡| `{a: 1, 'b': 2, 3: 3}` ç­‰ä»·äºJSçš„`{[a]: 1, b: 2, 3: 3}` | ä¸¥æ ¼æ¥è¯´æ›´åƒJSä¸­çš„Mapç±»ï¼Œå› ä¸ºJSå¯¹è±¡å±æ€§æœ¬è´¨æ˜¯å­—ç¬¦æˆ–Symbol |
æ•°ç»„

```dart
var list = [1, 2, 3];
assert(list.length == 3);
assert(list[1] == 2);
```

## æ§åˆ¶æµ

å‡½æ•°

- ç­¾å
- ç›‘å¬å‡½æ•°
- async/await
- å¼‚å¸¸æ•è·

ç±»

- ç±»
- æ¥å£
- mixin

æ¨¡å—

æ ‡å‡†åº“