<!DOCTYPE html>
<html lang=zh>
<head><meta name="generator" content="Hexo 3.8.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="Vue 3 å·²ç»å‘å¸ƒä¸‰å¹´ï¼Œæˆ‘ä»¬æœ‰è¾ƒå¤šé¡¹ç›®è¿˜åœç•™åœ¨ Vue 2ã€‚Vue 3 çš„å‡çº§æ˜¯æ¯”è¾ƒå‰²è£‚çš„ã€‚ æˆ‘ä»¬ä¸»è¦åšçš„æ˜¯ 2B ä¸šåŠ¡ï¼Œé¡¹ç›®ã€æ¨¡å—ã€åˆ†æ”¯éƒ½éå¸¸å¤šï¼Œå‡çº§çš„æˆæœ¬å’Œé£é™©éƒ½æ¯”è¾ƒé«˜ã€‚ æˆ‘ä»¬ç›®å‰çš„ç­–ç•¥æ˜¯ â€œæ–°æ—§å¹¶å­˜ï¼Œæ¸è¿›å¼å‡çº§â€ï¼Œ æ—§çš„é¡¹ç›®å°±å°½é‡ä¸å˜äº†ï¼Œæ–°çš„é¡¹ç›®å¼ºåˆ¶ä½¿ç”¨æ–°çš„æŠ€æœ¯æ ˆã€‚åˆ©ç”¨å¾®å‰ç«¯æ¶æ„ï¼Œæ–°æ—§åº”ç”¨å¯ä»¥çµæ´»åœ°ç»„åˆèµ·æ¥ã€‚ å› æ­¤æˆ‘ä»¬çš„ä¸šåŠ¡ç»„ä»¶åº“ã€å·¥å…·åº“ä¹‹ç±»éœ€è¦è€ƒè™‘å…¼å®¹æ—§çš„ Vue 2 é¡¹ç›®ã€‚è¿™ç¯‡æ–‡ç« ">
<meta name="keywords" content="Blog,FrontEnd,React,Javascript,Typescript">
<meta property="og:type" content="article">
<meta property="og:title" content="å¦‚ä½•å®ç°æ”¯æŒè·¨ Vue 2&#x2F;3 çš„ç»„ä»¶åº“">
<meta property="og:url" content="https://bobi.ink/2023/06/11/component-for-vue2-3/index.html">
<meta property="og:site_name" content="Bobi.ink">
<meta property="og:description" content="Vue 3 å·²ç»å‘å¸ƒä¸‰å¹´ï¼Œæˆ‘ä»¬æœ‰è¾ƒå¤šé¡¹ç›®è¿˜åœç•™åœ¨ Vue 2ã€‚Vue 3 çš„å‡çº§æ˜¯æ¯”è¾ƒå‰²è£‚çš„ã€‚ æˆ‘ä»¬ä¸»è¦åšçš„æ˜¯ 2B ä¸šåŠ¡ï¼Œé¡¹ç›®ã€æ¨¡å—ã€åˆ†æ”¯éƒ½éå¸¸å¤šï¼Œå‡çº§çš„æˆæœ¬å’Œé£é™©éƒ½æ¯”è¾ƒé«˜ã€‚ æˆ‘ä»¬ç›®å‰çš„ç­–ç•¥æ˜¯ â€œæ–°æ—§å¹¶å­˜ï¼Œæ¸è¿›å¼å‡çº§â€ï¼Œ æ—§çš„é¡¹ç›®å°±å°½é‡ä¸å˜äº†ï¼Œæ–°çš„é¡¹ç›®å¼ºåˆ¶ä½¿ç”¨æ–°çš„æŠ€æœ¯æ ˆã€‚åˆ©ç”¨å¾®å‰ç«¯æ¶æ„ï¼Œæ–°æ—§åº”ç”¨å¯ä»¥çµæ´»åœ°ç»„åˆèµ·æ¥ã€‚ å› æ­¤æˆ‘ä»¬çš„ä¸šåŠ¡ç»„ä»¶åº“ã€å·¥å…·åº“ä¹‹ç±»éœ€è¦è€ƒè™‘å…¼å®¹æ—§çš„ Vue 2 é¡¹ç›®ã€‚è¿™ç¯‡æ–‡ç« ">
<meta property="og:locale" content="zh">
<meta property="og:image" content="https://bobi.ink/images/component-for-vue2-3/Untitled.jpeg">
<meta property="og:image" content="https://bobi.ink/images/component-for-vue2-3/Untitled.png">
<meta property="og:image" content="https://bobi.ink/images/component-for-vue2-3/Untitled%201.png">
<meta property="og:image" content="https://bobi.ink/images/component-for-vue2-3/Untitled%202.png">
<meta property="og:image" content="https://bobi.ink/images/component-for-vue2-3/Untitled%203.png">
<meta property="og:updated_time" content="2023-06-11T14:21:51.353Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="å¦‚ä½•å®ç°æ”¯æŒè·¨ Vue 2&#x2F;3 çš„ç»„ä»¶åº“">
<meta name="twitter:description" content="Vue 3 å·²ç»å‘å¸ƒä¸‰å¹´ï¼Œæˆ‘ä»¬æœ‰è¾ƒå¤šé¡¹ç›®è¿˜åœç•™åœ¨ Vue 2ã€‚Vue 3 çš„å‡çº§æ˜¯æ¯”è¾ƒå‰²è£‚çš„ã€‚ æˆ‘ä»¬ä¸»è¦åšçš„æ˜¯ 2B ä¸šåŠ¡ï¼Œé¡¹ç›®ã€æ¨¡å—ã€åˆ†æ”¯éƒ½éå¸¸å¤šï¼Œå‡çº§çš„æˆæœ¬å’Œé£é™©éƒ½æ¯”è¾ƒé«˜ã€‚ æˆ‘ä»¬ç›®å‰çš„ç­–ç•¥æ˜¯ â€œæ–°æ—§å¹¶å­˜ï¼Œæ¸è¿›å¼å‡çº§â€ï¼Œ æ—§çš„é¡¹ç›®å°±å°½é‡ä¸å˜äº†ï¼Œæ–°çš„é¡¹ç›®å¼ºåˆ¶ä½¿ç”¨æ–°çš„æŠ€æœ¯æ ˆã€‚åˆ©ç”¨å¾®å‰ç«¯æ¶æ„ï¼Œæ–°æ—§åº”ç”¨å¯ä»¥çµæ´»åœ°ç»„åˆèµ·æ¥ã€‚ å› æ­¤æˆ‘ä»¬çš„ä¸šåŠ¡ç»„ä»¶åº“ã€å·¥å…·åº“ä¹‹ç±»éœ€è¦è€ƒè™‘å…¼å®¹æ—§çš„ Vue 2 é¡¹ç›®ã€‚è¿™ç¯‡æ–‡ç« ">
<meta name="twitter:image" content="https://bobi.ink/images/component-for-vue2-3/Untitled.jpeg">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>å¦‚ä½•å®ç°æ”¯æŒè·¨ Vue 2/3 çš„ç»„ä»¶åº“</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Blogs</a></li>
         
          <li><a href="http://github.com/ivan-94">Projects</a></li>
        
      </ul>
    </span>
    <br>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" href="/2023/06/05/render-patterns/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://bobi.ink/2023/06/11/component-for-vue2-3/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://bobi.ink/2023/06/11/component-for-vue2-3/&text=å¦‚ä½•å®ç°æ”¯æŒè·¨ Vue 2/3 çš„ç»„ä»¶åº“"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://bobi.ink/2023/06/11/component-for-vue2-3/&title=å¦‚ä½•å®ç°æ”¯æŒè·¨ Vue 2/3 çš„ç»„ä»¶åº“"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://bobi.ink/2023/06/11/component-for-vue2-3/&is_video=false&description=å¦‚ä½•å®ç°æ”¯æŒè·¨ Vue 2/3 çš„ç»„ä»¶åº“"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=å¦‚ä½•å®ç°æ”¯æŒè·¨ Vue 2/3 çš„ç»„ä»¶åº“&body=Check out this article: https://bobi.ink/2023/06/11/component-for-vue2-3/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://bobi.ink/2023/06/11/component-for-vue2-3/&title=å¦‚ä½•å®ç°æ”¯æŒè·¨ Vue 2/3 çš„ç»„ä»¶åº“"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://bobi.ink/2023/06/11/component-for-vue2-3/&title=å¦‚ä½•å®ç°æ”¯æŒè·¨ Vue 2/3 çš„ç»„ä»¶åº“"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://bobi.ink/2023/06/11/component-for-vue2-3/&title=å¦‚ä½•å®ç°æ”¯æŒè·¨ Vue 2/3 çš„ç»„ä»¶åº“"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://bobi.ink/2023/06/11/component-for-vue2-3/&title=å¦‚ä½•å®ç°æ”¯æŒè·¨ Vue 2/3 çš„ç»„ä»¶åº“"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://bobi.ink/2023/06/11/component-for-vue2-3/&name=å¦‚ä½•å®ç°æ”¯æŒè·¨ Vue 2/3 çš„ç»„ä»¶åº“&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#æ–¹æ¡ˆå†³ç­–"><span class="toc-number">1.</span> <span class="toc-text">æ–¹æ¡ˆå†³ç­–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç­–ç•¥"><span class="toc-number">2.</span> <span class="toc-text">ç­–ç•¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å®ç°"><span class="toc-number">3.</span> <span class="toc-text">å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#api-å…¼å®¹ï¼švue-demi"><span class="toc-number">3.1.</span> <span class="toc-text">API å…¼å®¹ï¼švue demi</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ¸²æŸ“è¯­æ³•ï¼šjsx-runtime-çš„å®ç°"><span class="toc-number">3.2.</span> <span class="toc-text">æ¸²æŸ“è¯­æ³•ï¼šJSX runtime çš„å®ç°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ç»„ä»¶å®šä¹‰ä¸-typescript-æ”¯æŒ"><span class="toc-number">3.3.</span> <span class="toc-text">ç»„ä»¶å®šä¹‰ä¸ Typescript æ”¯æŒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ³›å‹ç»„ä»¶"><span class="toc-number">3.4.</span> <span class="toc-text">æ³›å‹ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#element-adapter"><span class="toc-number">3.5.</span> <span class="toc-text">element-adapter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#router-adapter"><span class="toc-number">3.6.</span> <span class="toc-text">router-adapter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ğŸ‰-å¼€æº-ğŸ‰"><span class="toc-number">3.7.</span> <span class="toc-text">ğŸ‰ å¼€æº ğŸ‰</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ‰©å±•é˜…è¯»"><span class="toc-number">4.</span> <span class="toc-text">æ‰©å±•é˜…è¯»</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        å¦‚ä½•å®ç°æ”¯æŒè·¨ Vue 2/3 çš„ç»„ä»¶åº“
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Bobi.ink</span>
      </span>
      
    <div class="postdate">
        <time datetime="2023-06-10T16:00:00.000Z" itemprop="datePublished">2023-06-11</time>
    </div>


      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p><br></p>
<p><img src="/images/component-for-vue2-3/Untitled.jpeg" alt="Untitled"></p>
<p>Vue 3 å·²ç»<a href="https://vue-js.com/topic/5f65624c96b2cb0032c38550" target="_blank" rel="noopener">å‘å¸ƒ</a>ä¸‰å¹´ï¼Œæˆ‘ä»¬æœ‰è¾ƒå¤šé¡¹ç›®è¿˜åœç•™åœ¨ Vue 2ã€‚Vue 3 çš„å‡çº§æ˜¯æ¯”è¾ƒå‰²è£‚çš„ã€‚</p>
<p>æˆ‘ä»¬ä¸»è¦åšçš„æ˜¯ <code>2B</code> ä¸šåŠ¡ï¼Œé¡¹ç›®ã€æ¨¡å—ã€åˆ†æ”¯éƒ½éå¸¸å¤šï¼Œå‡çº§çš„æˆæœ¬å’Œé£é™©éƒ½æ¯”è¾ƒé«˜ã€‚</p>
<p>æˆ‘ä»¬ç›®å‰çš„ç­–ç•¥æ˜¯ â€œæ–°æ—§å¹¶å­˜ï¼Œæ¸è¿›å¼å‡çº§â€ï¼Œ æ—§çš„é¡¹ç›®å°±å°½é‡ä¸å˜äº†ï¼Œæ–°çš„é¡¹ç›®å¼ºåˆ¶ä½¿ç”¨æ–°çš„æŠ€æœ¯æ ˆã€‚åˆ©ç”¨<code>å¾®å‰ç«¯</code>æ¶æ„ï¼Œæ–°æ—§åº”ç”¨å¯ä»¥çµæ´»åœ°ç»„åˆèµ·æ¥ã€‚</p>
<p>å› æ­¤æˆ‘ä»¬çš„ä¸šåŠ¡ç»„ä»¶åº“ã€å·¥å…·åº“ä¹‹ç±»éœ€è¦è€ƒè™‘å…¼å®¹æ—§çš„ Vue 2 é¡¹ç›®ã€‚è¿™ç¯‡æ–‡ç« ï¼Œå°±å‘å¤§å®¶å±•ç¤ºæˆ‘ä»¬å¼€å‘è·¨ç‰ˆæœ¬ç»„ä»¶åº“ï¼Œå…¶ä¸­çš„å†³ç­–å’Œå®ç°è¿‡ç¨‹ã€‚</p>
<p><br><br><br></p>
<h2 id="æ–¹æ¡ˆå†³ç­–"><a href="#æ–¹æ¡ˆå†³ç­–" class="headerlink" title="æ–¹æ¡ˆå†³ç­–"></a>æ–¹æ¡ˆå†³ç­–</h2><p>å®ç°è·¨ç‰ˆæœ¬çš„ç»„ä»¶éƒ½å¤šç§æ–¹æ¡ˆï¼Œä¸‹é¢åˆ—ä¸¾åˆ†æå‡ ç§ä¸»è¦æ–¹æ¡ˆï¼š</p>
<p><br></p>
<p><strong>æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ Vue SFC / æ¨¡æ¿</strong></p>
<p>å•çº¯ä»å¤–è§‚ä¸Šçœ‹ Vue 2 / 3 åœ¨æ¨¡æ¿çš„è¯­æ³•ä¸Š<a href="https://v3-migration.vuejs.org/zh/breaking-changes/v-model.html" target="_blank" rel="noopener">å·®åˆ«å¹¶ä¸å¤§</a>ã€‚åœ¨ <a href="https://blog.vuejs.org/posts/vue-2-7-naruto" target="_blank" rel="noopener">Vue 2.7</a> å¼€å§‹å†…ç½®äº†å¯¹ <code>script setup</code> ä¹Ÿæœ‰äº†è¾ƒå¥½çš„æ”¯æŒã€‚</p>
<p>ç†è®ºä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä»½ä»£ç ï¼Œç„¶ååˆ†åˆ«é’ˆå¯¹ 2 / 3 ç¼–è¯‘ä¸¤ä»½è¾“å‡ºã€‚</p>
<p><img src="/images/component-for-vue2-3/Untitled.png" alt="æ€»ä½“æµç¨‹å¦‚ä¸Š"></p>
<p>æ€»ä½“æµç¨‹å¦‚ä¸Š</p>
<p><strong>ç¬”è€…æä¾›äº†ä¸€ä¸ªç®€å•çš„ DEMO æ¥éªŒè¯äº†è¿™ä¸ªæ–¹æ¡ˆçš„å¯è¡Œæ€§ï¼Œè¯¦è§<a href="https://github.com/wakeadmin/cvv-sfc-demo" target="_blank" rel="noopener">è¿™é‡Œ</a>ã€‚</strong></p>
<ul>
<li>ä¼˜ç‚¹<ul>
<li>æ¨¡æ¿æ˜¯ Vue çš„ç¬¬ä¸€å…¬æ°‘ï¼Œä¸éœ€è¦ä¸ºäº†å…¼å®¹ä¸åŒç‰ˆæœ¬æ”¹å˜åŸæœ‰çš„å¼€å‘ä¹ æƒ¯ã€‚å­¦ä¹ æˆæœ¬æ¯”è¾ƒä½</li>
<li>æ”¯æŒé™æ€ç¼–è¯‘ï¼Œæ¯”å¦‚å¯ä»¥é’ˆå¯¹ä¸åŒçš„ç‰ˆæœ¬è¿›è¡Œæ¡ä»¶ç¼–è¯‘ï¼Œ<strong>ä¼˜åŒ–åŒ…ä½“ç§¯</strong>ã€‚å¦å¤–å¯ä»¥<strong>ä¿ç•™<a href="https://cn.vuejs.org/guide/extras/rendering-mechanism.html#compiler-informed-virtual-dom" target="_blank" rel="noopener">Vue æ¨¡æ¿ç¼–è¯‘ä¼˜åŒ–</a>æœºåˆ¶</strong>ã€‚</li>
<li>ä½¿ç”¨å…¬å¼€æ ‡å‡†è¯­æ³•ï¼Œä¸éœ€è¦ hack æˆ–è€…å…³å¿ƒå¤ªå¤šæ¡†æ¶åº•å±‚çš„å·®å¼‚ã€‚</li>
</ul>
</li>
<li>ç¼ºç‚¹<ul>
<li>æ„å»ºç›¸å¯¹å¤æ‚ï¼Œéœ€è¦ä¸¤ä»½ä»£ç è¾“å‡ºã€‚</li>
<li>çµæ´»æ€§è¾ƒå·®ã€‚æ¨¡æ¿è¯­æ³•å·®å¼‚å¾ˆå°ï¼Œä½†ä¸ä»¥ä¸ºç€æ²¡æœ‰å·®å¼‚ï¼Œå½“éœ€è¦å¤„ç†æŸäº›è·¨ç‰ˆæœ¬å·®å¼‚æ—¶å¯èƒ½ä¼šæ¯”è¾ƒæ£˜æ‰‹ã€‚æ¯”å¦‚<a href="https://v3-migration.vuejs.org/zh/breaking-changes/render-function-api.html" target="_blank" rel="noopener">å‘ä¸‹é€ä¼ äº‹ä»¶ã€props æˆ–è€… slots</a> , <a href="https://v3-migration.vuejs.org/zh/breaking-changes/v-bind.html" target="_blank" rel="noopener">v-bind.sync åºŸå¼ƒäº†</a> ã€<a href="https://v3-migration.vuejs.org/zh/breaking-changes/key-attribute.html" target="_blank" rel="noopener">template v-for key</a> <strong>ã€</strong>v-model åè®®å˜åŒ–ã€‚</li>
<li>âš ï¸ è¯­æ³•å›ºåŒ–ï¼Œä¸ºäº†å…¼å®¹ Vue 2ï¼Œtemplate è¯­æ³•éœ€è¦åœç•™åœ¨ Vue 3.0ï¼Œè¿™æ„å‘³ç€åç»­å‘å¸ƒçš„æ–°ç‰¹æ€§å¯èƒ½æ— æ³•ä½¿ç”¨ï¼Œæ¯”å¦‚ <code>defineModel</code>ï¼Œ<code>defineOptions</code>ã€‚</li>
</ul>
</li>
</ul>
<p><br><br><br><br><br></p>
<p><strong>æ–¹æ¡ˆ 2ï¼š æ¸²æŸ“å‡½æ•°</strong></p>
<p>Vue 2 å’Œ Vue 3 éƒ½æ”¯æŒæ¸²æŸ“å‡½æ•°ï¼Œä½†æ˜¯ä¸¤è€…ä¹‹é—´æœ‰éå¸¸å¤§çš„å·®å¼‚ã€‚<strong>è¯¦ç»†çš„å·®å¼‚å¯¹æ¯”å¯ä»¥çœ‹ç¬”è€…æ•´ç†çš„è¿™ç¯‡æ–‡æ¡£ï¼š <a href="https://www.notion.so/Vue-2-3-302cbe0e37794345bbfbd89e32d617db?pvs=21" target="_blank" rel="noopener">Vue 2/3 æ¸²æŸ“å‡½æ•°å·®å¼‚ä»¥åŠå…¼å®¹æ–¹æ¡ˆ</a></strong></p>
<p><br></p>
<p><strong>é‚£ Vue å®˜æ–¹çš„ JSX æ’ä»¶å‘¢ï¼Ÿ</strong></p>
<p>Vue 2/3 JSX Babel (<strong><a href="https://github.com/vuejs/jsx-vue2" target="_blank" rel="noopener">jsx-vue2</a>ã€<a href="https://github.com/vuejs/babel-plugin-jsx" target="_blank" rel="noopener">babel-plugin-jsx</a></strong>)æ’ä»¶åŠ äº†ä¸€äº›è¯­æ³•ç³–ï¼Œæ¥ç®€åŒ–æ¸²æŸ“å‡½æ•°çš„ç¼–å†™ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªæ’ä»¶çš„è¯­æ³•å®Œå…¨æ˜¯ä¸¤ä¸ªä¸œè¥¿ã€‚</p>
<p>å› æ­¤è¿™ä¸ªæ–¹æ¡ˆä¸åœ¨æˆ‘ä»¬çš„è€ƒè™‘ä¹‹åˆ—ã€‚</p>
<p><br><br><br><br><br></p>
<p><strong>æ–¹æ¡ˆ 3ï¼šæ ‡å‡†çš„ JSX</strong></p>
<p>é‚£ä¸ºä»€ä¹ˆä¸ç”¨æ ‡å‡†çš„ <code>JSX</code> å‘¢ï¼Ÿä½¿ç”¨ç»Ÿä¸€çš„ JSX è¯­æ³•ï¼Œè½¬æ¢ä¸ºä¸åŒç‰ˆæœ¬çš„æ¸²æŸ“å‡½æ•°ã€‚</p>
<p><img src="/images/component-for-vue2-3/Untitled%201.png" alt="Untitled"></p>
<p>ä½¿ç”¨æ ‡å‡†çš„ JSX è¯­æ³•ï¼Œæ„å‘³ç€ï¼š</p>
<ul>
<li><p>ä¸éœ€è¦ä»»ä½• <code>Babel</code> æ’ä»¶ï¼Œèƒ½å¤Ÿè¢«å¸‚é¢ä¸Šä¸»æµçš„ç¼–è¯‘å™¨(å¦‚ tscï¼Œ swcï¼Œesbuild)ç›´æ¥å¤„ç†ã€‚<br>ä¾‹å¦‚ Typescript</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">/** tsconfig.json */</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"compilerOptions"</span>: &#123;</span><br><span class="line">    <span class="attr">"jsx"</span>: <span class="string">"react-jsx"</span>,</span><br><span class="line">    <span class="attr">"jsxImportSource"</span>: <span class="string">"JSX è¿è¡Œæ—¶åç§°"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨<strong>è¿è¡Œæ—¶</strong>è½¬æ¢åˆ°å¯¹åº”ç‰ˆæœ¬çš„æ¸²æŸ“å‡½æ•°ã€‚</p>
</li>
<li>Typescript friendlyã€‚çº¯ TSXï¼Œä¸éœ€è¦é¢å¤–æ’ä»¶(æ¯”å¦‚ <code>Volar</code>)è¾…åŠ©ã€‚</li>
<li><p>ä½¿ç”¨ä¹ æƒ¯ä¸Šæ¥è¿‘ <code>React</code>ã€‚</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">/** ğŸ”´ 1. äº‹ä»¶è®¢é˜…  **/</span><br><span class="line">// ğŸ¤®</span><br><span class="line"><span class="deletion">- &lt;input vOn:click=&#123;this.newTodoText&#125; /&gt;</span></span><br><span class="line"><span class="deletion">- &lt;input vOn:click_stop_prevent=&#123;this.newTodoText&#125; /&gt;</span></span><br><span class="line">// ğŸ‘ ä½¿ç”¨ on* æ³¨å†Œæ—¶é—´</span><br><span class="line"><span class="addition">+ &lt;input onClick=&#123;this.newTodoText&#125; /&gt;</span></span><br><span class="line"></span><br><span class="line">/** ğŸ”´ 2. æ²¡æœ‰æŒ‡ä»¤  **/</span><br><span class="line">// ğŸ¤®</span><br><span class="line"><span class="deletion">- &lt;input v-show=&#123;this.visible&#125; /&gt;</span></span><br><span class="line"><span class="deletion">- &lt;input vModel=&#123;this.newTodoText&#125; /&gt;</span></span><br><span class="line"><span class="deletion">- &lt;input vModel_trim=&#123;this.newTodoText&#125; /&gt;</span></span><br><span class="line"><span class="deletion">- &lt;A v-model=&#123;[val, "argument", ["modifier"]]&#125; /&gt;</span></span><br><span class="line"><span class="deletion">- &lt;a v-loading=&#123;val&#125; /&gt;;</span></span><br><span class="line"></span><br><span class="line">// ğŸ‘ æ²¡æœ‰è¯­æ³•ç³–</span><br><span class="line"><span class="addition">+ &lt;input modelValue=&#123;val&#125; onUpdate:modelValue=&#123;handleValChange&#125; /&gt;</span></span><br><span class="line"><span class="addition">+ &lt;input style=&#123;&#123;display: this.visible ? 'block' : 'none' &#125;&#125; /&gt;</span></span><br><span class="line"><span class="addition">+ &lt;a &#123;...withDirectives([[vLoading, val]])&#125;&gt;</span></span><br><span class="line"></span><br><span class="line">/** ğŸ”´ 3. slots  **/</span><br><span class="line">// ğŸ¤®</span><br><span class="line"><span class="deletion">- &lt;MyComponent&gt;</span></span><br><span class="line"><span class="deletion">-   &lt;header slot="header"&gt;header&lt;/header&gt;</span></span><br><span class="line"><span class="deletion">-   &lt;footer slot="footer"&gt;footer&lt;/footer&gt;</span></span><br><span class="line"><span class="deletion">- &lt;/MyComponent&gt;</span></span><br><span class="line"><span class="deletion">-</span></span><br><span class="line"><span class="deletion">- const scopedSlots = &#123;</span></span><br><span class="line"><span class="deletion">-   header: () =&gt; &lt;header&gt;header&lt;/header&gt;,</span></span><br><span class="line"><span class="deletion">-   footer: () =&gt; &lt;footer&gt;footer&lt;/footer&gt;</span></span><br><span class="line"><span class="deletion">- &#125;</span></span><br><span class="line"><span class="deletion">-</span></span><br><span class="line"><span class="deletion">- &lt;MyComponent scopedSlots=&#123;scopedSlots&#125; /&gt;</span></span><br><span class="line"></span><br><span class="line">// ğŸ‘ å¯¹é½ vue 3</span><br><span class="line"><span class="addition">+ const App = &#123;</span></span><br><span class="line"><span class="addition">+   setup() &#123;</span></span><br><span class="line"><span class="addition">+     const slots = &#123;</span></span><br><span class="line"><span class="addition">+       bar: () =&gt; &lt;span&gt;B&lt;/span&gt;,</span></span><br><span class="line"><span class="addition">+     &#125;;</span></span><br><span class="line"><span class="addition">+     return () =&gt; (</span></span><br><span class="line"><span class="addition">+       &lt;A v-slots=&#123;slots&#125;&gt;</span></span><br><span class="line"><span class="addition">+         &lt;div&gt;A&lt;/div&gt;</span></span><br><span class="line"><span class="addition">+       &lt;/A&gt;</span></span><br><span class="line"><span class="addition">+     );</span></span><br><span class="line"><span class="addition">+   &#125;,</span></span><br><span class="line"><span class="addition">+ &#125;;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><br><br><br></p>
<ul>
<li><p>ä¼˜ç‚¹</p>
<ul>
<li>æ„å»ºå¾ˆç®€å•ï¼Œä½¿ç”¨æ ‡å‡†çš„ JSX åªéœ€æ„å»ºä¸€æ¬¡ã€‚ä¸éœ€è¦å¼•å…¥ç‰¹å®šçš„ç¼–è¯‘å™¨ï¼Œä½¿ç”¨ <code>Typescript CLI</code>ï¼Œ<code>esbuild</code> å°±å¯ä»¥ç›´æ¥ç¼–è¯‘ã€‚</li>
<li>Typescript Friendly, å¦å¤–ç›¸æ¯” <code>vue-tsc</code> ç¼–è¯‘ç»“æœä¼šå¥½ä¸€ç‚¹ã€‚</li>
<li>çµæ´»æ€§ã€‚æ¯‹åº¸ç½®ç–‘ï¼Œ<code>JSX</code> çš„çµæ´»æ€§ï¼Œå¯æ“è¡Œæ€§å¤ªå¼ºäº†ã€‚</li>
<li>ç›¸å¯¹æ¨¡æ¿ç¼–è¯‘æ¥è¯´ï¼Œå¯æ§ä¸€ç‚¹(Hackable)ã€‚</li>
<li>å¯ä»¥æ›¿æ¢å®˜æ–¹çš„ JSX åº“ï¼Œé™¤äº†æœ¬æ–‡ä»‹ç»çš„<code>è·¨ç‰ˆæœ¬ç»„ä»¶åº“</code>åœºæ™¯ï¼Œåœ¨æ—¥å¸¸ Vue 2/3 åº”ç”¨å¼€å‘ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨å•Šã€‚</li>
</ul>
</li>
<li><p>ç¼ºç‚¹</p>
<ul>
<li>ä½¿ç”¨ <code>JSX</code> åˆ™æ„å‘³ç€æ”¾å¼ƒ<a href="https://cn.vuejs.org/guide/extras/rendering-mechanism.html#compiler-informed-virtual-dom" target="_blank" rel="noopener">æ¨¡æ¿ç¼–è¯‘ä¼˜åŒ–</a>çš„æœºä¼šï¼Œæ¯”å¦‚åŠ¨æ€èŠ‚ç‚¹æ ‡æ³¨ï¼Œé¢„å­—ç¬¦ä¸²åŒ–ï¼Œç¼“å­˜ï¼Œé™æ€æå‡ç­‰ç­‰ã€‚</li>
<li>ä¸ºäº†æŠ¹å¹³ç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚ï¼Œå¤šäº†ä¸€å±‚æŠ½è±¡è½¬æ¢(ä¸»è¦æ˜¯ Vue 2 ä¸Š)ï¼Œä¼šæœ‰ä¸€äº›æ€§èƒ½æŸè€—ã€‚</li>
<li>å®ç°ä¸Šéœ€è¦ç†ŸçŸ¥ä¸¤ä¸ªç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚æ€§ã€‚æ¯”è¾ƒ hack</li>
<li>å¯è¯»æ€§è¾ƒå·®ï¼Œç›¸æ¯” <code>React</code> ç®€æ´çš„ Apiï¼ŒVue ä¸Šçš„ä¸€äº›ç‰¹æ®Šçš„æ¡†æ¶ç‰¹æ€§ï¼Œè¿˜æ˜¯ä¼šè®©ä»£ç æœ‰äº›ä¸å¤ªä¼˜é›…ï¼Œæ¯”å¦‚æŒ‡ä»¤ã€Slot</li>
</ul>
</li>
</ul>
<p>åé¢æˆ‘ä»¬é€‰æ‹©äº† <code>JSX</code> æ–¹æ¡ˆï¼Œå› ä¸ºå®ç°èµ·æ¥æ›´ç®€å•ï¼Œæ–¹æ¡ˆæ›´åŠ å¯æ§ï¼Œå°¤å…¶æ˜¯åº”å¯¹åç»­çš„ç‰ˆæœ¬æ›´æ–°ã€‚</p>
<p><br><br><br><br><br></p>
<h2 id="ç­–ç•¥"><a href="#ç­–ç•¥" class="headerlink" title="ç­–ç•¥"></a>ç­–ç•¥</h2><p>æ„å»ºè·¨ç‰ˆæœ¬çš„ç»„ä»¶åº“ï¼Œéœ€è¦è€ƒè™‘çš„ä¸ä»…ä»…æ˜¯ç»„ä»¶è¯­æ³•é—®é¢˜ã€‚Vue 2/3 ä»åº•å±‚çš„ API åˆ°æ¸²æŸ“å‡½æ•°ã€å†åˆ°åº”ç”¨å±‚çš„ç»„ä»¶åº“ã€è·¯ç”±ã€å¤šè¯­è¨€ç­‰ç­‰ï¼Œéƒ½å‡ºç°äº†å‰²è£‚ã€‚æˆ‘ä»¬å¾—å…¼é¡¾è¿™äº›å˜åŒ–ã€‚</p>
<p><br></p>
<ol>
<li><strong>åˆ†å±‚ç­–ç•¥</strong></li>
</ol>
<p><img src="/images/component-for-vue2-3/Untitled%202.png" alt="Untitled"></p>
<p>æˆ‘ä»¬æŒ‰ç…§å¼•ç”¨å…³ç³»è¿›è¡Œåˆ†å±‚ï¼š</p>
<ul>
<li><strong><code>API å±‚</code></strong>ã€‚å¥½åœ¨ Vue 3 å¤§éƒ¨åˆ†ç‰¹æ€§(ä¸»è¦æ˜¯ <code>Composition API</code> å’Œ <code>defineComponent</code>) å·²ç»ä¸‹æ”¾åˆ°äº† Vue 2ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨ <a href="https://github.com/vueuse/vue-demi" target="_blank" rel="noopener">vue-demi</a> å°±å¯ä»¥æ— ç¼ä½¿ç”¨è¿™äº›æ ¸å¿ƒçš„ APIã€‚<br>ç›¸å¯¹åº”çš„ï¼Œä¸Šå±‚çš„ç»„ä»¶åº“ã€é€‚é…å™¨ä»£ç ç¦æ­¢ç›´æ¥å¯¼å…¥ â€˜vueâ€™</li>
<li><strong><code>è§†å›¾è¯­æ³•å±‚</code></strong>ã€‚å°±å¦‚ä¸Šæ–‡è¯´çš„ï¼Œæˆ‘ä»¬ä¼šå°è£…ä¸€ä¸ª jsx-runtime, æŠ¹å¹³ Vue 2/3 åœ¨æ¸²æŸ“å‡½æ•°ä¸Šçš„å·®å¼‚ã€‚</li>
<li><strong><code>é€‚é…å™¨å±‚</code></strong>ã€‚åº”ç”¨å±‚çš„å„ç§ç±»åº“çš„é€‚é…ã€‚æ¯”å¦‚æˆ‘ä»¬å…¬å¸ä¸»è¦ä½¿ç”¨ element-ui, æ–°æ—§ç‰ˆæœ¬çš„å·®å¼‚ä¼šåœ¨ element-adapter ä¸­å¤„ç†ï¼Œå¹¶æš´éœ²ç»Ÿä¸€æ¥å£ã€‚</li>
<li><strong><code>ç»„ä»¶åº“å±‚</code></strong>ã€‚æœ€åæˆ‘ä»¬çš„ç»„ä»¶åº“åŸºäºä¸‹å±‚æä¾›çš„æŠ½è±¡èƒ½åŠ›ï¼Œå®ç°è·¨ç‰ˆæœ¬ã€‚</li>
<li><strong><code>åº”ç”¨</code></strong>ã€‚ä¸Šå±‚çš„ Vue 2 / 3 åº”ç”¨ã€‚ä¸‹å±‚çš„é€‚é…å™¨ï¼Œä¼šæ ¹æ®åº”ç”¨ä½¿ç”¨çš„ Vue ç‰ˆæœ¬ï¼ŒåŠ¨æ€åˆ‡æ¢é€‚é…ã€‚</li>
</ul>
<p><br><br><br></p>
<p><strong>2) æ–°ç‰ˆæœ¬ä¼˜å…ˆç­–ç•¥</strong></p>
<p>åœ¨å°è£…é€‚é…å™¨ æˆ–è€… jsx-runtime æ—¶ï¼Œå½“æ–°æ—§ç‰ˆæœ¬å‡ºç°å·®å¼‚æ—¶ï¼Œæˆ‘ä»¬å¦‚ä½•æŠ‰æ‹©ï¼Ÿ</p>
<p>è¿™é‡Œé‡‡ç”¨çš„æ˜¯â€œæ–°ç‰ˆæœ¬ä¼˜å…ˆâ€çš„ç­–ç•¥ï¼Œä¸¾ä¸€äº›ä¾‹å­ï¼š</p>
<ul>
<li>JSX çš„è¯­æ³•å¯¹é½ Vue 3 çš„æ¸²æŸ“å‡½æ•°ã€‚</li>
<li>åªä½¿ç”¨ Composition API</li>
<li>åªä½¿ç”¨ defineComponent</li>
</ul>
<p>æ¢å¥è¯è¯´ï¼Œå¦‚æœæƒ…å†µå…è®¸ï¼Œæˆ‘ä»¬å§‹ç»ˆä»¥ Vue 3 ä¸ºåŸºå‡†ã€‚</p>
<p><br><br><br></p>
<p><strong>3) çŸ­æ¿ä¼˜å…ˆç­–ç•¥</strong></p>
<p>çŸ­æ¿å¯¹é½æ˜¯å®ç°å…¼å®¹çš„åŸºç¡€ç­–ç•¥ï¼Œä¸»è¦åˆ†ä¸¤ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li>å‰Šå¤´: å¹¶ä¸æ˜¯æ‰€æœ‰ Vue 3 çš„ç‰¹æ€§éƒ½èƒ½ä¸‹æ”¾åˆ° Vue 2, æ¯”å¦‚ <code>Fragment</code>ã€<code>Teleport</code>ã€<code>Suspense</code>/<code>await setup</code>ã€‚æˆ‘ä»¬åªèƒ½æ”¾å¼ƒè¿™äº›åŠŸèƒ½ã€‚</li>
<li>è¡¥å°¾ï¼šé’ˆå¯¹ä¸€äº› Vue 2 çš„çŸ­æ¿ï¼Œéœ€è¦ä¸€äº›é¢å¤–çš„å·¥ä½œï¼Œæ¯”å¦‚ <a href="https://cn.vuejs.org/v2/guide/reactivity.html" target="_blank" rel="noopener">Vue 2 å“åº”å¼ç³»ç»Ÿçš„å±€é™æ€§</a>ã€‚</li>
</ul>
<p><br><br><br></p>
<p><strong>4) å›é€€ç­–ç•¥</strong></p>
<p>å¯¹äºä¸€äº›æ— æ³•æŠ¹å¹³çš„å·®å¼‚ï¼Œå¯ä»¥æŒ‰ç…§ä¸åŒçš„ç‰ˆæœ¬ç‰¹æ®Šå¤„ç†ã€‚å¯ä»¥ä½¿ç”¨ vue-demi çš„ <code>isVue2</code> æ¥åˆ†æ¡ä»¶å¤„ç†ã€‚</p>
<p><br><br><br><br><br></p>
<h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><h3 id="api-å…¼å®¹ï¼švue-demi"><a href="#api-å…¼å®¹ï¼švue-demi" class="headerlink" title="API å…¼å®¹ï¼švue demi"></a>API å…¼å®¹ï¼švue demi</h3><p><a href="https://github.com/vueuse/vue-demi" target="_blank" rel="noopener">vue-demi</a> ä¸ºå®ç°è·¨ Vue ç‰ˆæœ¬çš„åº“æä¾›åŸºç¡€çš„æ”¯æŒã€‚å®ƒçš„ä¸»è¦ç­–ç•¥ï¼š</p>
<ul>
<li><code>&lt;=2.6</code>: å¯¼å‡º  <code>vue</code> + <code>@vue/composition-api</code>.</li>
<li><code>2.7</code>: å¯¼å‡º  <code>vue</code> ( Vue 2.7 å†…ç½®æ”¯æŒ Composition API).</li>
<li><code>&gt;=3.0</code>: å¯¼å‡º  <code>vue</code>, æ¨¡æ‹Ÿäº† Vue 2 çš„<code>set</code> ã€ <code>del</code> API.</li>
</ul>
<p>vue-demi çš„å®ç°å¾ˆç®€å•ï¼Œå°±æ˜¯åœ¨ npm çš„ <code>postinstall</code> é’©å­ä¸­ï¼Œåˆ¤æ–­å½“å‰ç¯å¢ƒå®‰è£…çš„ vue åº“ç‰ˆæœ¬ï¼Œå†³å®šå¯¼å…¥çš„åº“ã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„åœºæ™¯ä¸­ï¼Œé™¤äº† Composition API å’Œä¸€äº›åŸºç¡€ç±»å‹ä¿¡æ¯è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬ Fork äº† vue-demi æ¥æ‰©å……äº†ä¸€äº›å¡«å……ç‰©ï¼Œè¿›ä¸€æ­¥æŠ¹å¹³ä¸€äº›å·®å¼‚ã€‚</p>
<p><br><br><br><br><br></p>
<h3 id="æ¸²æŸ“è¯­æ³•ï¼šjsx-runtime-çš„å®ç°"><a href="#æ¸²æŸ“è¯­æ³•ï¼šjsx-runtime-çš„å®ç°" class="headerlink" title="æ¸²æŸ“è¯­æ³•ï¼šJSX runtime çš„å®ç°"></a>æ¸²æŸ“è¯­æ³•ï¼šJSX runtime çš„å®ç°</h3><p>JSX runtime çš„å®ç°å¹¶ä¸æ¶‰åŠå¤ªå¤æ‚çš„æŠ€æœ¯ï¼Œä¸»è¦è¿˜æ˜¯å¤„ç†æ¸²æŸ“å‡½æ•°çš„ç¹ç API å·®å¼‚ã€‚</p>
<p>æ–‡ç« ç¯‡å¹…æœ‰é™ï¼Œè¿™é‡Œæˆ‘å°±ä¸å±•å¼€è®²ç»†èŠ‚äº†ã€‚<strong>âš ï¸ å®Œæ•´çš„å·®å¼‚å¯¹æ¯”å’Œåº”å¯¹æ–¹å¼å¯ä»¥çœ‹è¿™é‡Œ</strong>ï¼š</p>
<p><br></p>
<p><a href="https://www.notion.so/Vue-2-3-302cbe0e37794345bbfbd89e32d617db?pvs=21" target="_blank" rel="noopener">ğŸ‰Vue 2 / 3 æ¸²æŸ“å‡½æ•°çš„å·®å¼‚ ğŸ‰</a></p>
<p><br></p>
<p>ç®€å•æ¥è¯´ï¼Œæˆ‘ä»¬çš„ JSX è¯­æ³•ä»¥ Vue 3 ä¸ºåŸºå‡†ï¼Œä¸»è¦æ¶‰åŠäº‹ä»¶è®¢é˜…ã€slotsã€æŒ‡ä»¤çš„è½¬æ¢ã€‚</p>
<p><br></p>
<p><img src="/images/component-for-vue2-3/Untitled%203.png" alt="Untitled"></p>
<p>å…·ä½“å®ç°å¯ä»¥çœ‹<a href="https://github.com/wakeadmin/tools/tree/main/packages/h" target="_blank" rel="noopener">è¿™é‡Œ</a></p>
<p><br><br><br><br><br></p>
<h3 id="ç»„ä»¶å®šä¹‰ä¸-typescript-æ”¯æŒ"><a href="#ç»„ä»¶å®šä¹‰ä¸-typescript-æ”¯æŒ" class="headerlink" title="ç»„ä»¶å®šä¹‰ä¸ Typescript æ”¯æŒ"></a>ç»„ä»¶å®šä¹‰ä¸ Typescript æ”¯æŒ</h3><p>Typescript + Volar å°±æ˜¯ä¸€é—¨ç„å­¦ï¼Œç±»å‹â€˜ä½“æ“â€™å‡ ä¹å æ®äº†å¼€å‘çš„ä¸‰åˆ†ä¹‹ä¸€æ—¶é—´ã€‚ä¸»è¦é—®é¢˜ï¼š</p>
<ul>
<li>Vue 2/3 ç±»å‹å®šä¹‰å’Œå¯¼å‡ºæœ‰ç»†å¾®çš„å·®åˆ«ã€‚æˆ‘ä»¬çš„ jsx-runtime è¦æ±‚ä¸€è‡´çš„ç±»å‹ã€‚</li>
<li>JSX çš„ slots ä¸æ”¯æŒç±»å‹æ£€æŸ¥ã€‚æ¸²æŸ“å‡½æ•°æ¯•ç«Ÿä¸æ˜¯ Vue çš„ç¬¬ä¸€å…¬æ°‘ï¼Œslots åœ¨ JSX ä¸‹æ— æ³•ç±»å‹æ£€æŸ¥ã€‚</li>
<li>ä¸ºäº†å…¼å®¹ options API, <code>defineComponent</code> ç±»å‹å®šä¹‰å’Œæ¨å¯¼æ¯”è¾ƒ<a href="https://github.com/vuejs/core/blob/a95e612b252ae59eaf56e0b8ddba66948d4ac20e/packages/runtime-core/src/apiDefineComponent.ts#L44" target="_blank" rel="noopener">å¤æ‚</a>ã€‚</li>
<li>æ³›å‹ç»„ä»¶å®ç°æ¯”è¾ƒå¤æ‚ï¼ŒVolar æ³›å‹çš„æ”¯æŒä¹Ÿæ¯”è¾ƒç„å­¦ã€‚</li>
</ul>
<p><br><br><br></p>
<p>ä¸ºäº†èƒ½å¤Ÿæ›´å¥½åœ°å®šä¹‰è·¨ç‰ˆæœ¬çš„ç»„ä»¶ï¼Œæä¾›æ›´å¥½çš„ç±»å‹æ”¯æŒï¼Œæˆ‘ä»¬æ‰“ç®—ç®€åŒ– <code>defineComponent</code>ã€‚ä¸ºäº†é¿å…å‘½åå†²çªï¼Œå°šä¸”å‘½åä¸º <code>declareComponent</code> å§, è¿™ä¸ªå‡½æ•°æœ‰ä»¥ä¸‹èŒè´£ï¼š</p>
<ul>
<li>ä¸ºå®ç°è·¨ç‰ˆæœ¬æ”¯æŒæä¾›å¿…è¦çº¦æŸã€‚<code>declareComponent</code> è£å‰ªæ‰äº† <code>Options API</code>, åªä¿ç•™ setupã€propsã€render ç­‰å±æ€§ã€‚å¼ºåˆ¶èµ° <code>Composition API</code>ã€‚</li>
<li>ä¸º JSX (æ¯”å¦‚ v-slots å±æ€§)æä¾›æ›´å¥½ç±»å‹æ£€æŸ¥æ”¯æŒ</li>
<li>åŒæ—¶å…¼å®¹ vue template çš„ç±»å‹æ£€æŸ¥ (<code>volar</code>)ã€‚</li>
<li>åœ¨è¿è¡Œæ—¶æŠ¹å¹³ä¸€äº›è·¨ç‰ˆæœ¬çš„å·®å¼‚ã€‚ç»å¤§éƒ¨åˆ†å·®å¼‚ï¼ŒVue 2.7 åœ¨ <code>defineComponent</code> æ–¹æ³•å†…éƒ¨å·²ç»æŠ¹å¹³äº†ã€‚è¿˜æœ‰ä¸€äº› <code>inheritAttrs</code> å¸¦æ¥çš„<a href="https://www.notion.so/Vue-2-3-302cbe0e37794345bbfbd89e32d617db?pvs=21" target="_blank" rel="noopener">éšå¼å·®å¼‚</a>ï¼Œ<strong>declareComponent ç›´æ¥å…³é—­äº† <code>inheritAttrs</code></strong> ã€‚</li>
<li>è¡¥å…¨çŸ­æ¿ï¼Œå¹¶ä¸”å‘ä¸‹ä¿æŒå…¼å®¹ã€‚Vue 2 å·²ç»ä¸æ›´æ–°äº†ï¼Œæˆ‘ä»¬æƒ³è¦æ”¯æŒä¸€äº›æ–°çš„ç‰¹æ€§ï¼Œæ¯”å¦‚æ³›å‹ã€‚</li>
</ul>
<p><br></p>
<p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">const Counter = declareComponent(&#123;</span><br><span class="line">  name: &apos;Counter&apos;,</span><br><span class="line">  // å®šä¹‰ props</span><br><span class="line">  props: declareProps&lt;&#123;</span><br><span class="line">    initialValue: number</span><br><span class="line">  &#125;&gt;(</span><br><span class="line">    // âš ï¸ å’Œ defineComponent ä¸€æ ·ï¼Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦æ˜¾å¼å®šä¹‰ props, å¦åˆ™ä¼šè¢«å½“åš attrs</span><br><span class="line">    [&apos;initialValue&apos;]</span><br><span class="line">  ),</span><br><span class="line"></span><br><span class="line">  // å®šä¹‰äº‹ä»¶</span><br><span class="line">  emits: declareEmits&lt;&#123; change: (value: number) =&gt; void &#125;&gt;(),</span><br><span class="line"></span><br><span class="line">  // å®šä¹‰æ’æ§½</span><br><span class="line">  // slots: declareSlots&lt;&#123; foo: &#123; a: number &#125; &#125;&gt;(),</span><br><span class="line"></span><br><span class="line">  // setup</span><br><span class="line">  setup(props, &#123; emit &#125;) &#123;</span><br><span class="line">    const count = ref(props.initialValue)</span><br><span class="line">    const handleClick = () =&gt; &#123;</span><br><span class="line">      count.value++</span><br><span class="line"></span><br><span class="line">      emit(&apos;change&apos;, count.value)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return () =&gt; (</span><br><span class="line">      &lt;div title=&quot;count&quot; onClick=&#123;handleClick&#125;&gt;</span><br><span class="line">        count: &#123;count.value&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><br><br><br></p>
<p>ä¸ºäº†å®ç°è¿™ä¸ªç›®æ ‡ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ <code>Volar</code> æ˜¯å¦‚ä½•æ¨æ–­ç»„ä»¶çš„ç±»å‹ï¼š</p>
<p><br></p>
<p>å¤§è‡´çš„æ¨å¯¼è¿‡ç¨‹å¦‚ä¸‹, å…¶æ¬¡å¯ä»¥å‚è€ƒ <code>vue-tsc</code> çš„ç¼–è¯‘è¾“å‡ºæˆ–è€… Vue <code>defineComponent</code> çš„ç±»å‹å£°æ˜ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">// https://github.com/vuejs/language-tools/blob/71240c78f1a205605f4c079a299b2701250ef9be/packages/vue-component-type-helpers/index.d.ts#L5</span><br><span class="line">export type ComponentProps&lt;T&gt; = T extends new () =&gt; &#123; $props: infer P &#125;</span><br><span class="line">  ? NonNullable&lt;P&gt;</span><br><span class="line">  : T extends (props: infer P, ...args: any) =&gt; any</span><br><span class="line">  ? P</span><br><span class="line">  : &#123;&#125;</span><br><span class="line"></span><br><span class="line">export type ComponentSlots&lt;T&gt; = T extends new () =&gt; &#123; $slots: infer S &#125;</span><br><span class="line">  ? NonNullable&lt;S&gt;</span><br><span class="line">  : T extends (props: any, ctx: &#123; slots: infer S &#125;, ...args: any) =&gt; any</span><br><span class="line">  ? NonNullable&lt;S&gt;</span><br><span class="line">  : &#123;&#125;</span><br><span class="line"></span><br><span class="line">export type ComponentEmit&lt;T&gt; = T extends new () =&gt; &#123; $emit: infer E &#125;</span><br><span class="line">  ? NonNullable&lt;E&gt;</span><br><span class="line">  : T extends (props: any, ctx: &#123; emit: infer E &#125;, ...args: any) =&gt; any</span><br><span class="line">  ? NonNullable&lt;E&gt;</span><br><span class="line">  : &#123;&#125;</span><br><span class="line"></span><br><span class="line">export type ComponentExposed&lt;T&gt; = T extends new () =&gt; infer E</span><br><span class="line">  ? E</span><br><span class="line">  : T extends (props: any, ctx: &#123; expose(exposed: infer E): any &#125;, ...args: any) =&gt; any</span><br><span class="line">  ? NonNullable&lt;E&gt;</span><br><span class="line">  : &#123;&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Vue 2.x</span><br><span class="line"> */</span><br><span class="line">export type Vue2ComponentSlots&lt;T&gt; = T extends new () =&gt; &#123; $scopedSlots: infer S &#125;</span><br><span class="line">  ? NonNullable&lt;S&gt;</span><br><span class="line">  : T extends (props: any, ctx: &#123; slots: infer S &#125;, ...args: any) =&gt; any</span><br><span class="line">  ? NonNullable&lt;S&gt;</span><br><span class="line">  : &#123;&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<p>ç®€å•æ¥è¯´ <code>defineComponent</code> æ–¹æ³•æœ€ç»ˆè¾“å‡ºçš„ç»„ä»¶çš„ç±»å‹å¤–è§‚é•¿è¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">type YourComponent = new (...args: any[]): &#123;</span><br><span class="line">  $props: Props ç±»å‹</span><br><span class="line">  $emit: äº‹ä»¶ç±»å‹</span><br><span class="line">  $slots: æ’æ§½ç±»å‹</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ğŸ’¡ é‚£ Typescript çš„ JSX æ€ä¹ˆå¯¹ç»„ä»¶è¿›è¡Œç±»å‹æ£€æŸ¥å‘¢ï¼Ÿè¿™ä¸ªå¯ä»¥å‚è€ƒ Typescript çš„ <a href="https://www.typescriptlang.org/docs/handbook/jsx.html" target="_blank" rel="noopener">JSX æ–‡æ¡£</a>ï¼Œè¿˜æœ‰ Vue çš„ JSX <a href="https://github.com/vuejs/core/blob/a95e612b252ae59eaf56e0b8ddba66948d4ac20e/packages/vue/jsx.d.ts#L3" target="_blank" rel="noopener">ç±»å‹å®šä¹‰</a>ã€‚ç®€å•è¯´ä¹Ÿæ˜¯ä»ä¸Šè¿°çš„ <code>$props</code> ä¸­æ¨å¯¼çš„ã€‚</p>
</blockquote>
<p><br><br><br></p>
<p>æˆ‘ä»¬çš„ <code>declareComponent</code> åªè¦ä¿æŒå’Œä¸Šé¢çš„ç±»å‹å…¼å®¹ï¼Œå°±å¯ä»¥è®© <code>volar</code> åœ¨ vue template ä¸‹è¿›è¡Œç±»å‹æ£€æŸ¥äº†ã€‚</p>
<p><br></p>
<p>å› ä¸ºåˆ¨é™¤æ‰äº†ä¸å¿…è¦çš„ Options API, ç›¸æ¯” defineComponent, ç±»å‹å®šä¹‰å¯ä»¥ç®€åŒ–å¾ˆå¤š:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">export function declareComponent&lt;</span><br><span class="line">  Props extends &#123;&#125; = &#123;&#125;,</span><br><span class="line">  Emit extends &#123;&#125; = &#123;&#125;,</span><br><span class="line">  Expose extends &#123;&#125; = &#123;&#125;,</span><br><span class="line">  Slots extends &#123;&#125; = &#123;&#125;</span><br><span class="line">&gt;(</span><br><span class="line">  options: SimpleComponentOptions&lt;Props, Emit, Expose, Slots&gt;</span><br><span class="line">): DefineComponent&lt;Props, Emit, Expose, Slots&gt; &#123;</span><br><span class="line">  /// .. å®ç°å¿½ç•¥ï¼Œç®€å•å°è£… defineComponent</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ğŸ”´ ç®€åŒ– defineComponent API, åªä¿ç•™ Composition API</span><br><span class="line">export type SimpleComponentOptions&lt;</span><br><span class="line">  Props extends &#123;&#125;,</span><br><span class="line">  Emit extends &#123;&#125;,</span><br><span class="line">  Expose extends &#123;&#125;,</span><br><span class="line">  Slots extends &#123;&#125;</span><br><span class="line">&gt; = &#123;</span><br><span class="line">  name?: string</span><br><span class="line">  props?: Props</span><br><span class="line">  emits?: Emit</span><br><span class="line">  slots?: Slots</span><br><span class="line">  expose?: Expose</span><br><span class="line">  setup: (</span><br><span class="line">    props: Props,</span><br><span class="line">    ctx: SetupContext&lt;Emit, DefaultSlots &amp; Slots, Expose, Data&gt;</span><br><span class="line">  ) =&gt; Promise&lt;RenderFunction | void&gt; | RenderFunction | void</span><br><span class="line">  inheritAttrs?: boolean</span><br><span class="line">  serverPrefetch?(): Promise&lt;any&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export interface ComponentInstance&lt;</span><br><span class="line">  Props extends &#123;&#125;,</span><br><span class="line">  Emit extends &#123;&#125;,</span><br><span class="line">  Expose extends &#123;&#125;,</span><br><span class="line">  Slots extends &#123;&#125;</span><br><span class="line">&gt; &#123;</span><br><span class="line">  // props å®šä¹‰</span><br><span class="line">  $props: Props &amp;</span><br><span class="line">    // ğŸ”´ å°† emit è½¬æ¢ä¸º on* å½¢å¼ï¼Œæ–¹ä¾¿ JSX åœºæ™¯ä½¿ç”¨</span><br><span class="line">    EmitsToProps&lt;Emit&gt; &amp; &#123; &apos;v-slots&apos;?: Partial&lt;VSlotType&lt;Slots&gt;&gt; &#125; &amp; &#123;</span><br><span class="line">      // ğŸ”´ æ‰©å±•äº† v-slots çš„å®šä¹‰ï¼Œæ–¹ä¾¿ JSX åœºæ™¯ä½¿ç”¨</span><br><span class="line">      &apos;v-children&apos;?: VChildrenType&lt;Slots&gt;</span><br><span class="line">    &#125; &amp; &#123;</span><br><span class="line">      ref?: RefType&lt;Expose | Expose[]&gt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  // ğŸ”´ æ”¯æŒ volar æ¨æ–­ slots</span><br><span class="line">  $slots: VSlotType&lt;Slots&gt;</span><br><span class="line">  // ğŸ”´ æ”¯æŒ volar æ¨æ–­ äº‹ä»¶</span><br><span class="line">  $emit: EmitFn&lt;Emit&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å¯ä»¥å¯¹æ¯” Vue çš„ DefineComponent çœ‹çœ‹</span><br><span class="line">export interface DefineComponent&lt;</span><br><span class="line">  Props extends &#123;&#125;,</span><br><span class="line">  Emit extends &#123;&#125;,</span><br><span class="line">  Expose extends &#123;&#125;,</span><br><span class="line">  Slots extends &#123;&#125;</span><br><span class="line">&gt; &#123;</span><br><span class="line">  new (...args: any[]): ComponentInstance&lt;Props, Emit, Expose, Slots&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>é‚£æ€ä¹ˆæ”¯æŒæ³›å‹ç»„ä»¶å—ï¼Ÿ</strong></p>
<p><br><br><br><br><br></p>
<h3 id="æ³›å‹ç»„ä»¶"><a href="#æ³›å‹ç»„ä»¶" class="headerlink" title="æ³›å‹ç»„ä»¶"></a><strong>æ³›å‹ç»„ä»¶</strong></h3><blockquote>
<p>Volar éœ€è¦å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚</p>
</blockquote>
<blockquote>
<p>Volar çš„æ³›å‹æ”¯æŒæ¯”è¾ƒç„å­¦ï¼Œæˆ‘å»ºè®®ä¸è¦éšæ„å°è¯•ï¼</p>
</blockquote>
<p>Vue 3.3 å®˜æ–¹æ­£å¼æ”¯æŒäº†<a href="https://blog.vuejs.org/posts/vue-3-3" target="_blank" rel="noopener">æ³›å‹ SFC</a> å’Œ defineComponent, ç¬”è€…å®æµ‹ Volar è¿™å—æ”¯æŒè¿˜æœ‰å¾…æ”¹è¿›ã€‚ä½†æ˜¯ä¸å¦¨ç¢æˆ‘ä»¬è¿›è¡Œåˆæ­¥çš„å°è¯•ã€‚</p>
<p>ä¸Šæ–‡çš„ <code>declareComponent</code> å†™æ³•æ˜¯ä¸æ”¯æŒæ³›å‹ç»„ä»¶çš„ã€‚æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®ç°æ³›å‹ç»„ä»¶çš„å£°æ˜ï¼Œå…ˆæ¥çœ‹ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„ï¼š</p>
<ol>
<li><p><strong>ç±»å‹æ–­è¨€</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">// ğŸ”´ ä½¿ç”¨æ³›å‹å®šä¹‰ propsã€emit å’Œ expose ç­‰ç±»å‹</span><br><span class="line">interface Props&lt;T&gt; &#123;</span><br><span class="line">  list: T[]</span><br><span class="line">  filter: (item: T) =&gt; boolean</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ğŸ“¢ è¿™é‡Œè¦ç”¨ type</span><br><span class="line">type Emit&lt;T&gt; = &#123;</span><br><span class="line">  add: (item: T) =&gt; void</span><br><span class="line">  change: (list: T[]) =&gt; void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Expose&lt;T&gt; = &#123;</span><br><span class="line">  open: (item: T) =&gt; void</span><br><span class="line">  list: T[]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Slots&lt;T&gt; = &#123;</span><br><span class="line">  foo: (list: T[]) =&gt; any</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const GenericBar = declareComponent(&#123;</span><br><span class="line">  props: declareProps&lt;Props&lt;any&gt;&gt;([]),</span><br><span class="line">  emits: declareEmits&lt;Emit&lt;any&gt;&gt;(),</span><br><span class="line">  expose: declareExpose&lt;Expose&lt;any&gt;&gt;(),</span><br><span class="line">  slots: declareSlots&lt;Slots&lt;any&gt;&gt;(),</span><br><span class="line">  setup(props, ctx) &#123;</span><br><span class="line">    expectType&lt;any[]&gt;(props.list)</span><br><span class="line">    ctx.emit(&apos;change&apos;, [])</span><br><span class="line">    ctx.slots.foo?.([])</span><br><span class="line">    ctx.expose(&#123;</span><br><span class="line">      list: [],</span><br><span class="line">      open() &#123;</span><br><span class="line">        // ignore</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    return &#123;&#125; as any</span><br><span class="line">  &#125;,</span><br><span class="line">  // ğŸ”´ é‡æ–°æ–­è¨€ï¼Œæ”¯æŒ æ³›å‹</span><br><span class="line">&#125;) as new &lt;T&gt;(...args: any[]) =&gt; ComponentInstance&lt;Props&lt;T&gt;, Emit&lt;T&gt;, Expose&lt;T&gt;, Slots&lt;T&gt;&gt;</span><br><span class="line"></span><br><span class="line">// æµ‹è¯•</span><br><span class="line">;&lt;GenericBar</span><br><span class="line">  list=&#123;[1, 2]&#125;</span><br><span class="line">  filter=&#123;(i) =&gt; &#123;</span><br><span class="line">    expectType&lt;number&gt;(i)</span><br><span class="line">    return true</span><br><span class="line">  &#125;&#125;</span><br><span class="line">  onAdd=&#123;(i) =&gt; &#123;</span><br><span class="line">    expectType&lt;number&gt;(i)</span><br><span class="line">  &#125;&#125;</span><br><span class="line">  onChange=&#123;(i) =&gt; &#123;</span><br><span class="line">    expectType&lt;number[]&gt;(i)</span><br><span class="line">  &#125;&#125;</span><br><span class="line">  v-slots=&#123;&#123;</span><br><span class="line">    foo(i) &#123;</span><br><span class="line">      expectType&lt;number[]&gt;(i)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;&#125;</span><br><span class="line">&gt;&lt;/GenericBar&gt;</span><br></pre></td></tr></table></figure>
<p> <br></p>
<p>ä¸Šé¢çš„æ–¹å¼åœ¨ JSX è¡¨ç°æ­£å¸¸ï¼Œ<strong>ä½†æ˜¯ç›®å‰ Volar åœ¨ vue template å¹¶ä¸æ”¯æŒã€‚</strong></p>
<blockquote>
<p>ğŸ’¡ <strong>è¿™é‡Œä¹Ÿæœ‰ä¸€äº›å†·çŸ¥è¯†ã€‚</strong>å‡è®¾ ç›®æ ‡ç±»å‹çº¦æŸäº† <code>Index Signature</code>, æ¯”å¦‚ <code>{[key: string]: Function }</code>, é‚£ä¹ˆ <code>interface</code> æ˜¯æ— æ³•èµ‹å€¼ç»™å®ƒçš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; interface Indexed &#123;</span><br><span class="line">&gt;   [key: string]: Function</span><br><span class="line">&gt; &#125;</span><br><span class="line">&gt;</span><br><span class="line">&gt; interface Foo &#123;</span><br><span class="line">&gt;   hello: () =&gt; void</span><br><span class="line">&gt; &#125;</span><br><span class="line">&gt;</span><br><span class="line">&gt; declare let a: Indexed</span><br><span class="line">&gt; declare let b: Foo</span><br><span class="line">&gt;</span><br><span class="line">&gt; a = b // ğŸš¨ Index signature for type &apos;string&apos; is missing in type &apos;Foo&apos;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>å¦‚æœä½¿ç”¨ <code>type</code> åˆ›å»ºç±»å‹å°±å¯ä»¥:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; type Bar = &#123;</span><br><span class="line">&gt;   hello: () =&gt; void</span><br><span class="line">&gt; &#125;</span><br><span class="line">&gt;</span><br><span class="line">&gt; declare let c: Bar</span><br><span class="line">&gt; a = c // it&apos;s work</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>ç¬”è€…æ¨æµ‹ï¼Œåº”è¯¥<strong>æ˜¯ interface å…è®¸ <a href="https://www.typescriptlang.org/docs/handbook/declaration-merging.html#merging-interfaces" target="_blank" rel="noopener">åˆå¹¶</a>ï¼Œä¸æ˜¯é™æ€çš„ï¼Œå› æ­¤ä¸èƒ½å®‰å…¨åœ°æ»¡è¶³ Index Signature çš„çº¦æŸ</strong>ã€‚</p>
<p>äº†è§£æ›´å¤šï¼š</p>
<p><a href="https://stackoverflow.com/questions/60697214/how-to-fix-index-signature-is-missing-in-type-error" target="_blank" rel="noopener">How to fix â€œIndex signature is missing in typeâ€ error?</a></p>
</blockquote>
<p> <br><br> <br></p>
</li>
<li><p><strong>å‡½æ•°å½¢å¼</strong></p>
<p>Vue 3.3 çš„ <code>defineComponent</code> æ–°å¢äº†ä¸€ç§<a href="https://cn.vuejs.org/api/general.html#definecomponent" target="_blank" rel="noopener">å‡½æ•°ç­¾åå½¢å¼</a>ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">const Comp = defineComponent(</span><br><span class="line">  &lt;T extends string | number&gt;(props: &#123; msg: T; list: T[] &#125;) =&gt; &#123;</span><br><span class="line">    // å°±åƒåœ¨ &lt;script setup&gt; ä¸­ä¸€æ ·ä½¿ç”¨ç»„åˆå¼ API</span><br><span class="line">    const count = ref(0)</span><br><span class="line"></span><br><span class="line">    return () =&gt; &#123;</span><br><span class="line">      // æ¸²æŸ“å‡½æ•°æˆ– JSX</span><br><span class="line">      return &lt;div&gt;&#123;count.value&#125;&lt;/div&gt;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  // å»æ‰æ³¨é‡Šï¼Œæ³›å‹ä¼šå¤±æ•ˆ</span><br><span class="line">  // ç›®å‰ä»ç„¶éœ€è¦æ‰‹åŠ¨å£°æ˜è¿è¡Œæ—¶çš„ props</span><br><span class="line">  // &#123;</span><br><span class="line">  //  props: [&apos;msg&apos;, &apos;list&apos;]</span><br><span class="line">  /// &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>å°´å°¬çš„æ˜¯ï¼ŒVue ç»„ä»¶å¿…é¡»æ˜¾å¼å®šä¹‰ props å‚æ•°ï¼Œä¸ç„¶ä¼šè¢«å½“åš attrs å¤„ç†ã€‚æ‰€ä»¥ï¼Œå½“ä½ å°†ä¸Šé¢çš„<strong>props å‚æ•°æ³¨é‡Šå»æ‰æ—¶ï¼Œæ³›å‹å°±ä¼šå¤±æ•ˆäº† ğŸ˜€</strong> ã€‚</p>
<p>å¦å¤–ä¸€ä»¶å°´å°¬çš„äº‹æƒ…æ˜¯ï¼Œæˆªæ­¢ç›®å‰ä¸ºæ­¢ï¼Œç”¨ä¸Šé¢è¯­æ³•åˆ›å»ºçš„ç»„ä»¶ï¼Œåœ¨ Volar ä¸Šå¹¶ä¸èƒ½å¾—åˆ°å¾ˆå¥½çš„æ”¯æŒ(åªèƒ½æ­£ç¡®æ¨æ–­ props)ã€‚</p>
<p><br></p>
<p>ä½†ä½¿ç”¨ <a href="https://cn.vuejs.org/api/sfc-script-setup.html#generics" target="_blank" rel="noopener">SFC æ³›å‹è¯­æ³•</a> åˆ™ä¼šè¡¨ç°å¥½ä¸€ç‚¹ã€‚SFC æœ‰ä»€ä¹ˆç‰¹æ®Šï¼Ÿ</p>
<p>æˆ‘ä½¿ç”¨ vue-tsc å°†ç»„ä»¶ç¼–è¯‘äº†ä¸€ä¸‹ï¼Œå¤§æ¦‚ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">declare const _default: &lt;T&gt;(</span><br><span class="line">  // ğŸ”´ props ç±»å‹</span><br><span class="line">  __VLS_props: &#123;</span><br><span class="line">    list: T[]</span><br><span class="line">    filter: (item: T) =&gt; boolean</span><br><span class="line">  &#125; &amp; VNodeProps &amp;</span><br><span class="line">    AllowedComponentProps &amp;</span><br><span class="line">    ComponentCustomProps,</span><br><span class="line"></span><br><span class="line">  // ğŸ”´ context ç±»å‹</span><br><span class="line">  __VLS_ctx?:</span><br><span class="line">    | Pick&lt;</span><br><span class="line">        &#123;</span><br><span class="line">          props: &#123;</span><br><span class="line">            list: T[]</span><br><span class="line">            filter: (item: T) =&gt; boolean</span><br><span class="line">          &#125;</span><br><span class="line">          expose(exposed: &#123; data: Ref&lt;T[] | null | undefined&gt; &#125;): void</span><br><span class="line">          attrs: any</span><br><span class="line">          slots: &#123;</span><br><span class="line">            foo: (scope: &#123; list: T[] &#125;) =&gt; any</span><br><span class="line">          &#125;</span><br><span class="line">          emit: &#123;</span><br><span class="line">            change: [T[]]</span><br><span class="line">            foo: [T, number]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &apos;attrs&apos; | &apos;emit&apos; | &apos;slots&apos;</span><br><span class="line">      &gt;</span><br><span class="line">    | undefined</span><br><span class="line">) =&gt; // ğŸ”´ è¿”å›å€¼</span><br><span class="line">VNode &amp; &#123;</span><br><span class="line">  __ctx?:</span><br><span class="line">    | &#123;</span><br><span class="line">        props: &#123;</span><br><span class="line">          list: T[]</span><br><span class="line">          filter: (item: T) =&gt; boolean</span><br><span class="line">        &#125;</span><br><span class="line">        expose(exposed: &#123; data: Ref&lt;T[] | null | undefined&gt; &#125;): void</span><br><span class="line">        attrs: any</span><br><span class="line">        slots: &#123;</span><br><span class="line">          foo: (scope: &#123; list: T[] &#125;) =&gt; any</span><br><span class="line">        &#125;</span><br><span class="line">        emit: &#123;</span><br><span class="line">          change: [T[]]</span><br><span class="line">          foo: [T, number]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    | undefined</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>SFC çš„ç¼–è¯‘ç»“æœå¤šå‡ºäº† <code>__ctx</code> å­—æ®µï¼Œå®é™…ä¸Š Volar å°±æ˜¯ä» __ctx ä¸­æå–äº†ç›¸å…³ç±»å‹ã€‚</p>
<aside><br>ğŸ’¡ __ctx åº”è¯¥æ˜¯ volar çš„å†…éƒ¨å®ç°ç»†èŠ‚ï¼Œä¸æ’é™¤åé¢ä¼šå˜åŠ¨<br><br></aside>

<p>é‚£æˆ‘ä»¬ç°åœ¨å°±æ¨¡ä»¿å®ƒï¼Œé‡æ„ä¸€ä¸‹ <code>declareComponent</code> çš„ç­¾å:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">export interface DefineComponentContext&lt;</span><br><span class="line">  Emit extends ObjectEmitsOptions = &#123;&#125;,</span><br><span class="line">  Expose extends &#123;&#125; = &#123;&#125;,</span><br><span class="line">  Slots extends &#123; [key: string]: Function &#125; = &#123;&#125;,</span><br><span class="line">  Attrs extends &#123;&#125; = &#123;&#125;</span><br><span class="line">&gt; &#123;</span><br><span class="line">  attrs: Attrs</span><br><span class="line">  slots: Slots</span><br><span class="line">  emit: EmitFn&lt;Emit&gt;</span><br><span class="line">  expose: ExposeFn&lt;Expose&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export function declareComponent&lt;</span><br><span class="line">  Props extends &#123;&#125;,</span><br><span class="line">  Emit extends ObjectEmitsOptions = &#123;&#125;,</span><br><span class="line">  Expose extends &#123;&#125; = &#123;&#125;,</span><br><span class="line">  Slots extends &#123; [key: string]: Function &#125; = &#123;&#125;,</span><br><span class="line">  Attrs extends &#123;&#125; = &#123;&#125;</span><br><span class="line">&gt;(</span><br><span class="line">  setup: (</span><br><span class="line">    props: Props,</span><br><span class="line">    ctx: DefineComponentContext&lt;Emit, Expose, Slots, Attrs&gt;</span><br><span class="line">  ) =&gt; Promise&lt;RenderFunction | void&gt; | RenderFunction | void,</span><br><span class="line">  options?: &#123;</span><br><span class="line">    props?: Array&lt;keyof Props&gt; | ComponentObjectPropsOptions&lt;Partial&lt;Props&gt;&gt;</span><br><span class="line">    name?: string</span><br><span class="line">    inheritAttrs?: boolean</span><br><span class="line">    serverPrefetch?(): Promise&lt;any&gt;</span><br><span class="line">  &#125;</span><br><span class="line">): (</span><br><span class="line">  props: PropsType&lt;Props, Emit, Slots, Expose&gt;,</span><br><span class="line">  ctx: DefineComponentContext&lt;Emit, Expose, Slots, Attrs&gt;</span><br><span class="line">) =&gt; VNode &amp; &#123;</span><br><span class="line">  // ğŸ›‘</span><br><span class="line">  __ctx: &#123;</span><br><span class="line">    emit: EmitFn&lt;Emit&gt;</span><br><span class="line">    slots: Slots</span><br><span class="line">    expose: ExposeFn&lt;Expose&gt;</span><br><span class="line">    attrs: Attrs</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">function Foo&lt;T&gt;(</span><br><span class="line">  props: &#123; list: T[]; filter: (item: T) =&gt; boolean &#125;,</span><br><span class="line">  ctx: DefineComponentContext&lt;</span><br><span class="line">    &#123; change: (list: T[]) =&gt; void; add: (item: T) =&gt; void &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      open: (item: T) =&gt; void</span><br><span class="line">      list: T[]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      foo: (list: T[]) =&gt; any</span><br><span class="line">    &#125;</span><br><span class="line">  &gt;</span><br><span class="line">) &#123;</span><br><span class="line">  return () =&gt; &#123;</span><br><span class="line">    // render</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// âš ï¸ props è¿˜æ˜¯è¦å®šä¹‰</span><br><span class="line">Foo.props = [&apos;list&apos;, &apos;filter&apos;]</span><br><span class="line"></span><br><span class="line">export default declareComponent(Foo)</span><br></pre></td></tr></table></figure>
<p>ç›®å‰ Volar åœ¨æ³›å‹çš„æ”¯æŒä¸Šè¿˜æœ‰ä¸å°‘çš„å‘ã€‚æ¯”å¦‚ä¸Šé¢çš„ç¤ºä¾‹ä¸­äº‹ä»¶å¤„ç†å™¨çš„æ³›å‹å˜é‡ä¼šæ¨æ–­ä¸º unknownã€‚è®©å­å¼¹å†é£ä¸€ä¼šå§ã€‚</p>
</li>
</ol>
<p><br><br><br><br><br> </p>
<h3 id="element-adapter"><a href="#element-adapter" class="headerlink" title="element-adapter"></a>element-adapter</h3><p>å®ç°çš„åŸç†å’Œ vue-demi ç±»ä¼¼ï¼Œåœ¨ postinstall æ—¶å†³å®šä½¿ç”¨å“ªä¸ªç‰ˆæœ¬ã€‚é¡¹ç›®çš„ç»“æ„å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">scripts/             <span class="comment"># å’Œ vue-demi ä¸€æ ·ï¼Œå®ç°äº† postinstall å’Œåˆ‡æ¢ CLI</span></span><br><span class="line">  postinstall.mjs</span><br><span class="line">  switch-cli.mjs</span><br><span class="line">src/</span><br><span class="line">  shared/</span><br><span class="line">  v2/                <span class="comment"># element-ui å¯¼å‡º</span></span><br><span class="line">    components/</span><br><span class="line">      Table.js</span><br><span class="line">      Slide.js</span><br><span class="line">      ...</span><br><span class="line">  v3/                <span class="comment"># element-plus å¯¼å‡º</span></span><br><span class="line">    components/</span><br><span class="line">      ...</span><br><span class="line">types/               <span class="comment"># é‡æ–°å£°æ˜ç»„ä»¶çš„ç±»å‹ä¿¡æ¯ã€‚</span></span><br><span class="line">  alert.d.ts</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>
<p><br> </p>
<p>å¤§éƒ¨åˆ†ç»„ä»¶ä¸éœ€è¦ç‰¹æ®Šå¤„ç†ï¼Œé‡æ–°å¯¼å‡ºå°±è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> &#123; Button &#125; from <span class="string">'element-ui'</span>;</span><br></pre></td></tr></table></figure>
<p><br> </p>
<p>æœ‰ä¸€äº›ç»„ä»¶å‚æ•°åç§°å‘ç”Ÿäº†å˜åŒ–ï¼Œåˆ™ä»¥ element-plus ä¸ºåŸºå‡†åšä¸€ä¸‹è°ƒæ•´ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#123; TimePicker as ElTimePicker &#125; from &apos;element-ui&apos;</span><br><span class="line">import &#123; h &#125; from &apos;@wakeadmin/h&apos;</span><br><span class="line"></span><br><span class="line">import &#123; normalizeDateFormat &#125; from &apos;../../shared/date-format&apos;</span><br><span class="line"></span><br><span class="line">export const TimePicker = &#123;</span><br><span class="line">  functional: true,</span><br><span class="line">  render(_, context) &#123;</span><br><span class="line">    const &#123; format, selectableRange, valueFormat, ...other &#125; = context.props</span><br><span class="line"></span><br><span class="line">    // vue3 pickerOptions æå–åˆ°äº†å…¨å±€</span><br><span class="line">    other.pickerOptions = &#123;</span><br><span class="line">      ...other.pickerOptions,</span><br><span class="line">      format: format &amp;&amp; normalizeDateFormat(format),</span><br><span class="line">      selectableRange,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (valueFormat) &#123;</span><br><span class="line">      other.valueFormat = normalizeDateFormat(valueFormat)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return h(</span><br><span class="line">      ElTimePicker,</span><br><span class="line">      Object.assign(&#123;&#125;, context.data, &#123; props: other, attrs: undefined &#125;),</span><br><span class="line">      context.slots()</span><br><span class="line">    )</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br> </p>
<p>å¦å¤–ï¼Œæˆ‘ä»¬ä¹Ÿä¼šç§»æ¤ä¸€äº› element-plus çš„æ–°ç»„ä»¶ï¼Œæ¯”å¦‚ <code>TreeSelect</code>ã€‚</p>
<p>å¯¹äº icon è¿™ç±»å·®å¼‚æ¯”è¾ƒå¤§ï¼Œæˆ‘ä»¬ç›´æ¥æ”¾å¼ƒäº†ã€‚å¯ä»¥ä½¿ç”¨å¤–éƒ¨å›¾æ ‡åº“æˆ–è€… SVG ç»„ä»¶åº“ï¼ˆå‚è€ƒè¿™ä¸ª<a href="https://github.com/wakeadmin/tools/tree/main/packages/icons" target="_blank" rel="noopener">å®ç°</a>è·¨ç‰ˆæœ¬çš„ SVG å›¾æ ‡åº“ï¼‰ã€‚</p>
<p><br><br><br><br><br> </p>
<h3 id="router-adapter"><a href="#router-adapter" class="headerlink" title="router-adapter"></a>router-adapter</h3><p>æˆ‘ä»¬çš„ç»„ä»¶åº“æ˜¯å¯èƒ½ä¼šæ¶‰åŠåˆ°è·¯ç”±çš„è®¢é˜…å’Œæ“ä½œã€‚å› ä¸º vue-router API å·®å¼‚å¹¶ä¸å¤§ï¼Œå¤„ç†èµ·æ¥ä¼šç®€å•å¾ˆå¤šã€‚</p>
<p>ä¸ç®¡æ˜¯ vue 2 è¿˜æ˜¯ 3ï¼Œvue-router éƒ½ä¼šåœ¨ç»„ä»¶å®ä¾‹ä¸ŠæŒ‚è½½ç›¸å…³çš„ API, æˆ‘ä»¬ç›´æ¥è·å–å°±è¡Œï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">export interface RouteLike &#123;</span><br><span class="line">  query: Record&lt;string, any&gt;</span><br><span class="line">  params: Record&lt;string, any&gt;</span><br><span class="line">  hash: string</span><br><span class="line">  path: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export type RouteLocation =</span><br><span class="line">  | string</span><br><span class="line">  | &#123;</span><br><span class="line">      query?: Record&lt;string, any&gt;</span><br><span class="line">      hash?: string</span><br><span class="line">      path?: string</span><br><span class="line">      name?: string</span><br><span class="line">      params?: Record&lt;string, any&gt;</span><br><span class="line">      replace?: boolean</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">export interface RouterLike &#123;</span><br><span class="line">  push(to: RouteLocation): Promise&lt;any&gt;</span><br><span class="line">  replace(to: RouteLocation): Promise&lt;any&gt;</span><br><span class="line">  back(): void</span><br><span class="line">  forward(): void</span><br><span class="line">  go(delta: number): void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export function useRouter() &#123;</span><br><span class="line">  const instance = getCurrentInstance()</span><br><span class="line"></span><br><span class="line">  if (isVue2) &#123;</span><br><span class="line">    return (instance?.proxy?.$root as &#123; $router: RouterLike &#125; | undefined)?.$router</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    return (instance?.root?.proxy as unknown as &#123; $router: RouterLike &#125;)?.$router</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ... useRoute åŒç†</span><br></pre></td></tr></table></figure>
<p><br> </p>
<p>å…¶ä»–çš„åº“å¯ä»¥é‡‡å–ç±»ä¼¼çš„ç­–ç•¥ã€‚</p>
<p><br><br><br><br><br> </p>
<h3 id="ğŸ‰-å¼€æº-ğŸ‰"><a href="#ğŸ‰-å¼€æº-ğŸ‰" class="headerlink" title="ğŸ‰ å¼€æº ğŸ‰"></a>ğŸ‰ å¼€æº ğŸ‰</h3><p>å€Ÿç€è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ä¹Ÿå°†ç›¸å…³çš„<a href="https://github.com/wakeadmin" target="_blank" rel="noopener">ç¨‹åºå¼€æºäº†</a>! å¸Œæœ›èƒ½å¸®åŠ©åˆ°å¤§å®¶ï¼</p>
<ul>
<li><a href="https://github.com/wakeadmin/tools/tree/main/packages/h" target="_blank" rel="noopener">jsx-runtime å®ç°</a></li>
<li><a href="https://github.com/wakeadmin/components" target="_blank" rel="noopener">ç»„ä»¶åº“å®ç°</a></li>
</ul>
<p>æ¬¢è¿ Fork Star PR</p>
<p><br><br><br><br><br> </p>
<h2 id="æ‰©å±•é˜…è¯»"><a href="#æ‰©å±•é˜…è¯»" class="headerlink" title="æ‰©å±•é˜…è¯»"></a>æ‰©å±•é˜…è¯»</h2><ul>
<li><a href="https://www.notion.so/Vue-2-3-302cbe0e37794345bbfbd89e32d617db?pvs=21" target="_blank" rel="noopener">Vue 2/3 æ¸²æŸ“å‡½æ•°å·®å¼‚ä»¥åŠå…¼å®¹æ–¹æ¡ˆ</a></li>
<li><a href="https://github.com/vuejs/core/pull/7963" target="_blank" rel="noopener">feat(types): <code>defineComponent()</code> with generics support</a></li>
<li><a href="https://cn.vitejs.dev/config/" target="_blank" rel="noopener">vitejs</a></li>
<li><a href="https://github.com/vitejs/vite-plugin-vue" target="_blank" rel="noopener">https://github.com/vitejs/vite-plugin-vue</a></li>
<li><a href="https://github.com/vitejs/vite-plugin-vue2" target="_blank" rel="noopener">https://github.com/vitejs/vite-plugin-vue2</a></li>
<li><a href="https://github.com/vuejs/babel-plugin-jsx" target="_blank" rel="noopener">https://github.com/vuejs/babel-plugin-jsx</a></li>
<li><a href="https://github.com/vuejs/jsx-vue2" target="_blank" rel="noopener">https://github.com/vuejs/jsx-vue2</a></li>
<li><a href="https://github.com/vuejs/language-tools" target="_blank" rel="noopener">https://github.com/vuejs/language-tools</a></li>
<li><a href="https://github.com/vuejs/vue-loader/" target="_blank" rel="noopener">https://github.com/vuejs/vue-loader/</a></li>
</ul>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Blogs</a></li>
         
          <li><a href="http://github.com/ivan-94">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#æ–¹æ¡ˆå†³ç­–"><span class="toc-number">1.</span> <span class="toc-text">æ–¹æ¡ˆå†³ç­–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç­–ç•¥"><span class="toc-number">2.</span> <span class="toc-text">ç­–ç•¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å®ç°"><span class="toc-number">3.</span> <span class="toc-text">å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#api-å…¼å®¹ï¼švue-demi"><span class="toc-number">3.1.</span> <span class="toc-text">API å…¼å®¹ï¼švue demi</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ¸²æŸ“è¯­æ³•ï¼šjsx-runtime-çš„å®ç°"><span class="toc-number">3.2.</span> <span class="toc-text">æ¸²æŸ“è¯­æ³•ï¼šJSX runtime çš„å®ç°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ç»„ä»¶å®šä¹‰ä¸-typescript-æ”¯æŒ"><span class="toc-number">3.3.</span> <span class="toc-text">ç»„ä»¶å®šä¹‰ä¸ Typescript æ”¯æŒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ³›å‹ç»„ä»¶"><span class="toc-number">3.4.</span> <span class="toc-text">æ³›å‹ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#element-adapter"><span class="toc-number">3.5.</span> <span class="toc-text">element-adapter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#router-adapter"><span class="toc-number">3.6.</span> <span class="toc-text">router-adapter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ğŸ‰-å¼€æº-ğŸ‰"><span class="toc-number">3.7.</span> <span class="toc-text">ğŸ‰ å¼€æº ğŸ‰</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ‰©å±•é˜…è¯»"><span class="toc-number">4.</span> <span class="toc-text">æ‰©å±•é˜…è¯»</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://bobi.ink/2023/06/11/component-for-vue2-3/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://bobi.ink/2023/06/11/component-for-vue2-3/&text=å¦‚ä½•å®ç°æ”¯æŒè·¨ Vue 2/3 çš„ç»„ä»¶åº“"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://bobi.ink/2023/06/11/component-for-vue2-3/&title=å¦‚ä½•å®ç°æ”¯æŒè·¨ Vue 2/3 çš„ç»„ä»¶åº“"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://bobi.ink/2023/06/11/component-for-vue2-3/&is_video=false&description=å¦‚ä½•å®ç°æ”¯æŒè·¨ Vue 2/3 çš„ç»„ä»¶åº“"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=å¦‚ä½•å®ç°æ”¯æŒè·¨ Vue 2/3 çš„ç»„ä»¶åº“&body=Check out this article: https://bobi.ink/2023/06/11/component-for-vue2-3/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://bobi.ink/2023/06/11/component-for-vue2-3/&title=å¦‚ä½•å®ç°æ”¯æŒè·¨ Vue 2/3 çš„ç»„ä»¶åº“"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://bobi.ink/2023/06/11/component-for-vue2-3/&title=å¦‚ä½•å®ç°æ”¯æŒè·¨ Vue 2/3 çš„ç»„ä»¶åº“"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://bobi.ink/2023/06/11/component-for-vue2-3/&title=å¦‚ä½•å®ç°æ”¯æŒè·¨ Vue 2/3 çš„ç»„ä»¶åº“"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://bobi.ink/2023/06/11/component-for-vue2-3/&title=å¦‚ä½•å®ç°æ”¯æŒè·¨ Vue 2/3 çš„ç»„ä»¶åº“"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://bobi.ink/2023/06/11/component-for-vue2-3/&name=å¦‚ä½•å®ç°æ”¯æŒè·¨ Vue 2/3 çš„ç»„ä»¶åº“&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2023 Ivan
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Blogs</a></li>
         
          <li><a href="http://github.com/ivan-94">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/lib/meslo-LG/styles.css">
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>


    <!-- Google Analytics -->
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-44571525-2', 'auto');
        ga('send', 'pageview');
    </script>


    <!-- Disqus Comments -->
    <script type="text/javascript">
        var disqus_shortname = 'bobi-ink';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


