<!DOCTYPE html>
<html lang=zh>
<head><meta name="generator" content="Hexo 3.8.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="å†™è¿™ç¯‡æ–‡ç« çš„åŠ¨æœºå¯ä»¥è¿½æº¯åˆ° 3 å¹´å‰ï¼Œ æˆ‘å‘ç°å¾ˆå¤šèº«è¾¹å¼€å‘è€…å¹¶æ²¡æœ‰æ­£ç¡®åœ°ä½¿ç”¨ React Hooks, æ‰€ä»¥æˆ‘è§‰å¾—åº”è¯¥æŠŠæˆ‘çš„å¼€å‘ç»éªŒå’Œæ€ç»´æ•´ç†ä¸‹æ¥ã€‚ å°½ç®¡æœ¬æ–‡ä¸»è¦ä» Vue çš„è§’åº¦å‡ºå‘ï¼Œä½†æ˜¯å¾ˆå¤šæ€ç»´ä¹Ÿå¯ä»¥ç”¨åœ¨ React Hooks ä¸Šã€‚ ä»å¹¿ä¹‰çš„çš„â€œå“åº”å¼ç¼–ç¨‹(Reactive Programing)â€ ä¸Šçœ‹ï¼ŒVueã€Reactã€Rxjs ç­‰æ¡†æ¶éƒ½å±äºè¿™ä¸ªèŒƒç•´ã€‚è€Œç‹­ä¹‰çš„å“åº”å¼ç¼–ç¨‹é€šå¸¸æŒ‡çš„æ˜¯ r">
<meta name="keywords" content="Blog,FrontEnd,React,Javascript,Typescript">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue å¼€å‘çš„æ­£ç¡®å§¿åŠ¿ï¼šå“åº”å¼ç¼–ç¨‹æ€ç»´">
<meta property="og:url" content="https://bobi.ink/2023/07/09/vue-with-rx/index.html">
<meta property="og:site_name" content="Bobi.ink">
<meta property="og:description" content="å†™è¿™ç¯‡æ–‡ç« çš„åŠ¨æœºå¯ä»¥è¿½æº¯åˆ° 3 å¹´å‰ï¼Œ æˆ‘å‘ç°å¾ˆå¤šèº«è¾¹å¼€å‘è€…å¹¶æ²¡æœ‰æ­£ç¡®åœ°ä½¿ç”¨ React Hooks, æ‰€ä»¥æˆ‘è§‰å¾—åº”è¯¥æŠŠæˆ‘çš„å¼€å‘ç»éªŒå’Œæ€ç»´æ•´ç†ä¸‹æ¥ã€‚ å°½ç®¡æœ¬æ–‡ä¸»è¦ä» Vue çš„è§’åº¦å‡ºå‘ï¼Œä½†æ˜¯å¾ˆå¤šæ€ç»´ä¹Ÿå¯ä»¥ç”¨åœ¨ React Hooks ä¸Šã€‚ ä»å¹¿ä¹‰çš„çš„â€œå“åº”å¼ç¼–ç¨‹(Reactive Programing)â€ ä¸Šçœ‹ï¼ŒVueã€Reactã€Rxjs ç­‰æ¡†æ¶éƒ½å±äºè¿™ä¸ªèŒƒç•´ã€‚è€Œç‹­ä¹‰çš„å“åº”å¼ç¼–ç¨‹é€šå¸¸æŒ‡çš„æ˜¯ r">
<meta property="og:locale" content="zh">
<meta property="og:image" content="https://bobi.ink/images/vue-with-rx/Untitled.png">
<meta property="og:image" content="https://bobi.ink/images/vue-with-rx/Untitled%201.png">
<meta property="og:updated_time" content="2023-07-13T02:01:44.044Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Vue å¼€å‘çš„æ­£ç¡®å§¿åŠ¿ï¼šå“åº”å¼ç¼–ç¨‹æ€ç»´">
<meta name="twitter:description" content="å†™è¿™ç¯‡æ–‡ç« çš„åŠ¨æœºå¯ä»¥è¿½æº¯åˆ° 3 å¹´å‰ï¼Œ æˆ‘å‘ç°å¾ˆå¤šèº«è¾¹å¼€å‘è€…å¹¶æ²¡æœ‰æ­£ç¡®åœ°ä½¿ç”¨ React Hooks, æ‰€ä»¥æˆ‘è§‰å¾—åº”è¯¥æŠŠæˆ‘çš„å¼€å‘ç»éªŒå’Œæ€ç»´æ•´ç†ä¸‹æ¥ã€‚ å°½ç®¡æœ¬æ–‡ä¸»è¦ä» Vue çš„è§’åº¦å‡ºå‘ï¼Œä½†æ˜¯å¾ˆå¤šæ€ç»´ä¹Ÿå¯ä»¥ç”¨åœ¨ React Hooks ä¸Šã€‚ ä»å¹¿ä¹‰çš„çš„â€œå“åº”å¼ç¼–ç¨‹(Reactive Programing)â€ ä¸Šçœ‹ï¼ŒVueã€Reactã€Rxjs ç­‰æ¡†æ¶éƒ½å±äºè¿™ä¸ªèŒƒç•´ã€‚è€Œç‹­ä¹‰çš„å“åº”å¼ç¼–ç¨‹é€šå¸¸æŒ‡çš„æ˜¯ r">
<meta name="twitter:image" content="https://bobi.ink/images/vue-with-rx/Untitled.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Vue å¼€å‘çš„æ­£ç¡®å§¿åŠ¿ï¼šå“åº”å¼ç¼–ç¨‹æ€ç»´</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Blogs</a></li>
         
          <li><a href="http://github.com/ivan-94">Projects</a></li>
        
      </ul>
    </span>
    <br>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2023/07/13/microfrontend/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2023/07/02/fe-view-future/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://bobi.ink/2023/07/09/vue-with-rx/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://bobi.ink/2023/07/09/vue-with-rx/&text=Vue å¼€å‘çš„æ­£ç¡®å§¿åŠ¿ï¼šå“åº”å¼ç¼–ç¨‹æ€ç»´"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://bobi.ink/2023/07/09/vue-with-rx/&title=Vue å¼€å‘çš„æ­£ç¡®å§¿åŠ¿ï¼šå“åº”å¼ç¼–ç¨‹æ€ç»´"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://bobi.ink/2023/07/09/vue-with-rx/&is_video=false&description=Vue å¼€å‘çš„æ­£ç¡®å§¿åŠ¿ï¼šå“åº”å¼ç¼–ç¨‹æ€ç»´"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Vue å¼€å‘çš„æ­£ç¡®å§¿åŠ¿ï¼šå“åº”å¼ç¼–ç¨‹æ€ç»´&body=Check out this article: https://bobi.ink/2023/07/09/vue-with-rx/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://bobi.ink/2023/07/09/vue-with-rx/&title=Vue å¼€å‘çš„æ­£ç¡®å§¿åŠ¿ï¼šå“åº”å¼ç¼–ç¨‹æ€ç»´"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://bobi.ink/2023/07/09/vue-with-rx/&title=Vue å¼€å‘çš„æ­£ç¡®å§¿åŠ¿ï¼šå“åº”å¼ç¼–ç¨‹æ€ç»´"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://bobi.ink/2023/07/09/vue-with-rx/&title=Vue å¼€å‘çš„æ­£ç¡®å§¿åŠ¿ï¼šå“åº”å¼ç¼–ç¨‹æ€ç»´"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://bobi.ink/2023/07/09/vue-with-rx/&title=Vue å¼€å‘çš„æ­£ç¡®å§¿åŠ¿ï¼šå“åº”å¼ç¼–ç¨‹æ€ç»´"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://bobi.ink/2023/07/09/vue-with-rx/&name=Vue å¼€å‘çš„æ­£ç¡®å§¿åŠ¿ï¼šå“åº”å¼ç¼–ç¨‹æ€ç»´&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#ç®€è¿°-rxjs"><span class="toc-number">1.</span> <span class="toc-text">ç®€è¿° RxJS</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ä¸ºä»€ä¹ˆå»ºè®®ä½ å»å­¦ä¹ -rxjsï¼Ÿ"><span class="toc-number">2.</span> <span class="toc-text">ä¸ºä»€ä¹ˆå»ºè®®ä½ å»å­¦ä¹  rxjsï¼Ÿ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#rxjs-å’Œ-vue-reactivity-data-æœ‰ä»€ä¹ˆå…³è”ï¼Ÿ"><span class="toc-number">3.</span> <span class="toc-text">RxJS å’Œ Vue Reactivity Data æœ‰ä»€ä¹ˆå…³è”ï¼Ÿ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#çœ‹çœ‹ä½ ä»£ç ä¸­çš„åå‘³é“"><span class="toc-number">4.</span> <span class="toc-text">çœ‹çœ‹ä½ ä»£ç ä¸­çš„åå‘³é“</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#å®è·µ"><span class="toc-number">5.</span> <span class="toc-text">å®è·µ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#åˆ†é¡µ"><span class="toc-number">5.1.</span> <span class="toc-text">åˆ†é¡µ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å®æ—¶æœç´¢"><span class="toc-number">5.2.</span> <span class="toc-text">å®æ—¶æœç´¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å®šæ—¶åˆ·æ–°"><span class="toc-number">5.3.</span> <span class="toc-text">å®šæ—¶åˆ·æ–°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#çœå¸‚åŒºé€‰æ‹©å™¨"><span class="toc-number">5.4.</span> <span class="toc-text">çœå¸‚åŒºé€‰æ‹©å™¨</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#åŸåˆ™å’Œå»ºè®®"><span class="toc-number">6.</span> <span class="toc-text">åŸåˆ™å’Œå»ºè®®</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#æ‰©å±•é˜…è¯»"><span class="toc-number">7.</span> <span class="toc-text">æ‰©å±•é˜…è¯»</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Vue å¼€å‘çš„æ­£ç¡®å§¿åŠ¿ï¼šå“åº”å¼ç¼–ç¨‹æ€ç»´
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Bobi.ink</span>
      </span>
      
    <div class="postdate">
        <time datetime="2023-07-08T16:00:00.000Z" itemprop="datePublished">2023-07-09</time>
    </div>


      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p><img src="/images/vue-with-rx/Untitled.png" alt="Untitled"></p>
<p>å†™è¿™ç¯‡æ–‡ç« çš„åŠ¨æœºå¯ä»¥è¿½æº¯åˆ° 3 å¹´å‰ï¼Œ æˆ‘å‘ç°å¾ˆå¤šèº«è¾¹å¼€å‘è€…å¹¶æ²¡æœ‰æ­£ç¡®åœ°ä½¿ç”¨ React Hooks, æ‰€ä»¥æˆ‘è§‰å¾—åº”è¯¥æŠŠæˆ‘çš„å¼€å‘ç»éªŒå’Œæ€ç»´æ•´ç†ä¸‹æ¥ã€‚</p>
<p>å°½ç®¡æœ¬æ–‡ä¸»è¦ä» Vue çš„è§’åº¦å‡ºå‘ï¼Œä½†æ˜¯å¾ˆå¤šæ€ç»´ä¹Ÿå¯ä»¥ç”¨åœ¨ React Hooks ä¸Šã€‚</p>
<p>ä»å¹¿ä¹‰çš„çš„â€œ<a href="https://en.wikipedia.org/wiki/Reactive_programming" target="_blank" rel="noopener">å“åº”å¼ç¼–ç¨‹(Reactive Programing)</a>â€ ä¸Šçœ‹ï¼ŒVueã€Reactã€Rxjs ç­‰æ¡†æ¶éƒ½å±äºè¿™ä¸ªèŒƒç•´ã€‚è€Œç‹­ä¹‰çš„å“åº”å¼ç¼–ç¨‹é€šå¸¸æŒ‡çš„æ˜¯ rxjs è¿™ç±» â€œé¢å‘æ•°æ®<a href="https://zh.wikipedia.org/wiki/%E4%B8%B2%E6%B5%81" target="_blank" rel="noopener">ä¸²æµ</a>å’Œå˜åŒ–ä¼ æ’­çš„<a href="https://zh.wikipedia.org/wiki/%E5%A3%B0%E6%98%8E%E5%BC%8F%E7%BC%96%E7%A8%8B" target="_blank" rel="noopener">å£°æ˜å¼</a><a href="https://zh.wikipedia.org/wiki/%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F" target="_blank" rel="noopener">ç¼–ç¨‹èŒƒå¼</a>â€</p>
<p>è™½ç„¶ Vue ä¹Ÿæ˜¯â€˜å“åº”å¼ç¼–ç¨‹â€™ï¼Œ ä½†æ˜¯å’Œ RxJS æ˜¯å®Œå…¨ä¸ä¸€æ ·çš„æ¦‚å¿µï¼Œè‡³å°‘RxJS æ˜¯æœ‰èŒƒå¼çº¦æŸçš„ï¼Œä¸ç®¡æ˜¯ç¼–ç ä¸Šè¿˜æ˜¯æ€ç»´ä¸Šé¢ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥æ„Ÿå—åˆ°å®ƒçš„å¼ºåŠ›çº¦æŸï¼Œè¿™å’Œæˆ‘ä»¬æƒ¯ç”¨çš„å‘½ä»¤å¼ç¼–ç¨‹å·®åˆ«å¾ˆå¤§ã€‚è¿™ä¹Ÿå¯¼è‡´äº†å®ƒçš„å­¦ä¹ é—¨æ§›æ¯”è¾ƒé«˜ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¦ç‰µæ‰¯åˆ° RxJS å‘¢ï¼Ÿå› ä¸ºå®ƒçš„æ€ç»´å¯¹æˆ‘ä»¬å†™å¥½ Vue ä»£ç å¾ˆæœ‰å¸®åŠ©ï¼</p>
<p><br><br><br></p>
<h1 id="ç®€è¿°-rxjs"><a href="#ç®€è¿°-rxjs" class="headerlink" title="ç®€è¿° RxJS"></a>ç®€è¿° RxJS</h1><p>å…ˆç¥­ä¸Š<a href="https://zhuanlan.zhihu.com/p/25383159" target="_blank" rel="noopener">å¾é£çš„ä¹°æˆ¿çš„ä¾‹å­</a>ï¼Œæ„Ÿå—ä¸€ä¸‹ RxJS çš„é­…åŠ›ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">//           å·¥èµ„å‘¨æœŸ  â€”â€”â€”&gt;  å·¥èµ„</span></span><br><span class="line"><span class="comment">//                            â†“</span></span><br><span class="line"><span class="comment">// æˆ¿ç§Ÿå‘¨æœŸ  â€”â€”â€”&gt;  ç§Ÿé‡‘  â€”â€”â€”&gt;  æ”¶å…¥  â€”â€”â€”&gt;  ç°é‡‘ </span></span><br><span class="line"><span class="comment">//                â†‘           â†“ </span></span><br><span class="line"><span class="comment">//             æˆ¿å­æ•°é‡ &lt;â€”â€”â€” æ–°è´­æˆ¿</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ£é’±æ˜¯ä¸ºäº†ä¹°æˆ¿ï¼Œä¹°æˆ¿æ˜¯ä¸ºäº†èµšé’±</span></span><br><span class="line"><span class="keyword">const</span> house$ = <span class="keyword">new</span> Subject()</span><br><span class="line"><span class="keyword">const</span> houseCount$ = house$.scan(<span class="function">(<span class="params">acc, num</span>) =&gt;</span> acc + num, <span class="number">0</span>).startWith(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å·¥èµ„å§‹ç»ˆä¸æ¶¨</span></span><br><span class="line"><span class="keyword">const</span> salary$ = Observable.interval(<span class="number">100</span>).mapTo(<span class="number">2</span>)</span><br><span class="line"><span class="keyword">const</span> rent$ = Observable.interval(<span class="number">3000</span>)</span><br><span class="line">  .withLatestFrom(houseCount$)</span><br><span class="line">  .map(<span class="function"><span class="params">arr</span> =&gt;</span> arr[<span class="number">1</span>] * <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸€ä¹°äº†æˆ¿ï¼Œå°±æ²¡ç°é‡‘äº†â€¦â€¦</span></span><br><span class="line"><span class="keyword">const</span> income$ = Observable.merge(salary$, rent$)</span><br><span class="line"><span class="keyword">const</span> cash$ = income$</span><br><span class="line">  .scan(<span class="function">(<span class="params">acc, num</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> newSum = acc + num</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> newHouse = <span class="built_in">Math</span>.floor(newSum / <span class="number">100</span>)</span><br><span class="line">    <span class="keyword">if</span> (newHouse &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      house$.next(newHouse)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> newSum % <span class="number">100</span></span><br><span class="line">  &#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// houseCount$.subscribe(num =&gt; console.log(`houseCount: $&#123;num&#125;`))</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<p>å¦‚æœç”¨å‡ ä¸ªå…³é”®å­—æ¥æè¿° RxJS çš„è¯ï¼Œæˆ‘æƒ³åº”è¯¥æ˜¯ï¼š</p>
<ul>
<li>äº‹ä»¶ï¼šè§‚å¯Ÿè€…æ¨¡å¼</li>
<li>åºåˆ—ï¼šè¿­ä»£å™¨æ¨¡å¼</li>
<li>æµï¼šç®¡é“æ¨¡å¼</li>
</ul>
<p>è¿™å‡ ä¸ªæ¨¡å¼æˆ‘ä»¬åˆ†å¼€å»ç†è§£éƒ½æ²¡å•¥ç‰¹åˆ«ï¼Œæ¯”å¦‚ Vue çš„ reactivity æ•°æ®å°±æ˜¯è§‚å¯Ÿè€…æ¨¡å¼ï¼›JavaScript çš„ forâ€¦of/generator å°±æ˜¯è¿­ä»£å™¨æ¨¡å¼ï¼›æ•°ç»„çš„map/filter/reduce, shell å‘½ä»¤éƒ½ç¬¦åˆç®¡é“æ¨¡å¼ã€‚</p>
<p>RxJS  çš„ç‰›é€¼ä¹‹å¤„å°±æ˜¯æŠŠè¿™ä¸‰ä¸ªæ¨¡å¼ä¼˜é›…åœ°ç»„åˆèµ·æ¥äº†ã€‚å®ƒæŠŠäº‹ä»¶æŠ½è±¡æˆä¸ºç±»ä¼¼â€™æ•°ç»„â€™ä¸€æ ·çš„åºåˆ—ï¼Œç„¶åæä¾›äº†ä¸°å¯Œçš„æ“ä½œç¬¦æ¥å˜æ¢è¿™ä¸ªåºåˆ—ï¼Œå°±åƒæ“ä½œæ•°ç»„ä¸€æ ·è‡ªç„¶ï¼Œæœ€åé€šè¿‡ç®¡é“å°†è¿™äº›æ“ä½œç¬¦ç»„åˆèµ·æ¥å®ç°å¤æ‚çš„åŠŸèƒ½å˜æ¢ã€‚</p>
<p><br><br><br></p>
<h1 id="ä¸ºä»€ä¹ˆå»ºè®®ä½ å»å­¦ä¹ -rxjsï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆå»ºè®®ä½ å»å­¦ä¹ -rxjsï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆå»ºè®®ä½ å»å­¦ä¹  rxjsï¼Ÿ"></a>ä¸ºä»€ä¹ˆå»ºè®®ä½ å»å­¦ä¹  rxjsï¼Ÿ</h1><p>è‡³å°‘å®ƒå¯ä»¥å¸®åŠ©ä½ å†™å¥½ Vue ä»£ç ã€‚å®ƒå¯ä»¥å¸®ä½ å†™å‡ºæ›´ç®€æ´ã€ç»“æ„æ›´æ¸…æ™°ã€ä½è€¦åˆã€æ›´å®¹æ˜“æµ‹è¯•çš„ä»£ç ï¼Œè¿™äº›ä»£ç æ›´èƒ½ä½“ç°åŸæœ¬çš„äº¤äº’é€»è¾‘æˆ–ä¸šåŠ¡æµç¨‹ã€‚</p>
<p>ç›¸ä¿¡æˆ‘ï¼Œå°è¯•æ¢ä¸ªæ€è·¯ï¼Œå¯èƒ½åŸæœ¬å¤æ‚çš„å®ç°ï¼Œä¼šå˜å¾—æ›´åŠ ç®€å•ã€‚</p>
<p><br></p>
<h1 id="rxjs-å’Œ-vue-reactivity-data-æœ‰ä»€ä¹ˆå…³è”ï¼Ÿ"><a href="#rxjs-å’Œ-vue-reactivity-data-æœ‰ä»€ä¹ˆå…³è”ï¼Ÿ" class="headerlink" title="RxJS å’Œ Vue Reactivity Data æœ‰ä»€ä¹ˆå…³è”ï¼Ÿ"></a>RxJS å’Œ Vue Reactivity Data æœ‰ä»€ä¹ˆå…³è”ï¼Ÿ</h1><p>ä¸€äº›å’Œ RxJS ç›¸ä¼¼çš„æ¦‚å¿µ</p>
<ul>
<li><p>å“åº”å¼æ•°æ®ã€‚æˆ‘ä»¬ç”¨ ref æˆ–reactive åˆ›å»ºçš„æ•°æ®ï¼Œå¯ä»¥ç­‰ä¼¼äº RxJS çš„ Observableã€‚åªä¸è¿‡å“åº”å¼æ•°æ®å¹¶ä¸åƒ rxjs æœ‰æ˜¾å¼çš„äº‹ä»¶å‘å¸ƒå’Œè®¢é˜…è¿‡ç¨‹ï¼Œä¹Ÿä¸å­˜åœ¨äº‹ä»¶æµ(åºåˆ—)ã€‚</p>
<p>  <strong>æˆ‘ä»¬å¯ä»¥è®¤ä¸ºVue æ•°æ®çš„æ¯æ¬¡å˜æ›´å°±ç›¸å½“äº RxJS å‘å‡ºæ¯æ¬¡äº‹ä»¶</strong>ã€‚</p>
</li>
<li><p>è¡ç”Ÿæ•°æ®ã€‚æˆ‘ä»¬ä¼šä½¿ç”¨ computed æ¥è¡ç”Ÿæ–°çš„æ•°æ®ï¼Œç­‰ä¼¼äº RxJS ç”¨æ“ä½œç¬¦è¡ç”Ÿå‡ºæ–°çš„ Observableã€‚<strong>å³ Vue æ•°æ®è¡ç”Ÿæ•°æ®ï¼ŒRxJS äº‹ä»¶è¡ç”Ÿäº‹ä»¶</strong></p>
</li>
<li>å‰¯ä½œç”¨ã€‚åœ¨ Vue ä¸­ï¼Œ watch/watcheffects/render ç›¸å½“äº RxJS çš„ subscribeï¼ŒRxJS çš„æ•°æ®æµçš„ç»ˆç‚¹é€šå¸¸ä¹Ÿæ˜¯å‰¯ä½œç”¨å¤„ç†ï¼Œæ¯”å¦‚å°†æ•°æ®æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚</li>
</ul>
<p><br></p>
<p>RxJS çš„å¾ˆå¤šä¸œè¥¿å¹¶ä¸èƒ½ç›´æ¥å¥—ç”¨è¿‡æ¥ï¼Œä½†æ€æƒ³å’ŒåŸåˆ™æ˜¯å¯ä»¥å¤ç”¨çš„ã€‚</p>
<p>å…¶ä¸­ä¸€ä¸ªé‡è¦çš„æ€æƒ³å°±æ˜¯ï¼šç®¡é“å˜æ¢ã€‚è¿™æ˜¯ä¸€ç§æ€ç»´æ–¹å¼çš„è½¬å˜ï¼Œåœ¨ä»¥å¾€çš„ç¼–ç¨‹è®¾è®¡ä¸­ï¼Œæˆ‘ä»¬æ›´å¤šæ“å¿ƒçš„æ˜¯ç±»ã€æ¨¡å—ã€æ•°æ®ç»“æ„å’Œç®—æ³•ã€‚è€Œç®¡é“å˜æ¢æˆ‘ä»¬ä¼šæŠŠç¨‹åºè§†ä½œä»è¾“å…¥åˆ°è¾“å‡ºçš„ä¸€ä¸ªå˜æ¢å»æ„æ€:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># â€œåˆ—å‡ºç›®å½•æ ‘ä¸­æœ€é•¿çš„äº”ä¸ªæ–‡â€</span></span><br><span class="line">find . -<span class="built_in">type</span> f | xargs wc -l | sort -n | tail -5</span><br></pre></td></tr></table></figure>
<p>ä¸è¦æŠŠæ•°æ®çœ‹ä½œæ˜¯éå¸ƒæ•´ä¸ªç³»ç»Ÿçš„å°æ•°æ®æ± ï¼Œè€Œè¦æŠŠæ•°æ®çœ‹ä½œæ˜¯ä¸€æ¡æµ©æµ©è¡è¡çš„æ²³æµã€‚</p>
<p>å¦ä¸€æ–¹é¢ï¼Œç¼–å†™ RxJS ä»£ç ä¸€äº›åŸåˆ™ï¼Œå¯¹æˆ‘ä»¬ç¼–å†™ Vue ä»£ç ä¹Ÿå¤§æœ‰è£¨ç›Šï¼š</p>
<ul>
<li>é¿å…å‰¯ä½œç”¨ã€‚RxJS çš„æ“ä½œç¬¦åº”è¯¥æ˜¯æ²¡æœ‰å‰¯ä½œç”¨çš„å‡½æ•°ï¼Œåªå…³æ³¨è¾“å…¥çš„æ•°æ®ï¼Œç„¶åå¯¹æ•°æ®è¿›è¡Œå˜æ¢ï¼Œä¼ é€’ç»™ä¸‹ä¸€ä¸ªã€‚</li>
<li><p>é¿å…å¤–éƒ¨çŠ¶æ€/ç¼“å­˜çŠ¶æ€ã€‚å¤–éƒ¨çŠ¶æ€ä¹Ÿæ˜¯å‰¯ä½œç”¨çš„ä¸€ç§ï¼Œå•ç‹¬æ‹å‡ºæ¥è®²ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬åœ¨ Vue ä¸­åˆ›å»ºå¤–éƒ¨çŠ¶æ€å¤ªå®¹æ˜“äº†ï¼Œè€Œ RxJS åˆ™ç›¸å¯¹æ¥è¯´éº»çƒ¦ä¸€äº›ï¼Œæ¯•ç«Ÿå¤–éƒ¨çŠ¶æ€å’Œäº‹ä»¶æµæ˜¾å¾—æ ¼æ ¼ä¸å…¥ã€‚</p>
<p>  åœ¨ RxJS ä¸­ç®¡é“æ˜¯è‡ªåŒ…å«çš„ï¼Œ æ‰€æœ‰çš„çŠ¶æ€ä»ä¸€ä¸ªæ“ä½œå™¨æµå‘ä¸‹ä¸€ä¸ªæ“ä½œå™¨ï¼Œè€Œä¸éœ€è¦å¤–éƒ¨å˜é‡ï¼š</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Observable.from([1, 2, 3, 4, 5, 6, 7, 8])</span><br><span class="line">  .filter(val =&gt; val % 2)</span><br><span class="line">  .map(val =&gt; val * 10);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><br><br><br></p>
<h1 id="çœ‹çœ‹ä½ ä»£ç ä¸­çš„åå‘³é“"><a href="#çœ‹çœ‹ä½ ä»£ç ä¸­çš„åå‘³é“" class="headerlink" title="çœ‹çœ‹ä½ ä»£ç ä¸­çš„åå‘³é“"></a>çœ‹çœ‹ä½ ä»£ç ä¸­çš„åå‘³é“</h1><p>çœ‹çœ‹ä½ çš„ Vue ä»£ç æœ‰æ²¡æœ‰è¿™äº›ç°è±¡ï¼Œå¦‚æœå­˜åœ¨è¿™äº›åå‘³é“ï¼Œè¯´æ˜ä½ å¹¶æ²¡æœ‰æ­£ç¡®ä½¿ç”¨ Vue çš„ Reactivity APIã€‚</p>
<ul>
<li>åˆ›å»ºäº†å¤§é‡çš„ç¼“å­˜çŠ¶æ€ã€‚æ¯”å¦‚ sumï¼Œavgï¼Œtempâ€¦</li>
<li>ä½¿ç”¨äº†å¾ˆå¤š <code>watch</code> / <code>watchEffect</code>â€¦</li>
<li>å†—é•¿çš„ <code>setup</code> æ–¹æ³•æˆ–è€…ç»„ä»¶ä»£ç </li>
<li>çŠ¶æ€è¢«éšæ„ä¿®æ”¹ï¼Œä¿®æ”¹ä¸å±äºç®¡è¾–èŒƒå›´å†…çš„çŠ¶æ€</li>
<li>â€¦</li>
</ul>
<p><br><br><br></p>
<h1 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h1><h2 id="åˆ†é¡µ"><a href="#åˆ†é¡µ" class="headerlink" title="åˆ†é¡µ"></a>åˆ†é¡µ</h2><p>å…ˆä»ç®€å•çš„åœºæ™¯å¼€å§‹: åˆ†é¡µè¯·æ±‚ã€‚</p>
<p>âŒ å¸¸è§„çš„åšæ³•ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> query = reactive(&#123;&#125;) <span class="comment">// æŸ¥è¯¢å‚æ•°</span></span><br><span class="line"><span class="keyword">const</span> pagination = reactive(&#123;<span class="attr">pageNo</span>: <span class="number">1</span>, <span class="attr">pageSize</span>: <span class="number">10</span>&#125;)</span><br><span class="line"><span class="keyword">const</span> total = ref(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">const</span> list = ref([])</span><br><span class="line"><span class="keyword">const</span> loading = ref(<span class="literal">false</span>)</span><br><span class="line"><span class="keyword">const</span> error = ref()</span><br><span class="line"></span><br><span class="line">watch([query, pagination], <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    error.value = <span class="literal">undefined</span></span><br><span class="line">    loading.value = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> request(<span class="string">`/something?<span class="subst">$&#123;qs(&#123;...query, ...pagination&#125;</span>)&#125;`</span>)</span><br><span class="line">    total.value = data.total</span><br><span class="line">    list.value = data.list</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err)&#123;</span><br><span class="line">    error.value = err</span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    loading.value = <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;, &#123;<span class="attr">immediate</span>: <span class="literal">true</span>&#125;)</span><br></pre></td></tr></table></figure>
<p>âœ… æ¨èåšæ³•ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> query = reactive(&#123;&#125;) <span class="comment">// æŸ¥è¯¢å‚æ•°</span></span><br><span class="line"><span class="keyword">const</span> pagination = reactive(&#123;<span class="attr">pageNo</span>: <span class="number">1</span>, <span class="attr">pageSize</span>: <span class="number">10</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// data åŒ…å«äº† listã€loadingã€errorã€total ç­‰ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">const</span> data = useRequest(<span class="function"><span class="params">()</span> =&gt;</span> <span class="string">`/something?<span class="subst">$&#123;qs(&#123;...query, ...pagination&#125;</span>)&#125;`</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li><p>è‡ªç„¶åœ°è¡¨è¾¾ query/pagination â†’ data çš„æ•°æ®æµã€‚useRequest æ›´åƒ computed çš„è¯­ä¹‰ï¼Œä»ä¸€ä¸ªæ•°æ®è¡ç”Ÿå‡ºæ–°çš„æ•°æ®ï¼Œä¸ç®¡å®ƒæ˜¯åŒæ­¥çš„è¿˜æ˜¯å¼‚æ­¥çš„ã€‚</p>
<p>  è€Œä½¿ç”¨ watch ä¼šä¸­æ–­æ•°æ®çš„æµåŠ¨ï¼Œå¹¶ä¸”æˆ‘ä»¬éœ€è¦åˆ›å»ºå†—ä½™ç¼“å­˜çŠ¶æ€ï¼Œä»£ç çœ‹èµ·æ¥ä¼šæ¯”è¾ƒæ··ä¹±ã€‚æƒ³è±¡ä¸€ä¸‹å¤æ‚çš„é¡µé¢ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæœ‰å¾ˆå¤šå¤æ‚ã€è”åŠ¨çš„å¼‚æ­¥è¯·æ±‚ï¼Œæƒ…å†µå°±ä¼šæ…¢æ…¢å¤±æ§ã€‚</p>
</li>
<li><p><code>useRequest</code> æ˜¯å•¥ï¼Ÿå®ƒå°è£…äº†ç½‘ç»œè¯·æ±‚ï¼Œ useRequest å¯ä»¥åŸºäº <a href="https://docs-swrv.netlify.app/guide.html" target="_blank" rel="noopener">swrv</a>(swr åœ¨ Vue ä¸‹çš„å®ç°, éå®˜æ–¹)ã€æˆ–è€…VueUse é‡Œé¢çš„ <a href="https://vueuse.org/core/computedAsync/" target="_blank" rel="noopener">computedAsync</a>ã€<a href="https://vueuse.org/core/useFetch/" target="_blank" rel="noopener">useFetch</a> æ¥å°è£…ã€‚</p>
<p>  useRequest ç±»ä¼¼äº RxJS çš„ switchMapï¼Œå½“æ–°çš„å‘èµ·æ–°çš„è¯·æ±‚æ—¶ï¼Œåº”è¯¥å°†æ—§çš„è¯·æ±‚æŠ›å¼ƒã€‚</p>
<p>  ç¬”è€…æ¨èä½¿ç”¨ swr è¿™ç±»åº“å»å¤„ç†ç½‘ç»œè¯·æ±‚ï¼Œç›¸æ¯”ç›´æ¥ç”¨ watch, è¿™ç±»åº“æ”¯æŒæ•°æ®ç¼“å­˜ã€Stale-while-revalidate æ›´æ–°ã€è¿˜æœ‰å¹¶å‘ç«æ€çš„å¤„ç†ç­‰ç­‰ã€‚</p>
</li>
</ul>
<p><br><br><br></p>
<h2 id="å®æ—¶æœç´¢"><a href="#å®æ—¶æœç´¢" class="headerlink" title="å®æ—¶æœç´¢"></a>å®æ—¶æœç´¢</h2><p>ç¬¬äºŒä¸ªä¾‹å­ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œç”¨æˆ·è¾“å…¥æ–‡æœ¬ï¼Œæˆ‘ä»¬debounce å‘èµ·æ•°æ®è¯·æ±‚</p>
<p>âš ï¸ å¸¸è§„çš„å®ç°ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> query = ref(<span class="string">''</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³•ä¸€ï¼šåœ¨äº‹ä»¶å¤„ç†å™¨åŠ  debounce</span></span><br><span class="line"><span class="comment">// å¦‚æœè¿™ä¹ˆå®ç°ï¼ŒåŒå‘ç»‘å®šåˆ°è¡¨å•å¯èƒ½æœ‰å¡é¡¿é—®é¢˜</span></span><br><span class="line"><span class="keyword">const</span> handleQueryChange = debounce(<span class="function">(<span class="params">evt</span>) =&gt;</span> &#123;</span><br><span class="line">  query.value = evt.target.value</span><br><span class="line">&#125;, <span class="number">800</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> data = ref()</span><br><span class="line"></span><br><span class="line">watch(query, <span class="keyword">async</span> (q) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> fetchData(q)</span><br><span class="line">  <span class="comment">// <span class="doctag">FIXME:</span> éœ€è¦å¤„ç†ç«æ€é—®é¢˜</span></span><br><span class="line">  data.value = res</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ---------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³•äºŒï¼Œåœ¨ watch å›è°ƒæˆ–è€… fetchData åŠ ä¸Š debounce</span></span><br><span class="line"><span class="keyword">const</span> handleQueryChange = <span class="function">(<span class="params">evt</span>) =&gt;</span> &#123;</span><br><span class="line">  query.value = evt.target.value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">watch(query, debounce(<span class="keyword">async</span> (q) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> fetchData(q)</span><br><span class="line">  data.value = res</span><br><span class="line">&#125;, <span class="number">800</span>))</span><br></pre></td></tr></table></figure>
<p>RxJS  å®ç°:</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> searchInput$ = fromEvent(searchInput, <span class="string">'input'</span>).pipe(</span><br><span class="line">  <span class="comment">// ä½¿ç”¨ debounceTime è¿›è¡Œé˜²æŠ–å¤„ç†</span></span><br><span class="line">  debounceTime(<span class="number">800</span>),</span><br><span class="line">  <span class="comment">// ä½¿ç”¨ map å°†äº‹ä»¶è½¬æ¢ä¸ºè¾“å…¥æ¡†çš„å€¼</span></span><br><span class="line">  map(<span class="function"><span class="params">event</span> =&gt;</span> event.target.value),</span><br><span class="line">  <span class="comment">// ä½¿ç”¨ distinctUntilChanged è¿›è¡Œå»é‡å¤„ç†</span></span><br><span class="line">  distinctUntilChanged(),</span><br><span class="line">  <span class="comment">// ä½¿ç”¨ switchMap è¿›è¡Œè¯·æ±‚å¹¶è½¬æ¢ä¸ºåˆ—è¡¨æ•°æ®</span></span><br><span class="line">  switchMap(<span class="function"><span class="params">keyword</span> =&gt;</span> <span class="keyword">from</span>(searchList(keyword)))</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä½¿ç”¨ Vue ä¹Ÿå¯ä»¥è¡¨è¾¾ç±»ä¼¼çš„æµç¨‹ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> query = ref(<span class="string">''</span>)</span><br><span class="line"><span class="keyword">const</span> debouncedQuery = refDebounced(input, <span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> data = useRequest(<span class="function"><span class="params">()</span> =&gt;</span> <span class="string">`/something?<span class="subst">$&#123;qs(&#123;query: query.value&#125;</span>)&#125;`</span>)</span><br></pre></td></tr></table></figure>
<p>refDebounce æ¥æºäº VueUseï¼Œå¯ä»¥ â€œDebounceâ€ æŒ‡å®šè¾“å…¥ ref å€¼çš„å˜åŠ¨ã€‚</p>
<p><br><br><br></p>
<h2 id="å®šæ—¶åˆ·æ–°"><a href="#å®šæ—¶åˆ·æ–°" class="headerlink" title="å®šæ—¶åˆ·æ–°"></a>å®šæ—¶åˆ·æ–°</h2><p>å‡è®¾æˆ‘ä»¬è¦åœ¨ä¸Šé¢çš„åˆ†é¡µåŸºç¡€ä¸Šå®ç°å®šæ—¶è½®è¯¢çš„åŠŸèƒ½ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> query = reactive(&#123;&#125;) <span class="comment">// æŸ¥è¯¢å‚æ•°</span></span><br><span class="line"><span class="keyword">const</span> tick = useInterval(<span class="number">5000</span>)</span><br><span class="line"><span class="keyword">const</span> pagination = reactive(&#123;<span class="attr">pageNo</span>: <span class="number">1</span>, <span class="attr">pageSize</span>: <span class="number">10</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// data åŒ…å«äº† listã€loadingã€errorã€total ç­‰ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">const</span> data = useRequest(<span class="function"><span class="params">()</span> =&gt;</span> <span class="string">`/something?<span class="subst">$&#123;qs(&#123;...query, ...pagination, _t: tick.value&#125;</span>)&#125;`</span>)</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬çœ‹åˆ°ä¸Šé¢çš„æµç¨‹å¾ˆè‡ªç„¶ã€‚</p>
<p>ç°åœ¨åŠ å¤§éš¾åº¦ï¼Œå¦‚æœè¦åœ¨ç‰¹å®šæ¡ä»¶ä¸‹ç»ˆæ­¢å‘¢ï¼Ÿ</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> query = reactive(&#123;&#125;) <span class="comment">// æŸ¥è¯¢å‚æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é»˜è®¤å…³é—­</span></span><br><span class="line"><span class="keyword">const</span> &#123;<span class="attr">counter</span>: tick, pause, resume&#125; = useInterval(<span class="number">5000</span>, &#123;<span class="attr">controls</span>: <span class="literal">true</span>, <span class="attr">immediate</span>: <span class="literal">false</span>&#125;)</span><br><span class="line"><span class="keyword">const</span> pagination = reactive(&#123;<span class="attr">pageNo</span>: <span class="number">1</span>, <span class="attr">pageSize</span>: <span class="number">10</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// data åŒ…å«äº† listã€loadingã€errorã€total ç­‰ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">const</span> data = useRequest(<span class="function"><span class="params">()</span> =&gt;</span> <span class="string">`/something?<span class="subst">$&#123;qs(&#123;...query, ...pagination, _t: tick.value&#125;</span>)&#125;`</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜¯å¦è½®è¯¢</span></span><br><span class="line"><span class="keyword">const</span> shouldPoll = computed(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> data.data?.some(<span class="function"><span class="params">i</span> =&gt;</span> i.expired &gt; <span class="built_in">Date</span>.now())</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‰æ¡ä»¶å¼€å¯è½®è®­</span></span><br><span class="line">watch(shoudPoll, (p) =&gt; p ? resume() : pause())</span><br></pre></td></tr></table></figure>
<p>å¦‚æœç”¨ RxJS æ¥å®ç°çš„è¯ï¼Œä»£ç å¤§æ¦‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> interval$ = interval(<span class="number">5000</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> poll$ = interval$.pipe(</span><br><span class="line">  <span class="comment">// æŸ¥è¯¢</span></span><br><span class="line">  switchMap(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">from</span>(fetchData())),</span><br><span class="line">  share()</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> stop$ = poll$.pipe(</span><br><span class="line">  <span class="comment">// ç»ˆæ­¢è½®è¯¢æ¡ä»¶</span></span><br><span class="line">  filter(<span class="function">(<span class="params">i</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> i.every(<span class="function"><span class="params">i</span> =&gt;</span> i.expired &lt;= <span class="built_in">Date</span>.now())</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°† poll$ å’Œ stop$ ç»„åˆåœ¨ä¸€èµ·</span></span><br><span class="line">poll$</span><br><span class="line">  .pipe(</span><br><span class="line">    <span class="comment">// ä½¿ç”¨ takeUntil åœ¨ stop$ å‘é€äº‹ä»¶ååœæ­¢è½®è¯¢</span></span><br><span class="line">    takeUntil(stop$)</span><br><span class="line">  )</span><br><span class="line">  .subscribe(<span class="function">(<span class="params">i</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<p>å› ä¸º RxJS çš„ Observable æ˜¯æƒ°æ€§çš„ï¼Œåªæœ‰è¢« subscribe æ—¶æ‰ä¼šå¼€å§‹æ‰§è¡Œï¼ŒåŒç†åœæ­¢è®¢é˜…å°±ä¼šä¸­æ–­æ‰§è¡Œã€‚</p>
<p>ä¸­æ–­æ‰§è¡Œåï¼Œå¦‚æœè¦é‡æ–°å‘èµ·è¯·æ±‚ï¼Œé‡æ–°è®¢é˜…å°±å¥½äº†ã€‚æœ‰ç‚¹å¼‚æ›²åŒå·¥ä¹‹å¦™å§</p>
<p><br><br><br></p>
<h2 id="çœå¸‚åŒºé€‰æ‹©å™¨"><a href="#çœå¸‚åŒºé€‰æ‹©å™¨" class="headerlink" title="çœå¸‚åŒºé€‰æ‹©å™¨"></a>çœå¸‚åŒºé€‰æ‹©å™¨</h2><p>å†æ¥çœ‹ä¸€ä¸ªç¨å¾®å¤æ‚ä¸€ç‚¹çš„ä¾‹å­ï¼Œå¸¸è§çš„çœå¸‚åŒºé€‰æ‹©å™¨ï¼Œè¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„æ•°æ®è”åŠ¨çš„åœºæ™¯ã€‚</p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªåä¾‹å§ï¼Œæˆ‘ä»¬çš„é€‰æ‹©å™¨éœ€è¦å…ˆé€‰æ‹©å›½å®¶æˆ–åœ°åŒºï¼Œç„¶åæ ¹æ®å®ƒæ¥ç¡®å®šè¡Œæ”¿åŒºåŸŸçš„åˆ’åˆ†ï¼Œæ¥ç€æ¸²æŸ“å„çº§è¡Œæ”¿åŒºåŸŸé€‰æ‹©å™¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">export default defineComponent(&#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    modelValue: &#123;</span><br><span class="line">      type: Array as () =&gt; number[],</span><br><span class="line">      default: () =&gt; [],</span><br><span class="line">    &#125;,</span><br><span class="line">    onChange: &#123;</span><br><span class="line">      type: Function,</span><br><span class="line">      default: () =&gt; &#123;&#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  setup(props, &#123; emit &#125;) &#123;</span><br><span class="line">    const isEchoingData = ref(false);</span><br><span class="line">    const regionList = ref&lt;RegionInfoDTO[][]&gt;([]);</span><br><span class="line">    const regionUrl = ref(&apos;&apos;);</span><br><span class="line">    const queryParams = ref(&#123;&#125; as IQueryParams);</span><br><span class="line"></span><br><span class="line">    const selectedRegion = computed&lt;number[]&gt;(&#123;</span><br><span class="line">      get: () =&gt; props.modelValue,</span><br><span class="line">      set: value =&gt; emit(&apos;update:modelValue&apos;, [...value]),</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    const &#123; data: countryList &#125; = useRequest&lt;CountryInfoDTO&gt;(</span><br><span class="line">      () =&gt; `è¯·æ±‚å›½å®¶åˆ—è¡¨`</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    // è¯·æ±‚åŒºåŸŸåˆ—è¡¨</span><br><span class="line">    const &#123; data: regionItems &#125; = useRequest&lt;RegionInfoDTO&gt;(() =&gt; regionUrl.value);</span><br><span class="line"></span><br><span class="line">    watch(regionItems, () =&gt; &#123;</span><br><span class="line">      regionList.value[queryParams.value.level] = regionItems.value?.data!;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    const countryOptions = computed(() =&gt; &#123;</span><br><span class="line">      return countryList.value?.data.map(i =&gt; &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          label: i.name,</span><br><span class="line">          value: i.id,</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    watch(queryParams, async newValue =&gt; &#123;</span><br><span class="line">      if (!Object.keys(newValue).length) return;</span><br><span class="line"></span><br><span class="line">      const query = `&amp;countryId=$&#123;newValue.level ? &apos;&apos; : newValue.value&#125;&amp;parentId=$&#123;</span><br><span class="line">        newValue.level ? newValue.value : &apos;&apos;</span><br><span class="line">      &#125;&amp;level=$&#123;newValue.level + 1&#125;`;</span><br><span class="line">      regionUrl.value = `åŒºåŸŸè¯·æ±‚è·¯å¾„$&#123;query&#125;`;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    watch(</span><br><span class="line">      props.modelValue,</span><br><span class="line">      async (newValue, oldValue) =&gt; &#123;</span><br><span class="line">        const newLen = newValue.length;</span><br><span class="line">        const oldLen = oldValue?.length ?? 0;</span><br><span class="line"></span><br><span class="line">        if (newLen &amp;&amp; newLen !== oldLen) &#123;</span><br><span class="line">          const index = 0;</span><br><span class="line"></span><br><span class="line">          queryParams.value = &#123; value: newValue[index], level: index &#125;;</span><br><span class="line">          isEchoingData.value = true;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123; immediate: true &#125;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    watch(</span><br><span class="line">      regionList,</span><br><span class="line">      newVal =&gt; &#123;</span><br><span class="line">        const len = newVal.length;</span><br><span class="line">        const selectedLen = selectedRegion.value.length;</span><br><span class="line"></span><br><span class="line">        if (isEchoingData.value &amp;&amp; selectedLen &gt; len) &#123;</span><br><span class="line">          if (len === selectedLen - 1) return (isEchoingData.value = false);</span><br><span class="line"></span><br><span class="line">          queryParams.value = &#123; value: selectedRegion.value[len], level: len &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123; deep: true &#125;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    const onRegionChange = (value: number, level: number) =&gt; &#123;</span><br><span class="line">      selectedRegion.value.splice(level);</span><br><span class="line">      regionList.value.splice(level);</span><br><span class="line">      selectedRegion.value.push(value);</span><br><span class="line"></span><br><span class="line">      const currentRegion = regionList.value[level - 1]?.find(region =&gt; region.id === value);</span><br><span class="line"></span><br><span class="line">      if (!currentRegion?.isLeaf) &#123;</span><br><span class="line">        queryParams.value = &#123; value, level &#125;;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      props.onChange?.([...selectedRegion.value], [...selectedRegionNames.value]);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    const currentRegionPlaceholder = (index: number) =&gt; &#123;</span><br><span class="line">      return `$&#123;selectedCountry.value?.regionLevelInfos[index]?.name ?? &apos;åŒºåŸŸ&apos;&#125;`;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    const selectedCountry = computed(() =&gt; &#123;</span><br><span class="line">      const selectedCountryId = selectedRegion.value[0];</span><br><span class="line">      const selectedCountry = countryList.value?.data.find(country =&gt; country.id === selectedCountryId);</span><br><span class="line"></span><br><span class="line">      return selectedCountry;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    const selectedRegionNames = computed(() =&gt; &#123;</span><br><span class="line">      const names = [];</span><br><span class="line"></span><br><span class="line">      if (selectedCountry.value) &#123;</span><br><span class="line">        names.push(selectedCountry.value.name);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      selectedRegion.value.slice(1).forEach((id, index) =&gt; &#123;</span><br><span class="line">        const region = regionList.value[index]?.find(region =&gt; region.id === id);</span><br><span class="line">        if (region) &#123;</span><br><span class="line">          names.push(region.name);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      return names;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    return () =&gt; (</span><br><span class="line">      &lt;FatSpace&gt;</span><br><span class="line">        &lt;ElSelect</span><br><span class="line">          modelValue=&#123;selectedRegion.value[0]&#125;</span><br><span class="line">          placeholder=&quot;è¯·é€‰æ‹©å›½å®¶&quot;</span><br><span class="line">          onChange=&#123;val =&gt; onRegionChange(val, 0)&#125;</span><br><span class="line">          filterable</span><br><span class="line">        &gt;</span><br><span class="line">          &#123;countryOptions.value?.map(country =&gt; (</span><br><span class="line">            &lt;ElOption key=&#123;country.value&#125; label=&#123;country.label&#125; value=&#123;country.value&#125; /&gt;</span><br><span class="line">          ))&#125;</span><br><span class="line">        &lt;/ElSelect&gt;</span><br><span class="line"></span><br><span class="line">        &#123;regionList.value.map((regions, index) =&gt; (</span><br><span class="line">          &lt;ElSelect</span><br><span class="line">            key=&#123;index&#125;</span><br><span class="line">            modelValue=&#123;selectedRegion.value[index + 1]&#125;</span><br><span class="line">            placeholder=&#123;`è¯·é€‰æ‹©$&#123;currentRegionPlaceholder(index)&#125;`&#125;</span><br><span class="line">            onChange=&#123;val =&gt; onRegionChange(val, index + 1)&#125;</span><br><span class="line">            filterable</span><br><span class="line">          &gt;</span><br><span class="line">            &#123;regions.map(region =&gt; (</span><br><span class="line">              &lt;ElOption key=&#123;region.id&#125; label=&#123;region.name&#125; value=&#123;region.id&#125; /&gt;</span><br><span class="line">            ))&#125;</span><br><span class="line">          &lt;/ElSelect&gt;</span><br><span class="line">        ))&#125;</span><br><span class="line">      &lt;/FatSpace&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå°± 150 è¡Œå·¦å³çš„ä»£ç ï¼Œå®ç°çš„æ˜¯ <code>å›½å®¶-å›½å®¶å„ç§åŒºåŸŸ</code> çš„é€‰æ‹©å™¨ï¼Œæ¯”å¦‚é€‰æ‹©äº†ä¸­å›½å°±ä¼šæœ‰ <code>ä¸­å›½-çœ-å¸‚-åŒº</code> è¿™æ ·çš„åˆ†çº§ã€‚</p>
<p>è¯»è€…ä¹Ÿæ²¡å¿…è¦è¯»æ‡‚è¿™äº›ä»£ç ï¼Œæˆ‘çœ‹åˆ°ä¹Ÿå¤´å¤§ï¼Œä½ åªéœ€è¦è®°ä½ï¼Œè¿™ä¸ªå……æ–¥ç€æˆ‘ä»¬ä¸Šæ–‡æåˆ°çš„å„ç§åå‘³é“ï¼šè¿‡æ¸¡ä¾èµ– watchã€æ•°æ®æµæ··ä¹±â€¦</p>
<p><img src="/images/vue-with-rx/Untitled%201.png" alt="Untitled"></p>
<p>è®©æˆ‘ä»¬å›å½’åˆ°ä¸šåŠ¡æœ¬èº«ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦ä¸æªå®ˆè¿™æ ·çš„è”åŠ¨å…³ç³»å»ç»„ç»‡ä»£ç å‘¢ï¼Ÿ</p>
<p>å¯ä»¥çš„ï¼Œä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„æŠ€å·§å°±æ˜¯è‡ªé¡¶è€Œä¸‹åœ°å»åˆ†ææµç¨‹/æ•°æ®æµå˜æ¢çš„è¿‡ç¨‹ã€‚</p>
<p>é¦–å…ˆä»å›½å®¶å¼€å§‹ï¼Œåªæœ‰ç”¨æˆ·é€‰æ‹©äº†æŒ‡å®šå›½å®¶ä¹‹åï¼Œæˆ‘ä»¬æ‰èƒ½è·å–åˆ°åŒºåŸŸçš„ç»“æ„ä¿¡æ¯(æ˜¯çœ/å¸‚/åŒº, è¿˜æ˜¯å·/åŸå¸‚ï¼Œanyway):</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">export const AreaSelect2 = defineComponent(&#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    // è¡¨å•å€¼æ˜¯æ•°ç»„æ ¼å¼ï¼Œæ¯ä¸€é¡¹ä¿å­˜çš„æ˜¯åŒºåŸŸçš„ id</span><br><span class="line">    modelValue: Array as PropType&lt;number[]&gt;,</span><br><span class="line">  &#125;,</span><br><span class="line">  emits: [&apos;update:modelValue&apos;],</span><br><span class="line">  setup(props, &#123; emit &#125;) &#123;</span><br><span class="line">    // ğŸ”´ è·å–å›½å®¶åˆ—è¡¨</span><br><span class="line">    const country = useCountryList();</span><br><span class="line"></span><br><span class="line">    // ğŸ”´ è®¡ç®—å½“å‰é€‰ä¸­çš„å›½å®¶ï¼Œæˆ‘ä»¬ä»è¿™é‡Œæ‹¿åˆ°è¡Œæ”¿åŒºåŸŸç»“æ„</span><br><span class="line">    const currentCountry = computed(() =&gt; &#123;</span><br><span class="line">      return country.data.value?.data?.find(i =&gt; i.id === props.modelValue?.[0]);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    const handleCountryChange = (value: number) =&gt; &#123;</span><br><span class="line">      if (value !== props.modelValue?.[0]) &#123;</span><br><span class="line">        // ğŸ›‘ å›½å®¶å˜åŠ¨åï¼Œé‡ç½®æ‰åç»­çš„æ•°æ®</span><br><span class="line">        emit(&apos;update:modelValue&apos;, [value]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    return () =&gt; &#123;</span><br><span class="line">      return (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;ElSelect</span><br><span class="line">            modelValue=&#123;props.modelValue?.[0]&#125;</span><br><span class="line">            placeholder=&quot;è¯·é€‰æ‹©å›½å®¶&quot;</span><br><span class="line">            onUpdate:modelValue=&#123;handleCountryChange&#125;</span><br><span class="line">            filterable</span><br><span class="line">            fitInputWidth</span><br><span class="line">            loading=&#123;country.isValidating.value&#125;</span><br><span class="line">          &gt;</span><br><span class="line">            &#123;country.data.value?.data?.map(i =&gt; &#123;</span><br><span class="line">              return &lt;ElOption key=&#123;i.id&#125; label=&#123;i.name&#125; value=&#123;i.id&#125;&gt;&lt;/ElOption&gt;;</span><br><span class="line">            &#125;)&#125;</span><br><span class="line">          &lt;/ElSelect&gt;</span><br><span class="line">          &#123;/* æ­¤å¤„æš‚æ—¶å¿½ç•¥ */&#125;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      );</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>Composition API çš„å¥½å¤„æ˜¯ï¼Œå®ƒè®©ç»„åˆå’Œå°è£…å˜å¾—éå¸¸ä¾¿åˆ©ã€‚å¦‚ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬å°†è·å–å›½å®¶çš„ç›¸å…³é€»è¾‘å°è£…æˆ useCountryListï¼Œä»£ç å˜å¾—æ›´åŠ ç®€æ´æ˜“è¯»ã€‚</li>
<li>é¿å…ä¸­é—´å˜é‡ã€‚æªå®ˆ v-model å•å‘æ•°æ®æµ</li>
</ul>
<p><br></p>
<hr>
<p><br></p>
<p>æ¥ç€æˆ‘ä»¬æ ¹æ®é€‰ä¸­çš„å›½å®¶æ¥æ¸²æŸ“åç»­çš„åŒºåŸŸè”åŠ¨ã€‚</p>
<p>è¿™é‡Œæé†’ä¸€ä¸‹è¯»è€…ï¼šâ€œä¸è¦åå•¬åˆ›å»ºç»„ä»¶â€</p>
<p>æˆ‘åœ¨  <a href="https://juejin.cn/post/6844903844711759880#heading-2" target="_blank" rel="noopener">Reactç»„ä»¶è®¾è®¡å®è·µæ€»ç»“04 - ç»„ä»¶çš„æ€ç»´</a> ä¸­è®²è¿‡ï¼š</p>
<blockquote>
<p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹, ç»„ä»¶è¡¨ç¤ºæ˜¯ä¸€ä¸ª UI å¯¹è±¡. å…¶å®ç»„ä»¶ä¸å•å•å¯ä»¥è¡¨ç¤º UI, ä¹Ÿå¯ä»¥ç”¨æ¥æŠ½è±¡ä¸šåŠ¡å¯¹è±¡, æœ‰æ—¶å€™æŠ½è±¡ä¸ºç»„ä»¶å¯ä»¥å·§å¦™åœ°è§£å†³ä¸€äº›é—®é¢˜</p>
</blockquote>
<p>ç»„ä»¶è¿™ä¸ªè®¾è®¡å®åœ¨å¤ªå¥½ç”¨äº†ï¼Œç¬”è€…è§‰å¾—å®ƒä½“ç°çš„æ›´é‡è¦çš„æ€æƒ³æ˜¯åˆ†æ²»ï¼Œè€Œä¸æ˜¯å¤ç”¨ã€‚ç»„ä»¶ä¸€äº›æ¯”è¾ƒé‡è¦çš„ç‰¹æ€§æ˜¯ï¼š</p>
<ul>
<li>å’Œå‡½æ•°ä¸€æ ·ï¼Œå®ƒæ˜¯ä¸€ä¸ªå°é—­çš„ã€è‡ªåŒ…å«çš„å•å…ƒã€‚çˆ¶ç»„ä»¶ä¸åº”è¯¥æ“å¿ƒå®ƒï¼Œè€Œåº”è¯¥è®©ä»–è‡ªæˆ‘ç»„ç»‡ã€‚</li>
<li>ç»„ä»¶æœ‰çŠ¶æ€ã€‚è¿™ä¸ªæ˜¯å’Œå‡½æ•°ä¸ä¸€æ ·çš„åœ°æ–¹</li>
<li><p>ç»„ä»¶æœ‰ç”Ÿå‘½å‘¨æœŸã€‚è¿™å°±æ„å‘³ç€ç»„ä»¶å¯ä»¥è‡ªå·±ç®¡ç†å’Œé”€æ¯è‡ªå·±çš„èµ„æºï¼Œä¸ä¼šæ³„éœ²å‡ºå»ã€‚</p>
<p>  è¿™æ˜¯ç»„ä»¶å’Œ Hooks æ˜¯æœ‰æœ¬è´¨åŒºåˆ«çš„ï¼æˆ‘ä»¬ä½¿ç”¨ Hooks ä¹Ÿå¯ä»¥å®ç°ä¸€ä¸ªè‡ªæˆ‘ç»„ç»‡çš„ã€å°é—­çš„ã€è‡ªåŒ…å«çš„å•å…ƒï¼Œä½†æ˜¯å®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸æ˜¯å®ƒå†³å®šçš„ï¼Œè€Œæ˜¯ç”±ä½¿ç”¨å®ƒçš„å®¿ä¸»ç»„ä»¶å†³å®šçš„</p>
</li>
</ul>
<blockquote>
<p>å…³äºè¿™å—çš„è¯¦ç»†é˜è¿°å¯ä»¥çœ‹ç¬”è€…çš„<a href="https://juejin.cn/post/6844903844711759880#heading-2" target="_blank" rel="noopener">æ—§æ–‡ç« </a>ã€‚</p>
</blockquote>
<p>æ‰€ä»¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºç»„ä»¶æ¥å°è£…åŒºåŸŸé€‰æ‹©çš„é€»è¾‘ï¼Œå°†å¤æ‚åº¦åˆ†æµå‡ºå»ã€‚æˆ–è€…è¯´é€šè¿‡ props å°†æ•°æ®æµå¾€ä¸‹ä¼ é€’ç»™å­ç»„ä»¶â€¦ </p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">export const AreaSelect2 = defineComponent(&#123;</span><br><span class="line">  // çœç•¥</span><br><span class="line">  setup(props, &#123; emit &#125;) &#123;</span><br><span class="line">    // çœç•¥</span><br><span class="line"></span><br><span class="line">    return () =&gt; &#123;</span><br><span class="line">      return (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;ElSelect</span><br><span class="line">           // çœç•¥</span><br><span class="line">          &gt;</span><br><span class="line">            &#123;country.data.value?.data?.map(i =&gt; &#123;</span><br><span class="line">              return &lt;ElOption key=&#123;i.id&#125; label=&#123;i.name&#125; value=&#123;i.id&#125;&gt;&lt;/ElOption&gt;;</span><br><span class="line">            &#125;)&#125;</span><br><span class="line">          &lt;/ElSelect&gt;</span><br><span class="line">     </span><br><span class="line"><span class="addition">+          &#123;!!currentCountry.value &amp;&amp;</span></span><br><span class="line"><span class="addition">+            currentCountry.value?.regionLevelInfos?.map((i, index) =&gt; &#123;</span></span><br><span class="line"><span class="addition">+              // çˆ¶åŒºåŸŸ id</span></span><br><span class="line"><span class="addition">+              const parentValue = props.modelValue?.[index];</span></span><br><span class="line"><span class="addition">+              // å½“å‰åŒºåŸŸ</span></span><br><span class="line"><span class="addition">+              const value = props.modelValue?.[index + 1];</span></span><br><span class="line"><span class="addition">+              // çˆ¶åŒºåŸŸä¿¡æ¯</span></span><br><span class="line"><span class="addition">+              const parentRegion: RegionLevelDTO =</span></span><br><span class="line"><span class="addition">+                index === 0</span></span><br><span class="line"><span class="addition">+                  ? &#123; code: currentCountry.value?.code!, name: currentCountry.value?.name! &#125;</span></span><br><span class="line"><span class="addition">+                  : currentCountry.value?.regionLevelInfos?.[index - 1]!;</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+              const handleChange = (nextValue: number) =&gt; &#123;</span></span><br><span class="line"><span class="addition">+                if (value === nextValue) &#123;</span></span><br><span class="line"><span class="addition">+                  return;</span></span><br><span class="line"><span class="addition">+                &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+                assert(Array.isArray(props.modelValue), 'modelValue is required');</span></span><br><span class="line"><span class="addition">+                // è£å‰ªæ‰å½“å‰åŒºåŸŸåé¢çš„åŒºåŸŸæ•°æ®</span></span><br><span class="line"><span class="addition">+                const clone = [...props.modelValue].slice(0, index + 2);</span></span><br><span class="line"><span class="addition">+                clone[index + 1] = nextValue;</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+                emit('update:modelValue', clone);</span></span><br><span class="line"><span class="addition">+              &#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+              return (</span></span><br><span class="line"><span class="addition">+                &lt;Section</span></span><br><span class="line"><span class="addition">+                  index=&#123;index&#125;</span></span><br><span class="line"><span class="addition">+                  parentValue=&#123;parentValue&#125;</span></span><br><span class="line"><span class="addition">+                  modelValue=&#123;value&#125;</span></span><br><span class="line"><span class="addition">+                  region=&#123;i&#125;</span></span><br><span class="line"><span class="addition">+                  parentRegion=&#123;parentRegion&#125;</span></span><br><span class="line"><span class="addition">+                  country=&#123;currentCountry.value!&#125;</span></span><br><span class="line"><span class="addition">+                  onUpdate:modelValue=&#123;handleChange&#125;</span></span><br><span class="line"><span class="addition">+                /&gt;</span></span><br><span class="line"><span class="addition">+              );</span></span><br><span class="line"><span class="addition">+            &#125;)&#125;</span></span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      );</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><br></p>
<p>ç»§ç»­åˆ†æµ, çœ‹çœ‹ Section ç»„ä»¶çš„å®ç°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">const Section = defineComponent(&#123;</span><br><span class="line">  name: &apos;AreaSelectSection&apos;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    /**</span><br><span class="line">     * å½“å‰ç´¢å¼•</span><br><span class="line">     */</span><br><span class="line">    index: &#123; type: Number, required: true &#125;,</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * åŒºåŸŸä¿¡æ¯</span><br><span class="line">     */</span><br><span class="line">    region: &#123; type: Object as PropType&lt;RegionLevelDTO&gt;, required: true &#125;,</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å½“å‰å›½å®¶</span><br><span class="line">     */</span><br><span class="line">    country: &#123; type: Object as PropType&lt;CountryInfoDTO&gt;, required: true &#125;,</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * çˆ¶çº§</span><br><span class="line">     */</span><br><span class="line">    parentRegion: &#123; type: Object as PropType&lt;RegionLevelDTO&gt;, required: true &#125;,</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * çˆ¶çº§çš„å€¼</span><br><span class="line">     */</span><br><span class="line">    parentValue: Number,</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å½“å‰å€¼</span><br><span class="line">     */</span><br><span class="line">    modelValue: Number,</span><br><span class="line">  &#125;,</span><br><span class="line">  emits: [&apos;update:modelValue&apos;],</span><br><span class="line">  setup(props, &#123; emit &#125;) &#123;</span><br><span class="line">    // è·å–åŒºåŸŸåˆ—è¡¨</span><br><span class="line">    const region = useRegion(</span><br><span class="line">      computed(() =&gt; &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          countryId: props.country.id,</span><br><span class="line">          level: props.index + 1,</span><br><span class="line">          parentId: props.parentValue,</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    const handleChange = (value: number) =&gt; &#123;</span><br><span class="line">      emit(&apos;update:modelValue&apos;, value);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    return () =&gt; &#123;</span><br><span class="line">      return (</span><br><span class="line">        &lt;ElSelect</span><br><span class="line">          modelValue=&#123;props.modelValue&#125;</span><br><span class="line">          placeholder=&#123;`è¯·é€‰æ‹©$&#123;props.region.name&#125;`&#125;</span><br><span class="line">          filterable</span><br><span class="line">          fitInputWidth</span><br><span class="line">          disabled=&#123;!props.parentValue&#125;</span><br><span class="line">          onUpdate:modelValue=&#123;handleChange&#125;</span><br><span class="line">          loading=&#123;region.isValidating.value&#125;</span><br><span class="line">          class=&#123;s.select&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &#123;region.data.value?.data?.map(i =&gt; &#123;</span><br><span class="line">            return &lt;ElOption key=&#123;i.id&#125; label=&#123;i.name&#125; value=&#123;i.id&#125;&gt;&lt;/ElOption&gt;;</span><br><span class="line">          &#125;)&#125;</span><br><span class="line">        &lt;/ElSelect&gt;</span><br><span class="line">      );</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>å¯è§ï¼ŒSection çš„å®ç°ä¹Ÿå†ç®€å•ä¸è¿‡äº†ã€‚åˆ°è¿™é‡Œï¼Œæˆ‘ç›¸ä¿¡å¾ˆå¤šè¯»è€…å·²ç»æ„Ÿå—åˆ°â€œå“åº”å¼â€ç¼–ç¨‹çš„é­…åŠ›äº†å§</p>
<p><br><br><br><br><br></p>
<h1 id="åŸåˆ™å’Œå»ºè®®"><a href="#åŸåˆ™å’Œå»ºè®®" class="headerlink" title="åŸåˆ™å’Œå»ºè®®"></a>åŸåˆ™å’Œå»ºè®®</h1><ol>
<li>ä¼˜å…ˆä½¿ç”¨ <code>computed</code>ï¼Œè­¦æƒ• <code>watch</code>/<code>watchEffect</code> ç­‰ API çš„ä½¿ç”¨ã€‚è½¬æ¢æ€ç»´å…ˆä»å…‹åˆ¶ä½¿ç”¨ watch å¼€å§‹ã€‚</li>
<li>é€‚å½“ä½¿ç”¨ <code>readonly</code>, ç¦æ­¢çŠ¶æ€è¢«åäººä¿®æ”¹</li>
<li>æœ€å°åŒ–çŠ¶æ€ã€‚é¿å…åˆ›å»ºâ€˜ç¼“å­˜â€™çŠ¶æ€ï¼Œè®©æ•°æ®è‡ªç„¶æµåŠ¨ï¼Œä¸è¦é˜»æ–­ã€‚</li>
<li>è‡ªé¡¶è€Œä¸‹ï¼Œå°†ç»†èŠ‚/å‰¯ä½œç”¨åˆ†æµåˆ° hooks æˆ–å­ç»„ä»¶ä¸­ï¼Œèµ·ä¸€ä¸ªå¥½ä¸€ç‚¹çš„åå­—ï¼Œ è®©æµç¨‹çœ‹èµ·æ¥æ›´æ¸…æ™°</li>
<li>å°† watch è½¬æ¢ä¸º computed çš„è¯­ä¹‰ã€‚å¤–è§‚ä¸Šçš„å·®åˆ«æ˜¯ watch æœ‰ callbackï¼Œ è€Œ computed æ˜¯ã€Œç®¡é“ã€ï¼Œä¼šè¡ç”Ÿæ–°çš„æ•°æ®ã€‚æ¯”å¦‚ä¸Šé¢ useRequest çš„ä¾‹å­</li>
<li>æ¨èä½¿ç”¨ VueUse</li>
<li>å°è£… hooksï¼Œ è®©å„ç§å¤–éƒ¨çš„çŠ¶æ€æˆ–å‰¯ä½œç”¨ä¼˜é›…åœ°é›†æˆè¿›æ¥</li>
<li>å•å‘æ•°æ®æµï¼Œå¯¹è¿™ä¸ªæœ‰ä¸¤å±‚ç†è§£<ul>
<li>è¡¨ç¤ºæ˜¯ä¸€ç§æ•°æ®æµåŠ¨çš„æ–¹å‘ï¼Œé€šå¸¸å’Œ CQRS æ¨¡å¼é…åˆï¼Œæ¯”å¦‚ Reduxã€Vuexï¼Œåªèƒ½å•å‘çš„ä¿®æ”¹å’ŒæŸ¥è¯¢</li>
<li>è¡¨ç¤ºä¸€ç§æ•°æ®ç®¡è¾–çš„èŒƒå›´ã€‚ é€šå¸¸åº”ç”¨åªæœ‰æ•°æ®çš„æ‹¥æœ‰è€…æ‰æœ‰æƒé™å˜æ›´ã€‚è¿›ä¸€æ­¥åœ°è®²ï¼Œæˆ‘ä»¬åº”è¯¥ä»¥ç»„ä»¶ä¸ºè¾¹ç•Œï¼Œæ¥é™å®šæ•°æ®çš„ç®¡è¾–èŒƒå›´ã€‚éœ€è¦å˜æ›´æ—¶ï¼Œé€šè¿‡â€˜äº‹ä»¶â€™ æ¥é€šçŸ¥æ‹¥æœ‰è€…ã€‚æ¯”å¦‚ ä¸¥æ ¼éµå¾ª v-model åè®®ã€‚</li>
</ul>
</li>
<li><p>ä½¿ç”¨å“åº”å¼å¼€å‘æ€ç»´ï¼Œæ„é€ å•å‘çš„æ•°æ®æµ</p>
<ul>
<li>å°½é‡ç®¡é“åŒ–çš„æ–¹å¼å»è®¾è®¡ä½ çš„ç¨‹åº</li>
<li>å£°æ˜å¼ï¼Œä¸è¦å‘½ä»¤å¼</li>
<li>æ‹†åˆ†ç»„ä»¶æˆ–hooksæ¥åˆ†æ²»æ•°æ®æµ</li>
<li>ç»„ä»¶ä¹‹é—´ props ä¼ é€’ä¹Ÿå±äºæ•°æ®æµã€‚</li>
</ul>
<ol start="10">
<li>ä½¿ç”¨ ref/reactive â†’ computed â†’ watch â†’ handler â†’ render è¿™æ ·çš„é¡ºåºç»„ç»‡ä»£ç </li>
</ol>
</li>
</ol>
<p>ğŸŒ¹æœ¬æ–‡å®Œï¼Œä½ çš„ç‚¹èµæ˜¯æˆ‘å†™ä½œçš„æœ€å¤§åŠ¨åŠ›ï¼Œæ¬¢è¿ç•™è¨€è½¬å‘ï¼ˆå¤‡æ³¨åŸæ–‡ä½œè€…å’Œé“¾æ¥ï¼‰ã€‚</p>
<p><br><br><br></p>
<h1 id="æ‰©å±•é˜…è¯»"><a href="#æ‰©å±•é˜…è¯»" class="headerlink" title="æ‰©å±•é˜…è¯»"></a>æ‰©å±•é˜…è¯»</h1><ul>
<li><a href="https://juejin.cn/post/6844903844711759880#heading-4" target="_blank" rel="noopener">Reactç»„ä»¶è®¾è®¡å®è·µæ€»ç»“04 - ç»„ä»¶çš„æ€ç»´</a></li>
<li><a href="https://rxjs.dev/" target="_blank" rel="noopener">RxJS</a></li>
<li><a href="https://dev.to/lloyds-digital/comparing-reactivity-models-react-vs-vue-vs-svelte-vs-mobx-vs-solid-29m8" target="_blank" rel="noopener">Comparing reactivity models - React vs Vue vs Svelte vs MobX vs Solid vs Redux</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/25383159" target="_blank" rel="noopener">RxJS å…¥é—¨æŒ‡å¼•å’Œåˆæ­¥åº”ç”¨</a></li>
</ul>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Blogs</a></li>
         
          <li><a href="http://github.com/ivan-94">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#ç®€è¿°-rxjs"><span class="toc-number">1.</span> <span class="toc-text">ç®€è¿° RxJS</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ä¸ºä»€ä¹ˆå»ºè®®ä½ å»å­¦ä¹ -rxjsï¼Ÿ"><span class="toc-number">2.</span> <span class="toc-text">ä¸ºä»€ä¹ˆå»ºè®®ä½ å»å­¦ä¹  rxjsï¼Ÿ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#rxjs-å’Œ-vue-reactivity-data-æœ‰ä»€ä¹ˆå…³è”ï¼Ÿ"><span class="toc-number">3.</span> <span class="toc-text">RxJS å’Œ Vue Reactivity Data æœ‰ä»€ä¹ˆå…³è”ï¼Ÿ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#çœ‹çœ‹ä½ ä»£ç ä¸­çš„åå‘³é“"><span class="toc-number">4.</span> <span class="toc-text">çœ‹çœ‹ä½ ä»£ç ä¸­çš„åå‘³é“</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#å®è·µ"><span class="toc-number">5.</span> <span class="toc-text">å®è·µ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#åˆ†é¡µ"><span class="toc-number">5.1.</span> <span class="toc-text">åˆ†é¡µ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å®æ—¶æœç´¢"><span class="toc-number">5.2.</span> <span class="toc-text">å®æ—¶æœç´¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å®šæ—¶åˆ·æ–°"><span class="toc-number">5.3.</span> <span class="toc-text">å®šæ—¶åˆ·æ–°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#çœå¸‚åŒºé€‰æ‹©å™¨"><span class="toc-number">5.4.</span> <span class="toc-text">çœå¸‚åŒºé€‰æ‹©å™¨</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#åŸåˆ™å’Œå»ºè®®"><span class="toc-number">6.</span> <span class="toc-text">åŸåˆ™å’Œå»ºè®®</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#æ‰©å±•é˜…è¯»"><span class="toc-number">7.</span> <span class="toc-text">æ‰©å±•é˜…è¯»</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://bobi.ink/2023/07/09/vue-with-rx/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://bobi.ink/2023/07/09/vue-with-rx/&text=Vue å¼€å‘çš„æ­£ç¡®å§¿åŠ¿ï¼šå“åº”å¼ç¼–ç¨‹æ€ç»´"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://bobi.ink/2023/07/09/vue-with-rx/&title=Vue å¼€å‘çš„æ­£ç¡®å§¿åŠ¿ï¼šå“åº”å¼ç¼–ç¨‹æ€ç»´"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://bobi.ink/2023/07/09/vue-with-rx/&is_video=false&description=Vue å¼€å‘çš„æ­£ç¡®å§¿åŠ¿ï¼šå“åº”å¼ç¼–ç¨‹æ€ç»´"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Vue å¼€å‘çš„æ­£ç¡®å§¿åŠ¿ï¼šå“åº”å¼ç¼–ç¨‹æ€ç»´&body=Check out this article: https://bobi.ink/2023/07/09/vue-with-rx/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://bobi.ink/2023/07/09/vue-with-rx/&title=Vue å¼€å‘çš„æ­£ç¡®å§¿åŠ¿ï¼šå“åº”å¼ç¼–ç¨‹æ€ç»´"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://bobi.ink/2023/07/09/vue-with-rx/&title=Vue å¼€å‘çš„æ­£ç¡®å§¿åŠ¿ï¼šå“åº”å¼ç¼–ç¨‹æ€ç»´"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://bobi.ink/2023/07/09/vue-with-rx/&title=Vue å¼€å‘çš„æ­£ç¡®å§¿åŠ¿ï¼šå“åº”å¼ç¼–ç¨‹æ€ç»´"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://bobi.ink/2023/07/09/vue-with-rx/&title=Vue å¼€å‘çš„æ­£ç¡®å§¿åŠ¿ï¼šå“åº”å¼ç¼–ç¨‹æ€ç»´"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://bobi.ink/2023/07/09/vue-with-rx/&name=Vue å¼€å‘çš„æ­£ç¡®å§¿åŠ¿ï¼šå“åº”å¼ç¼–ç¨‹æ€ç»´&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2023 Ivan
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Blogs</a></li>
         
          <li><a href="http://github.com/ivan-94">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/lib/meslo-LG/styles.css">
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>


    <!-- Google Analytics -->
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-44571525-2', 'auto');
        ga('send', 'pageview');
    </script>


    <!-- Disqus Comments -->
    <script type="text/javascript">
        var disqus_shortname = 'bobi-ink';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


