<!DOCTYPE html>
<html lang=zh>
<head><meta name="generator" content="Hexo 3.8.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="ä½¿ç”¨ Yarn(v1.12+)çš„ Plugâ€™nâ€™Play æœºåˆ¶æ¥å–ä»£ node_modules. ç›®å‰è¿™è¿˜æ˜¯ä¸€ä¸ªå®éªŒæ€§çš„ç‰¹æ€§. èƒŒæ™¯ node_modulesæ—©å°±æˆä¸ºçš„å…¨æ°‘åæ§½çš„å¯¹è±¡, å…¶ä»–è¯­è¨€çš„å¼€å‘è€…çœ‹åˆ° node_modules å¯¹ Node å°±æœ›è€Œç¥›æ­¥äº†,ç”¨ä¸€ä¸ªå­—æ¥å½¢å®¹çš„è¯å°±æ˜¯â€™é‡!â€™.  å¦‚æœä¸äº†è§£ Node æ¨¡å—æŸ¥æ‰¾æœºåˆ¶, è¯·ç‚¹å‡»require() æºç è§£è¯»  ä¸€ä¸ªç®€å•çš„å‰ç«¯é¡¹ç›®(cre">
<meta name="keywords" content="Blog,FrontEnd,React,Javascript,Typescript">
<meta property="og:type" content="article">
<meta property="og:title" content="Yarn Plug&#39;n&#39;Playå¯å¦åŠ©ä½ è„±ç¦»node_modulesè‹¦æµ·?">
<meta property="og:url" content="https://bobi.ink/2019/04/08/plug-n-play/index.html">
<meta property="og:site_name" content="Bobi.ink">
<meta property="og:description" content="ä½¿ç”¨ Yarn(v1.12+)çš„ Plugâ€™nâ€™Play æœºåˆ¶æ¥å–ä»£ node_modules. ç›®å‰è¿™è¿˜æ˜¯ä¸€ä¸ªå®éªŒæ€§çš„ç‰¹æ€§. èƒŒæ™¯ node_modulesæ—©å°±æˆä¸ºçš„å…¨æ°‘åæ§½çš„å¯¹è±¡, å…¶ä»–è¯­è¨€çš„å¼€å‘è€…çœ‹åˆ° node_modules å¯¹ Node å°±æœ›è€Œç¥›æ­¥äº†,ç”¨ä¸€ä¸ªå­—æ¥å½¢å®¹çš„è¯å°±æ˜¯â€™é‡!â€™.  å¦‚æœä¸äº†è§£ Node æ¨¡å—æŸ¥æ‰¾æœºåˆ¶, è¯·ç‚¹å‡»require() æºç è§£è¯»  ä¸€ä¸ªç®€å•çš„å‰ç«¯é¡¹ç›®(cre">
<meta property="og:locale" content="zh">
<meta property="og:image" content="https://bobi.ink/images/node_modules-hole.png">
<meta property="og:image" content="https://bobi.ink/images/front-end-project.png">
<meta property="og:image" content="https://bobi.ink/images/mac-library.png">
<meta property="og:updated_time" content="2023-06-01T09:55:14.329Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Yarn Plug&#39;n&#39;Playå¯å¦åŠ©ä½ è„±ç¦»node_modulesè‹¦æµ·?">
<meta name="twitter:description" content="ä½¿ç”¨ Yarn(v1.12+)çš„ Plugâ€™nâ€™Play æœºåˆ¶æ¥å–ä»£ node_modules. ç›®å‰è¿™è¿˜æ˜¯ä¸€ä¸ªå®éªŒæ€§çš„ç‰¹æ€§. èƒŒæ™¯ node_modulesæ—©å°±æˆä¸ºçš„å…¨æ°‘åæ§½çš„å¯¹è±¡, å…¶ä»–è¯­è¨€çš„å¼€å‘è€…çœ‹åˆ° node_modules å¯¹ Node å°±æœ›è€Œç¥›æ­¥äº†,ç”¨ä¸€ä¸ªå­—æ¥å½¢å®¹çš„è¯å°±æ˜¯â€™é‡!â€™.  å¦‚æœä¸äº†è§£ Node æ¨¡å—æŸ¥æ‰¾æœºåˆ¶, è¯·ç‚¹å‡»require() æºç è§£è¯»  ä¸€ä¸ªç®€å•çš„å‰ç«¯é¡¹ç›®(cre">
<meta name="twitter:image" content="https://bobi.ink/images/node_modules-hole.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Yarn Plug&#39;n&#39;Playå¯å¦åŠ©ä½ è„±ç¦»node_modulesè‹¦æµ·?</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Blogs</a></li>
         
          <li><a href="http://github.com/ivan-94">Projects</a></li>
        
      </ul>
    </span>
    <br>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2019/04/19/rxjs-by-example/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2019/04/06/rx-operations/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://bobi.ink/2019/04/08/plug-n-play/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://bobi.ink/2019/04/08/plug-n-play/&text=Yarn Plug&#39;n&#39;Playå¯å¦åŠ©ä½ è„±ç¦»node_modulesè‹¦æµ·?"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://bobi.ink/2019/04/08/plug-n-play/&title=Yarn Plug&#39;n&#39;Playå¯å¦åŠ©ä½ è„±ç¦»node_modulesè‹¦æµ·?"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://bobi.ink/2019/04/08/plug-n-play/&is_video=false&description=Yarn Plug&#39;n&#39;Playå¯å¦åŠ©ä½ è„±ç¦»node_modulesè‹¦æµ·?"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Yarn Plug&#39;n&#39;Playå¯å¦åŠ©ä½ è„±ç¦»node_modulesè‹¦æµ·?&body=Check out this article: https://bobi.ink/2019/04/08/plug-n-play/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://bobi.ink/2019/04/08/plug-n-play/&title=Yarn Plug&#39;n&#39;Playå¯å¦åŠ©ä½ è„±ç¦»node_modulesè‹¦æµ·?"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://bobi.ink/2019/04/08/plug-n-play/&title=Yarn Plug&#39;n&#39;Playå¯å¦åŠ©ä½ è„±ç¦»node_modulesè‹¦æµ·?"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://bobi.ink/2019/04/08/plug-n-play/&title=Yarn Plug&#39;n&#39;Playå¯å¦åŠ©ä½ è„±ç¦»node_modulesè‹¦æµ·?"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://bobi.ink/2019/04/08/plug-n-play/&title=Yarn Plug&#39;n&#39;Playå¯å¦åŠ©ä½ è„±ç¦»node_modulesè‹¦æµ·?"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://bobi.ink/2019/04/08/plug-n-play/&name=Yarn Plug&#39;n&#39;Playå¯å¦åŠ©ä½ è„±ç¦»node_modulesè‹¦æµ·?&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#èƒŒæ™¯"><span class="toc-number">1.</span> <span class="toc-text">èƒŒæ™¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#åŸºæœ¬åŸç†"><span class="toc-number">2.</span> <span class="toc-text">åŸºæœ¬åŸç†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å¼€å¯-pnp"><span class="toc-number">3.</span> <span class="toc-text">å¼€å¯ pnp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ€ä¹ˆé›†æˆåˆ°ç°æœ‰é¡¹ç›®"><span class="toc-number">4.</span> <span class="toc-text">æ€ä¹ˆé›†æˆåˆ°ç°æœ‰é¡¹ç›®?</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#node"><span class="toc-number">4.1.</span> <span class="toc-text">Node</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#webpack"><span class="toc-number">4.2.</span> <span class="toc-text">Webpack</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jest"><span class="toc-number">4.3.</span> <span class="toc-text">jest</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#typescript"><span class="toc-number">4.4.</span> <span class="toc-text">Typescript</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å…¶ä»–å·¥å…·"><span class="toc-number">4.5.</span> <span class="toc-text">å…¶ä»–å·¥å…·</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ€»ç»“"><span class="toc-number">5.</span> <span class="toc-text">æ€»ç»“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å‚è€ƒ"><span class="toc-number">6.</span> <span class="toc-text">å‚è€ƒ</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Yarn Plug&#39;n&#39;Playå¯å¦åŠ©ä½ è„±ç¦»node_modulesè‹¦æµ·?
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Bobi.ink</span>
      </span>
      
    <div class="postdate">
        <time datetime="2019-04-07T16:00:00.000Z" itemprop="datePublished">2019-04-08</time>
    </div>


      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>ä½¿ç”¨ Yarn(v1.12+)çš„ Plugâ€™nâ€™Play æœºåˆ¶æ¥å–ä»£ node_modules. ç›®å‰è¿™è¿˜æ˜¯ä¸€ä¸ªå®éªŒæ€§çš„ç‰¹æ€§.</p>
<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p><img src="/images/node_modules-hole.png" alt="node_modules"></p>
<p><code>node_modules</code>æ—©å°±æˆä¸ºçš„å…¨æ°‘åæ§½çš„å¯¹è±¡, å…¶ä»–è¯­è¨€çš„å¼€å‘è€…çœ‹åˆ° node_modules å¯¹ Node å°±æœ›è€Œç¥›æ­¥äº†,<br>ç”¨ä¸€ä¸ªå­—æ¥å½¢å®¹çš„è¯å°±æ˜¯â€™é‡!â€™.</p>
<blockquote>
<p>å¦‚æœä¸äº†è§£ Node æ¨¡å—æŸ¥æ‰¾æœºåˆ¶, è¯·ç‚¹å‡»<a href="http://www.ruanyifeng.com/blog/2015/05/require.html" target="_blank" rel="noopener">require() æºç è§£è¯»</a></p>
</blockquote>
<p>ä¸€ä¸ªç®€å•çš„å‰ç«¯é¡¹ç›®(<em>create-react-app</em>)çš„å¤§å°å’Œæ–‡ä»¶æ•°:</p>
<center><br>  <img src="/images/front-end-project.png" alt="frontend-project" width="400"><br></center>

<p>è€Œ macOS çš„<code>/Library</code>ç›®å½•çš„å¤§å°çš„æ–‡ä»¶æ•°:</p>
<center><br>  <img src="/images/mac-library.png" alt="macos library" width="400"><br></center>

<p>ä¸€è¡Œ<code>hello world</code>å°±éœ€è¦å®‰è£… 130MB ä»¥ä¸Šçš„ä¾èµ–æ¨¡å—, è€Œä¸”æ–‡ä»¶æ•°æ˜¯<strong>32,313</strong>. ç›¸æ¯”ä¹‹ä¸‹ macOS çš„<code>/Library</code><br>çš„ç©ºé—´å ç”¨ 9.02GB, æ–‡ä»¶æ•°åªæ˜¯å‰è€…çš„ä¸¤å€(<strong>67,890</strong>). ç»¼ä¸Šå¯ä»¥çœ‹å‡º node_modules çš„ç‰¹ç‚¹æ˜¯:</p>
<ul>
<li>ç›®å½•æ ‘ç»“æ„å¤æ‚</li>
<li>æ–‡ä»¶æ•°è¾ƒå¤šä¸”éƒ½æ¯”è¾ƒå°</li>
<li>ä¾èµ–å¤š, ä¸€ä¸ªç®€å•çš„é¡¹ç›®å°±è¦å®‰è£…å¥½å‡ å¨ä¾èµ–</li>
</ul>
<p>æ‰€ä»¥è¯´ node_modules å¯¹äºæœºæ¢°ç¡¬ç›˜æ¥è¯´æ˜¯ä¸ªå™©æ¢¦, è®°å¾—æœ‰ä¸€æ¬¡ä¸€ä¸ªåŒäº‹åˆ é™¤ node_modules ä¸€ä¸ªä¸‹åˆéƒ½æ²¡æå®š.<br>å¯¹äºå‰ç«¯å¼€å‘è€…æ¥è¯´, æˆ‘ä»¬æœ‰ N ä¸ªéœ€è¦<code>npm install</code>çš„é¡¹ç›® ğŸ˜¹.</p>
<p>é™¤æ­¤ä¹‹å¤–, Node çš„æ¨¡å—æœºåˆ¶è¿˜æœ‰ä»¥ä¸‹<strong>ç¼ºç‚¹</strong>:</p>
<ul>
<li><p>Node æœ¬èº«å¹¶æ²¡æœ‰æ¨¡å—çš„æ¦‚å¿µ, å®ƒåœ¨è¿è¡Œæ—¶è¿›è¡ŒæŸ¥æ‰¾å’ŒåŠ è½½. è¿™ä¸ªç¼ºç‚¹å’Œ<em>â€˜åŠ¨æ€è¯­è¨€ä¸é™æ€è¯­è¨€çš„ä¼˜åŠ£å¯¹æ¯”â€™</em>ç›¸ä¼¼,<br>ä½ å¯èƒ½åœ¨å¼€å‘ç¯å¢ƒè¿è¡Œå¾—å¥½å¥½çš„, å¯èƒ½åˆ°äº†çº¿ä¸Šå°±è¿è¡Œä¸äº†äº†, åŸå› æ˜¯ä¸€ä¸ªæ¨¡å—æ²¡æœ‰æ·»åŠ åˆ° package.json</p>
</li>
<li><p>Node æ¨¡å—çš„æŸ¥æ‰¾ç­–ç•¥éå¸¸æµªè´¹. è¿™ä¸ªç¼ºç‚¹åœ¨å¤§éƒ¨åˆ†å‰ç«¯é¡¹ç›®ä¸­å¯ä»¥è¿›è¡Œä¼˜åŒ–,<br>æ¯”å¦‚ webpack å°±å¯ä»¥é™å®šåªåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ node_modules ä¸­æŸ¥æ‰¾, ä½†æ˜¯å¯¹äºåµŒå¥—çš„ä¾èµ–, ä¾ç„¶éœ€è¦ 2 æ¬¡ä»¥ä¸Šçš„æŸ¥æ‰¾</p>
</li>
<li><p>node_modules ä¸èƒ½æœ‰æ•ˆåœ°å¤„ç†é‡å¤çš„åŒ…. ä¸¤ä¸ªåç§°ç›¸åŒä½†æ˜¯ä¸åŒç‰ˆæœ¬çš„åŒ…æ˜¯ä¸èƒ½åœ¨ä¸€ä¸ªç›®å½•ä¸‹å…±å­˜çš„.<br>æ‰€ä»¥ä¼šå¯¼è‡´åµŒå¥—çš„ node_modules, è€Œä¸”è¿™äº›é¡¹ç›®â€™ä¾èµ–çš„ä¾èµ–â€™æ˜¯æ— æ³•å’Œé¡¹ç›®æˆ–å…¶ä»–ä¾èµ–å…±äº«çš„:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span> â‘  å‡è®¾é¡¹ç›®ä¾èµ–a,b,cä¸‰ä¸ªæ¨¡å—, ä¾èµ–æ ‘ä¸º:</span><br><span class="line"><span class="meta">#</span>  +- a</span><br><span class="line"><span class="meta">#</span>    +- react@15</span><br><span class="line"><span class="meta">#</span>  +- b</span><br><span class="line"><span class="meta">#</span>    +- react@16</span><br><span class="line"><span class="meta">#</span>  +- c</span><br><span class="line"><span class="meta">#</span>    +- react@16</span><br><span class="line"><span class="meta">#</span> yarnå®‰è£…æ—¶ä¼šæŒ‰ç…§é¡¹ç›®è¢«ä¾èµ–çš„æ¬¡æ•°ä½œä¸ºæƒé‡, å°†ä¾èµ–æå‡(hoisting),</span><br><span class="line"><span class="meta">#</span> å®‰è£…åçš„node_modulesç»“æ„ä¸º:</span><br><span class="line">  .</span><br><span class="line">  â””â”€â”€ node_modules</span><br><span class="line">   Â Â  â”œâ”€â”€ a</span><br><span class="line">   Â Â  â”‚Â Â  â”œâ”€â”€ index.js</span><br><span class="line">   Â Â  â”‚Â Â  â”œâ”€â”€ node_modules</span><br><span class="line">   Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ react  # @15</span><br><span class="line">   Â Â  â”‚Â Â  â””â”€â”€ package.json</span><br><span class="line">   Â Â  â”œâ”€â”€ b</span><br><span class="line">   Â Â  â”‚Â Â  â”œâ”€â”€ index.js</span><br><span class="line">   Â Â  â”‚Â Â  â””â”€â”€ package.json</span><br><span class="line">   Â Â  â”œâ”€â”€ c</span><br><span class="line">   Â Â  â”‚Â Â  â”œâ”€â”€ index.js</span><br><span class="line">   Â Â  â”‚Â Â  â””â”€â”€ package.json</span><br><span class="line">   Â Â  â””â”€â”€ react  # @16 è¢«ä¾èµ–äº†ä¸¤æ¬¡, æ‰€ä»¥è¿›è¡Œæå‡</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> â‘¡ ç°åœ¨å‡è®¾åœ¨â‘ çš„åŸºç¡€ä¸Š, æ ¹é¡¹ç›®ä¾èµ–äº†react@15, å¯¹äºé¡¹ç›®è‡ªå·±çš„ä¾èµ–è‚¯å®šæ˜¯è¦æ”¾åœ¨node_modulesæ ¹ç›®å½•çš„,</span><br><span class="line"><span class="meta">#</span> ç”±äºä¸€ä¸ªç›®å½•ä¸‹ä¸èƒ½å­˜åœ¨åŒåç›®å½•, æ‰€ä»¥react@16æ²¡æœ‰çš„æå‡æœºä¼š. </span><br><span class="line"><span class="meta">#</span> å®‰è£…ånode_moduelsç»“æ„ä¸º</span><br><span class="line">  .</span><br><span class="line">  â””â”€â”€ node_modules</span><br><span class="line">   Â Â  â”œâ”€â”€ a</span><br><span class="line">   Â Â  â”‚Â Â  â”œâ”€â”€ index.js</span><br><span class="line">   Â Â  â”‚Â Â  â””â”€â”€ package.json # react@15 æå‡</span><br><span class="line">   Â Â  â”œâ”€â”€ b</span><br><span class="line">   Â Â  â”‚Â Â  â”œâ”€â”€ index.js</span><br><span class="line">   Â Â  â”‚Â Â  â”œâ”€â”€ node_modules</span><br><span class="line">   Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ react  # @16</span><br><span class="line">   Â Â  â”‚Â Â  â””â”€â”€ package.json</span><br><span class="line">   Â Â  â”œâ”€â”€ c</span><br><span class="line">   Â Â  â”‚Â Â  â”œâ”€â”€ index.js</span><br><span class="line">   Â Â  â”‚Â Â  â”œâ”€â”€ node_modules</span><br><span class="line">   Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ react  # @16</span><br><span class="line">   Â Â  â”‚Â Â  â””â”€â”€ package.json</span><br><span class="line">   Â Â  â””â”€â”€ react  # @15</span><br><span class="line"><span class="meta">#</span> ä¸Šé¢çš„ç»“æœå¯ä»¥çœ‹å‡º, react@16å‡ºç°äº†é‡å¤</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>ä¸ºæ­¤ Yarn é›†æˆäº†<code>Plug&#39;n&#39;Play</code>(ç®€ç§° pnp), ä¸­æ–‡åç§°å¯ä»¥ç§°ä¸ºâ€™å³æ’å³ç”¨â€™, æ¥è§£å†³ node_modulesâ€™åœ°ç‹±â€™.</p>
<h2 id="åŸºæœ¬åŸç†"><a href="#åŸºæœ¬åŸç†" class="headerlink" title="åŸºæœ¬åŸç†"></a>åŸºæœ¬åŸç†</h2><p>æŒ‰ç…§æ™®é€šçš„æŒ‰ç…§æµç¨‹, Yarn ä¼šç”Ÿæˆä¸€ä¸ª node_modules ç›®å½•, ç„¶å Node æŒ‰ç…§å®ƒçš„æ¨¡å—æŸ¥æ‰¾è§„åˆ™åœ¨ node_modules ç›®å½•ä¸­æŸ¥æ‰¾.<br>ä½†å®é™…ä¸Š Node å¹¶ä¸çŸ¥é“è¿™ä¸ªæ¨¡å—æ˜¯ä»€ä¹ˆ, å®ƒåœ¨ node_modules æŸ¥æ‰¾, æ²¡æ‰¾åˆ°å°±åœ¨çˆ¶ç›®å½•çš„ node_modules æŸ¥æ‰¾, ä»¥æ­¤ç±»æ¨.<br>è¿™ä¸ªæ•ˆç‡æ˜¯éå¸¸ä½ä¸‹çš„.</p>
<p><strong>ä½†æ˜¯ Yarn ä½œä¸ºä¸€ä¸ªåŒ…ç®¡ç†å™¨, å®ƒçŸ¥é“ä½ çš„é¡¹ç›®çš„ä¾èµ–æ ‘. é‚£èƒ½ä¸èƒ½è®© Yarn å‘Šè¯‰ Node? è®©å®ƒç›´æ¥åˆ°æŸä¸ªç›®å½•å»åŠ è½½æ¨¡å—.<br>è¿™æ ·å³å¯ä»¥æé«˜ Node æ¨¡å—çš„æŸ¥æ‰¾æ•ˆç‡, ä¹Ÿå¯ä»¥å‡å°‘ node_modules æ–‡ä»¶çš„æ‹·è´. è¿™å°±æ˜¯<code>Plug&#39;n&#39;Play</code>çš„åŸºæœ¬åŸç†.</strong></p>
<p>åœ¨ pnp æ¨¡å¼ä¸‹, Yarn ä¸ä¼šåˆ›å»º node_modules ç›®å½•, å–è€Œä»£ä¹‹çš„æ˜¯ä¸€ä¸ª<code>.png.js</code>æ–‡ä»¶, è¿™æ˜¯ä¸€ä¸ª node ç¨‹åº,<br>è¿™ä¸ªæ–‡ä»¶åŒ…å«äº†é¡¹ç›®çš„ä¾èµ–æ ‘ä¿¡æ¯, æ¨¡å—æŸ¥æ‰¾ç®—æ³•, ä¹ŸåŒ…å«äº†æ¨¡å—æŸ¥æ‰¾å™¨çš„ patch ä»£ç (åœ¨ Node ç¯å¢ƒ, è¦†ç›– Module._load æ–¹æ³•).</p>
<p><br></p>
<p>ä½¿ç”¨ pnp æœºåˆ¶çš„ä»¥ä¸‹<strong>ä¼˜ç‚¹</strong>:</p>
<ul>
<li>æ‘†è„± node_modules.<ul>
<li>æ—¶é—´ä¸Š: ç›¸æ¯”è¾ƒåœ¨çƒ­ç¼“å­˜(hot cache)ç¯å¢ƒä¸‹è¿è¡Œ<code>yarn install</code>èŠ‚çœ 70%çš„æ—¶é—´</li>
<li>ç©ºé—´ä¸Š: pnp æ¨¡å¼ä¸‹, æ‰€æœ‰ npm æ¨¡å—éƒ½ä¼šå­˜æ”¾åœ¨å…¨å±€çš„ç¼“å­˜ç›®å½•ä¸‹, ä¾èµ–æ ‘æ‰å¹³åŒ–, é¿å…æ‹·è´å’Œé‡å¤</li>
</ul>
</li>
<li>æé«˜æ¨¡å—åŠ è½½æ•ˆç‡. Node ä¸ºäº†æŸ¥æ‰¾æ¨¡å—, éœ€è¦è°ƒç”¨å¤§é‡çš„ stat å’Œ readdir ç³»ç»Ÿè°ƒç”¨.<br>pnp é€šè¿‡ Yarn è·å–æˆ–è€…æ¨¡å—ä¿¡æ¯, ç›´æ¥å®šä½æ¨¡å—</li>
<li>ä¸å†å—é™äº node_modules åŒåæ¨¡å—ä¸åŒç‰ˆæœ¬ä¸èƒ½åœ¨åŒä¸€ç›®å½•</li>
</ul>
<blockquote>
<p>åœ¨ Mac ä¸‹ Yarn çš„å®‰è£…é€Ÿåº¦éå¸¸å¿«, çƒ­ç¼“å­˜ä¸‹ä»…éœ€å‡ ç§’. åŸå› æ˜¯ SSD + APFS çš„ Copy-on-write æœºåˆ¶.<br>è¿™ä½¿å¾—æ–‡ä»¶çš„æ‹·è´ä¸ç”¨å ç”¨ç©ºé—´, ç›¸å½“äºåˆ›å»ºä¸€ä¸ªé“¾æ¥. æ‰€ä»¥æ‹·è´å’Œåˆ é™¤çš„é€Ÿåº¦éå¸¸å¿«.<br>ä½†æ˜¯ node_modules å¤æ‚çš„ç›®å½•ç»“æ„å’Œè¶…å¤šçš„æ–‡ä»¶, ä»ç„¶éœ€è¦è°ƒç”¨å¤§é‡çš„ç³»ç»Ÿè°ƒç”¨, è¿™ä¹Ÿä¼šæ‹–æ…¢å®‰è£…è¿‡ç¨‹.<br><br><br>ğŸ’¡ å¦‚æœè§‰å¾— pnp ç¹çæˆ–ä¸å¯é , é‚£å°±èµ¶ç´§ç”¨ä¸Š SSD é…åˆæ”¯æŒ Copy-on-write çš„æ–‡ä»¶ç³»ç»Ÿ.</p>
</blockquote>
<p><br></p>
<p>ä½¿ç”¨ pnp çš„<strong>é£é™©</strong>:</p>
<p>ç›®å‰å‰ç«¯ç¤¾åŒºçš„å„ç§å·¥å…·éƒ½ä¾èµ–äº node_modules æ¨¡å—æŸ¥æ‰¾æœºåˆ¶. ä¾‹å¦‚</p>
<ul>
<li>Node</li>
<li>Electron, electron-builder ç­‰ç­‰</li>
<li>Webpack</li>
<li>Typescript: å®šä½ç±»å‹å£°æ˜æ–‡ä»¶</li>
<li>Babel: å®šä½æ’ä»¶å’Œ preset</li>
<li>Eslint: å®šä½æ’ä»¶å’Œ preset, rules</li>
<li>Jest</li>
<li>ç¼–è¾‘å™¨, å¦‚ VsCode</li>
<li>â€¦ğŸ˜¿</li>
</ul>
<p>pnp ä¸€ä¸ªéå¸¸æ–°çš„ä¸œè¥¿, åœ¨å»å¹´ 9 æœˆä»½(2018)é¢ä¸–. è¦è®©è¿™äº›å·¥å…·å’Œ pnp é›†æˆæ˜¯ä¸ªä¸å°çš„æŒ‘æˆ˜, è€Œä¸”è¿™äº›è¿™äº›å·¥å…·<br>å’Œ pnp éƒ½æ˜¯åœ¨ä¸æ–­è¿­ä»£çš„, pnp è¿˜ä¸ç¨³å®š, æœªæ¥å¯èƒ½å˜åŒ–, è¿™ä¹Ÿä¼šå¸¦æ¥æŸäº›ç»´æŠ¤æ–¹é¢çš„è´Ÿæ‹….</p>
<p>é™¤äº†æ¨¡å—æŸ¥æ‰¾æœºåˆ¶, æœ‰ä¸€äº›å·¥å…·æ˜¯ç›´æ¥åœ¨ node_modules ä¸­åšå…¶ä»–äº‹æƒ…çš„, æ¯”å¦‚ç¼“å­˜, å­˜æ”¾ä¸´æ—¶è¯ä¹¦. ä¾‹å¦‚<code>cache-loader</code>, <code>webpack-dev-server</code></p>
<h2 id="å¼€å¯-pnp"><a href="#å¼€å¯-pnp" class="headerlink" title="å¼€å¯ pnp"></a>å¼€å¯ pnp</h2><p>å¦‚æœåªæ˜¯å•çº¯çš„ Node é¡¹ç›®, è¿å…¥è¿‡ç¨‹è¿˜ç®—æ¯”è¾ƒç®€å•. é¦–å…ˆåœ¨<code>package.json</code>å¼€å¯ pnp å®‰è£…æ¨¡å¼:</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"installConfig"</span>: &#123;</span><br><span class="line">    <span class="attr">"pnp"</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¥ç€å®‰è£…ä¾èµ–:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yarn add express</span><br></pre></td></tr></table></figure>
<p>å®‰è£…åé¡¹ç›®æ ¹ç›®å½•å°±ä¼šå‡ºç°ä¸€ä¸ª<code>.pnp.js</code>æ–‡ä»¶. ä¸‹ä¸€æ­¥ç¼–å†™ä»£ç :</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"><span class="keyword">const</span> port = <span class="number">3000</span>;</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/'</span>, (req, res) =&gt; res.send(<span class="string">'Hello World!'</span>));</span><br><span class="line"></span><br><span class="line">app.listen(port, () =&gt; <span class="built_in">console</span>.log(<span class="string">`Example app listening on port <span class="subst">$&#123;port&#125;</span>!`</span>));</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥å°±æ˜¯è¿è¡Œ Node ä»£ç äº†, å¦‚æœç›´æ¥<code>node index.js</code>ä¼šæŠ¥<code>Error: Cannot find module &#39;express&#39;</code>å¼‚å¸¸.<br>è¿™æ˜¯å› ä¸ºè¿˜æ²¡æœ‰ patch Node çš„æ¨¡å—æŸ¥æ‰¾å™¨. å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿è¡Œ:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yarn node</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> æˆ–è€…</span><br><span class="line"></span><br><span class="line">node --require="./.pnp.js" index.js</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>.pnp.js</code>æ–‡ä»¶ä¸åº”è¯¥æäº¤åˆ°ç‰ˆæœ¬åº“, è¿™ä¸ªæ–‡ä»¶é‡Œé¢åŒ…å«äº†ç¡¬ç¼–ç çš„ç¼“å­˜ç›®å½•. åœ¨ Yarn v2 ä¸­ä¼šè¿›è¡Œé‡æ„</p>
</blockquote>
<h2 id="æ€ä¹ˆé›†æˆåˆ°ç°æœ‰é¡¹ç›®"><a href="#æ€ä¹ˆé›†æˆåˆ°ç°æœ‰é¡¹ç›®" class="headerlink" title="æ€ä¹ˆé›†æˆåˆ°ç°æœ‰é¡¹ç›®?"></a>æ€ä¹ˆé›†æˆåˆ°ç°æœ‰é¡¹ç›®?</h2><p>pnp é›†æˆæ— éå°±æ˜¯é‡æ–°å®ç°ç°æœ‰å·¥å…·çš„æ¨¡å—æŸ¥æ‰¾æœºåˆ¶. éšç€å‰ç«¯å·¥ç¨‹åŒ–çš„å‘å±•, ä¸€ä¸ªå‰ç«¯é¡¹ç›®ä¼šé›†æˆéå¸¸å¤šçš„å·¥å…·,<br>å¦‚æœè¿™äº›å·¥å…·æ²¡æ³•é€‚é…, å¯ä»¥è¯´ pnp å¾ˆéš¾å¾€å‰èµ°. ç„¶è€Œè¿™å¹¶ä¸æ˜¯ pnp èƒ½å¤Ÿæ§åˆ¶çš„, éœ€è¦è¿™äº›å·¥å…·å¼€å‘è€…çš„é…åˆ.</p>
<p>ç¤¾åŒºä¸Šä¸å°‘é¡¹ç›®å·²ç»é›†æˆäº† pnp:</p>
<ul>
<li><a href="https://github.com/facebook/create-react-app" target="_blank" rel="noopener">create-react-app</a></li>
<li><a href="https://github.com/gatsbyjs/gatsby" target="_blank" rel="noopener">gastby</a></li>
</ul>
<p><br></p>
<h3 id="node"><a href="#node" class="headerlink" title="Node"></a>Node</h3><p>å¯¹äº Node, pnp æ˜¯å¼€ç®±å³ç”¨çš„, ç›´æ¥ä½¿ç”¨<code>--require=&quot;./.pnp.js&quot;</code>å¯¼å…¥<code>.pnp.js</code>æ–‡ä»¶å³å¯,<br><code>.pnp.js</code>ä¼šå¯¹ Node çš„ Module å¯¹è±¡è¿›è¡Œ patch, é‡æ–°å®ç°æ¨¡å—æŸ¥æ‰¾æœºåˆ¶</p>
<h3 id="webpack"><a href="#webpack" class="headerlink" title="Webpack"></a>Webpack</h3><p>Webpack ä½¿ç”¨çš„æ¨¡å—æŸ¥æ‰¾å™¨æ˜¯<a href="https://github.com/webpack/enhanced-resolve" target="_blank" rel="noopener"><code>enhanced-resolve</code></a>, å¯ä»¥é€šè¿‡<a href="https://github.com/arcanis/pnp-webpack-plugin" target="_blank" rel="noopener"><code>pnp-webpack-plugin</code></a>æ’ä»¶æ¥æ‰©å±•<code>enhanced-resolve</code><br>æ¥æ”¯æŒ pnp.</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> PnpWebpackPlugin = <span class="built_in">require</span>(<span class="string">`pnp-webpack-plugin`</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  resolve: &#123;</span><br><span class="line">    <span class="comment">// æ‰©å±•æ¨¡å—æŸ¥æ‰¾å™¨</span></span><br><span class="line">    plugins: [PnpWebpackPlugin],</span><br><span class="line">  &#125;,</span><br><span class="line">  resolveLoader: &#123;</span><br><span class="line">    <span class="comment">// æ‰©å±•loaderæ¨¡å—æŸ¥æ‰¾å™¨.</span></span><br><span class="line">    plugins: [PnpWebpackPlugin.moduleLoader(<span class="built_in">module</span>)],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="jest"><a href="#jest" class="headerlink" title="jest"></a>jest</h3><p><a href="http://jestjs.io" target="_blank" rel="noopener">jest</a>æ”¯æŒé€šè¿‡<code>resolver</code>æ¥é…ç½®æŸ¥æ‰¾å™¨:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  resolver: <span class="built_in">require</span>.resolve(<span class="string">`jest-pnp-resolver`</span>),</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="typescript"><a href="#typescript" class="headerlink" title="Typescript"></a>Typescript</h3><p>Typescript ä¹Ÿä½¿ç”¨è‡ªå·±çš„æ¨¡å—æŸ¥æ‰¾å™¨, TSå›¢é˜Ÿä¸ºäº†æ€§èƒ½æ–¹é¢çš„è€ƒè™‘, æš‚æ—¶ä¸å…è®¸ç¬¬ä¸‰æ–¹å·¥å…·æ¥æ‰©å±•æŸ¥æ‰¾å™¨. ä¹Ÿå°±æ˜¯è¯´<strong>æš‚æ—¶ä¸èƒ½ç”¨</strong>.</p>
<p>åœ¨è¿™ä¸ª<a href="https://github.com/Microsoft/TypeScript/issues/28289" target="_blank" rel="noopener">issue</a>ä¸­, æœ‰äººæå‡ºä½¿ç”¨<code>&quot;moduleResolution&quot;: &quot;yarnpnp&quot;</code>æˆ–è€…ä½¿ç”¨ç±»ä¼¼<a href="https://github.com/TypeStrong/ts-loader" target="_blank" rel="noopener"><code>ts-loader</code></a>çš„<a href="https://github.com/arcanis/pnp-webpack-plugin/blob/b09fbdc2a9f16dc3837454b8d367963b1a30655f/index.js#L141" target="_blank" rel="noopener"><code>resolveModuleName</code></a>çš„æ–¹å¼æ”¯æŒ pnp æ¨¡å—æŸ¥æ‰¾.</p>
<p>TS å›¢é˜Ÿçš„å›åº”æ˜¯: pnp(æˆ–è€… npm çš„ tink)è¿˜æ˜¯æ—©æœŸé˜¶æ®µ, æœªæ¥å¯èƒ½ä¼šæœ‰å˜åŒ–, ä¾‹å¦‚<code>.pnp.js</code>æ–‡ä»¶, æ˜¾ç„¶ä¸åˆé€‚é‚£ä¹ˆæ—©å…¥å‘.<br>å¦å¤–ä¸ºäº†ä¼˜åŒ–å’Œæ§åˆ¶ç¼–è¯‘å™¨æ€§èƒ½, TS ä¹Ÿæ²¡æœ‰è®¡åˆ’åœ¨ç¼–è¯‘æœŸé—´æš´éœ²æ¥å£ç»™ç¬¬ä¸‰æ–¹æ‰§è¡Œä»£ç .</p>
<p>æ‰€ä»¥ç°åœ¨ Typescript è‡³ä»Šä¹Ÿæ²¡æœ‰ç±»ä¼¼ babel çš„æ’ä»¶æœºåˆ¶. é™¤éè‡ªå·±å®ç°ä¸€ä¸ªâ€™TS compiler hostâ€™, ä¾‹å¦‚<code>ts-loader</code>å°±è‡ªå·±æ‰©å±•äº†æ’ä»¶æœºåˆ¶å’Œæ¨¡å—æŸ¥æ‰¾æœºåˆ¶, æ¥æ”¯æŒç±»ä¼¼<a href="https://github.com/Brooooooklyn/ts-import-plugin" target="_blank" rel="noopener">ts-import-plugin</a>ç­‰æ’ä»¶, å› æ­¤<code>ts-loader</code>ç°åœ¨æ˜¯æ”¯æŒ pnp çš„:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> PnpWebpackPlugin = <span class="built_in">require</span>(<span class="string">`pnp-webpack-plugin`</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.ts$/</span>,</span><br><span class="line">        loader: <span class="built_in">require</span>.resolve(<span class="string">'ts-loader'</span>),</span><br><span class="line">        options: PnpWebpackPlugin.tsLoaderOptions(),</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><br></p>
<p>æ€»ç»“, <strong><code>Typescript</code>æš‚æ—¶ä¸æ”¯æŒ</strong>, ä¸”è¿‘æœŸä¹Ÿæ²¡æœ‰å¼€å‘è®¡åˆ’, æ‰€ä»¥<code>VsCode</code>ä¹Ÿåˆ«æŒ‡æœ›äº†. <a href="https://github.com/Realytics/fork-ts-checker-webpack-plugin/issues/181" target="_blank" rel="noopener"><code>fork-ts-checker-webpack-plugin</code></a>ä¹Ÿè¿˜æ²¡è·Ÿä¸Š. æ˜¾ç„¶ Typescript æ˜¯ pnp çš„ç¬¬ä¸€æ‹¦è·¯è™</p>
<p><br></p>
<h3 id="å…¶ä»–å·¥å…·"><a href="#å…¶ä»–å·¥å…·" class="headerlink" title="å…¶ä»–å·¥å…·"></a>å…¶ä»–å·¥å…·</h3><ul>
<li><a href="https://github.com/arcanis/rollup-plugin-pnp-resolve" target="_blank" rel="noopener">rollup-plugin-pnp-resolve</a></li>
<li><a href="https://yarnpkg.com/en/package/resolve" target="_blank" rel="noopener">resolve</a>: babel, gulp</li>
<li><a href="https://github.com/yarnpkg/yarn/pull/6449" target="_blank" rel="noopener">eslint</a>: åˆ° v6 æ‰èƒ½<a href="https://github.com/yarnpkg/berry/issues/8" target="_blank" rel="noopener">å®Œç¾æ”¯æŒ</a>.</li>
<li><a href="https://github.com/facebook/flow/issues/7014" target="_blank" rel="noopener">flow</a></li>
<li><a href="https://github.com/facebook/create-react-app/pull/5136" target="_blank" rel="noopener">create-react-app</a> æ”¯æŒ pnp, ä½†æ˜¯ Typescript æ¨¡å¼ä¸‹ä¸æ”¯æŒ</li>
<li>electron: æš‚æ—¶æ²¡æœ‰ç›¸å…³çš„æ¶ˆæ¯. å¯¹äºä¸€ä¸ªelectronåº”ç”¨æ¥è¯´, ä¾èµ–æ˜¯è‡ªåŒ…å«çš„, æ‰€ä»¥pnpå¯èƒ½ä¸é€‚åˆè¯¥åœºæ™¯</li>
</ul>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ç»¼ä¸Š, pnp æ˜¯ä¸€ä¸ªä¸é”™çš„è§£å†³æ–¹æ¡ˆ, å¯ä»¥è§£å†³ Node æ¨¡å—æœºåˆ¶çš„ç©ºé—´å’Œæ—¶é—´çš„æ•ˆç‡é—®é¢˜. ä½†æ˜¯åœ¨ç°é˜¶æ®µ, å®ƒè¿˜ä¸æ˜¯æˆç†Ÿ, æœ‰<br>å¾ˆå¤šå‘è¦è¸©, ä¸”å’Œç¤¾åŒºå„ç§å·¥å…·é›†æˆå­˜åœ¨ä¸å°‘é—®é¢˜. æ‰€ä»¥è¿˜ä¸å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨.</p>
<p>æ‰€ä»¥ç›®å‰é˜¶æ®µå¯¹äºæ™®é€šå¼€å‘è€…æ¥è¯´, å¦‚æœè¦æå‡npmå®‰è£…é€Ÿåº¦, è¿˜æ˜¯å¾—ä¸ŠSSD+Copy-On-Write!ğŸ˜‚</p>
<p>ä¸‹é¢æ˜¯å„ç§é¡¹ç›®çš„é›†æˆæƒ…å†µ(âœ…(æ”¯æŒ)|ğŸš§(è®¡åˆ’ä¸­æˆ–ä¸å®Œç¾)|âŒ(ä¸æ”¯æŒ)):</p>
<table>
<thead>
<tr>
<th>é¡¹ç›®</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Webpack</td>
<td>âœ…</td>
</tr>
<tr>
<td>rollup</td>
<td>âœ…</td>
</tr>
<tr>
<td>browserify</td>
<td>âœ…</td>
</tr>
<tr>
<td>gulp</td>
<td>âœ…</td>
</tr>
<tr>
<td>jest</td>
<td>âœ…</td>
</tr>
<tr>
<td>Node</td>
<td>âœ…</td>
</tr>
<tr>
<td>Typescript/VScode IntelliSense</td>
<td>âŒ</td>
</tr>
<tr>
<td>eslint</td>
<td>ğŸš§</td>
</tr>
<tr>
<td>flow</td>
<td>ğŸš§</td>
</tr>
<tr>
<td>create-react-app</td>
<td>ğŸš§</td>
</tr>
<tr>
<td>ts-loader</td>
<td>âœ…</td>
</tr>
<tr>
<td>fork-ts-checker-webpack-plugin</td>
<td>ğŸš§</td>
</tr>
</tbody>
</table>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="https://github.com/yarnpkg/rfcs/blob/master/accepted/0000-plug-an-play.md" target="_blank" rel="noopener">Plugâ€™nâ€™Play Whitepaper</a> pnpçš„è®ºæ–‡</li>
<li><a href="https://medium.freecodecamp.org/getting-rid-of-node-modules-with-yarn-plugn-play-a490e5e747d7" target="_blank" rel="noopener">How to get rid of node_modules with Yarn Plugâ€™nâ€™Play</a></li>
<li><a href="https://yarnpkg.com/en/docs/pnp" target="_blank" rel="noopener">Yarn å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://github.com/yarnpkg/pnp-sample-app" target="_blank" rel="noopener">pnp-sample-app</a> pnp å®˜æ–¹ç¤ºä¾‹</li>
<li><a href="https://github.com/yarnpkg/yarn/issues/6953" target="_blank" rel="noopener">Yarnâ€™s Future - v2 and beyond</a></li>
<li><a href="https://medium.com/@thomasreggi/yarn-plugn-play-1c398bf3e417" target="_blank" rel="noopener">Hacker News Discussion</a></li>
</ul>
<p>ç›¸å…³ issues:</p>
<ul>
<li><a href="https://github.com/yarnpkg/yarn/issues/6388" target="_blank" rel="noopener">Yarn Plug â€˜N Play should generate a static manifest file, not <code>.pnp.js</code></a></li>
<li><a href="https://github.com/Microsoft/TypeScript/issues/28289" target="_blank" rel="noopener">Typescript: Add new moduleResolution option: <code>yarn-pnp</code></a></li>
<li><a href="https://github.com/Realytics/fork-ts-checker-webpack-plugin/issues/181" target="_blank" rel="noopener">fork-ts-checker-webpack-plugin: Custom resolveModuleName</a></li>
</ul>
<p>å…¶ä»–æ–¹æ¡ˆ</p>
<ul>
<li><a href="https://github.com/npm/tink" target="_blank" rel="noopener">npm tink</a>: a dependency unwinder for javascript</li>
<li><a href="https://github.com/pnpm/pnpm" target="_blank" rel="noopener">pnpm</a> Fast, disk space efficient package manager</li>
<li><a href="https://yarnpkg.com/en/docs/workspaces" target="_blank" rel="noopener">Yarn Workspaces</a> å¤šä¸ªé¡¹ç›®å…±æœ‰ä¾èµ–</li>
</ul>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Blogs</a></li>
         
          <li><a href="http://github.com/ivan-94">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#èƒŒæ™¯"><span class="toc-number">1.</span> <span class="toc-text">èƒŒæ™¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#åŸºæœ¬åŸç†"><span class="toc-number">2.</span> <span class="toc-text">åŸºæœ¬åŸç†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å¼€å¯-pnp"><span class="toc-number">3.</span> <span class="toc-text">å¼€å¯ pnp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ€ä¹ˆé›†æˆåˆ°ç°æœ‰é¡¹ç›®"><span class="toc-number">4.</span> <span class="toc-text">æ€ä¹ˆé›†æˆåˆ°ç°æœ‰é¡¹ç›®?</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#node"><span class="toc-number">4.1.</span> <span class="toc-text">Node</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#webpack"><span class="toc-number">4.2.</span> <span class="toc-text">Webpack</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jest"><span class="toc-number">4.3.</span> <span class="toc-text">jest</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#typescript"><span class="toc-number">4.4.</span> <span class="toc-text">Typescript</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å…¶ä»–å·¥å…·"><span class="toc-number">4.5.</span> <span class="toc-text">å…¶ä»–å·¥å…·</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ€»ç»“"><span class="toc-number">5.</span> <span class="toc-text">æ€»ç»“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å‚è€ƒ"><span class="toc-number">6.</span> <span class="toc-text">å‚è€ƒ</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://bobi.ink/2019/04/08/plug-n-play/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://bobi.ink/2019/04/08/plug-n-play/&text=Yarn Plug&#39;n&#39;Playå¯å¦åŠ©ä½ è„±ç¦»node_modulesè‹¦æµ·?"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://bobi.ink/2019/04/08/plug-n-play/&title=Yarn Plug&#39;n&#39;Playå¯å¦åŠ©ä½ è„±ç¦»node_modulesè‹¦æµ·?"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://bobi.ink/2019/04/08/plug-n-play/&is_video=false&description=Yarn Plug&#39;n&#39;Playå¯å¦åŠ©ä½ è„±ç¦»node_modulesè‹¦æµ·?"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Yarn Plug&#39;n&#39;Playå¯å¦åŠ©ä½ è„±ç¦»node_modulesè‹¦æµ·?&body=Check out this article: https://bobi.ink/2019/04/08/plug-n-play/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://bobi.ink/2019/04/08/plug-n-play/&title=Yarn Plug&#39;n&#39;Playå¯å¦åŠ©ä½ è„±ç¦»node_modulesè‹¦æµ·?"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://bobi.ink/2019/04/08/plug-n-play/&title=Yarn Plug&#39;n&#39;Playå¯å¦åŠ©ä½ è„±ç¦»node_modulesè‹¦æµ·?"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://bobi.ink/2019/04/08/plug-n-play/&title=Yarn Plug&#39;n&#39;Playå¯å¦åŠ©ä½ è„±ç¦»node_modulesè‹¦æµ·?"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://bobi.ink/2019/04/08/plug-n-play/&title=Yarn Plug&#39;n&#39;Playå¯å¦åŠ©ä½ è„±ç¦»node_modulesè‹¦æµ·?"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://bobi.ink/2019/04/08/plug-n-play/&name=Yarn Plug&#39;n&#39;Playå¯å¦åŠ©ä½ è„±ç¦»node_modulesè‹¦æµ·?&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2023 Ivan
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Blogs</a></li>
         
          <li><a href="http://github.com/ivan-94">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/lib/meslo-LG/styles.css">
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>


    <!-- Google Analytics -->
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-44571525-2', 'auto');
        ga('send', 'pageview');
    </script>


    <!-- Disqus Comments -->
    <script type="text/javascript">
        var disqus_shortname = 'bobi-ink';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


