<!DOCTYPE html>
<html lang=zh>
<head><meta name="generator" content="Hexo 3.8.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="è¿™æœŸæ¥å…³æ³¨ä¸€ä¸‹CodeSandbox, è¿™æ˜¯ä¸€ä¸ªæµè§ˆå™¨ç«¯çš„æ²™ç›’è¿è¡Œç¯å¢ƒï¼Œæ”¯æŒå¤šç§æµè¡Œçš„æ„å»ºæ¨¡æ¿ï¼Œä¾‹å¦‚ create-react-appã€ vue-cliã€parcelç­‰ç­‰ã€‚ å¯ä»¥ç”¨äºå¿«é€ŸåŸå‹å¼€å‘ã€DEMO å±•ç¤ºã€Bug è¿˜åŸç­‰ç­‰. ç›¸ä¼¼çš„äº§å“æœ‰å¾ˆå¤šï¼Œä¾‹å¦‚codepenã€JSFiddleã€WebpackBin(å·²åºŸå¼ƒ). CodeSandbox åˆ™æ›´åŠ å¼ºå¤§ï¼Œå¯ä»¥è§†ä½œæ˜¯æµè§ˆå™¨ç«¯çš„ Webpack è¿è¡Œ">
<meta name="keywords" content="Blog,FrontEnd,React,Javascript,Typescript">
<meta property="og:type" content="article">
<meta property="og:title" content="CodeSandbox å¦‚ä½•å·¥ä½œ? ä¸Šç¯‡">
<meta property="og:url" content="https://bobi.ink/2019/06/20/codesandbox/index.html">
<meta property="og:site_name" content="Bobi.ink">
<meta property="og:description" content="è¿™æœŸæ¥å…³æ³¨ä¸€ä¸‹CodeSandbox, è¿™æ˜¯ä¸€ä¸ªæµè§ˆå™¨ç«¯çš„æ²™ç›’è¿è¡Œç¯å¢ƒï¼Œæ”¯æŒå¤šç§æµè¡Œçš„æ„å»ºæ¨¡æ¿ï¼Œä¾‹å¦‚ create-react-appã€ vue-cliã€parcelç­‰ç­‰ã€‚ å¯ä»¥ç”¨äºå¿«é€ŸåŸå‹å¼€å‘ã€DEMO å±•ç¤ºã€Bug è¿˜åŸç­‰ç­‰. ç›¸ä¼¼çš„äº§å“æœ‰å¾ˆå¤šï¼Œä¾‹å¦‚codepenã€JSFiddleã€WebpackBin(å·²åºŸå¼ƒ). CodeSandbox åˆ™æ›´åŠ å¼ºå¤§ï¼Œå¯ä»¥è§†ä½œæ˜¯æµè§ˆå™¨ç«¯çš„ Webpack è¿è¡Œ">
<meta property="og:locale" content="zh">
<meta property="og:image" content="https://bobi.ink/images/08/codesandbox.png">
<meta property="og:image" content="https://bobi.ink/images/08/codesandbox-arch.png">
<meta property="og:image" content="https://bobi.ink/images/08/presets.png">
<meta property="og:image" content="https://bobi.ink/images/08/dll.png">
<meta property="og:image" content="https://bobi.ink/images/08/webpack-dll-manifest.png">
<meta property="og:image" content="https://bobi.ink/images/08/packager1.png">
<meta property="og:image" content="https://bobi.ink/images/08/packager2.png">
<meta property="og:image" content="https://bobi.ink/images/08/transpile-dependency-graph.png">
<meta property="og:image" content="https://bobi.ink/images/08/editor-vs-compiler.png">
<meta property="og:image" content="https://bobi.ink/images/08/baseobj.png">
<meta property="og:image" content="https://bobi.ink/images/08/compiler.png">
<meta property="og:image" content="https://bobi.ink/images/08/transpiled-module.png">
<meta property="og:image" content="https://bobi.ink/images/08/transpiler.png">
<meta property="og:image" content="https://bobi.ink/images/08/babel-transpiler.png">
<meta property="og:image" content="https://bobi.ink/images/08/babel-worker.png">
<meta property="og:image" content="https://bobi.ink/images/08/dependency-graph.png">
<meta property="og:image" content="https://bobi.ink/images/08/evaluation.png">
<meta property="og:updated_time" content="2023-06-01T09:55:14.328Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CodeSandbox å¦‚ä½•å·¥ä½œ? ä¸Šç¯‡">
<meta name="twitter:description" content="è¿™æœŸæ¥å…³æ³¨ä¸€ä¸‹CodeSandbox, è¿™æ˜¯ä¸€ä¸ªæµè§ˆå™¨ç«¯çš„æ²™ç›’è¿è¡Œç¯å¢ƒï¼Œæ”¯æŒå¤šç§æµè¡Œçš„æ„å»ºæ¨¡æ¿ï¼Œä¾‹å¦‚ create-react-appã€ vue-cliã€parcelç­‰ç­‰ã€‚ å¯ä»¥ç”¨äºå¿«é€ŸåŸå‹å¼€å‘ã€DEMO å±•ç¤ºã€Bug è¿˜åŸç­‰ç­‰. ç›¸ä¼¼çš„äº§å“æœ‰å¾ˆå¤šï¼Œä¾‹å¦‚codepenã€JSFiddleã€WebpackBin(å·²åºŸå¼ƒ). CodeSandbox åˆ™æ›´åŠ å¼ºå¤§ï¼Œå¯ä»¥è§†ä½œæ˜¯æµè§ˆå™¨ç«¯çš„ Webpack è¿è¡Œ">
<meta name="twitter:image" content="https://bobi.ink/images/08/codesandbox.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>CodeSandbox å¦‚ä½•å·¥ä½œ? ä¸Šç¯‡</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Blogs</a></li>
         
          <li><a href="http://github.com/ivan-94">Projects</a></li>
        
      </ul>
    </span>
    <br>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2019/07/06/css-variable/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2019/06/16/react-performance-analyze/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://bobi.ink/2019/06/20/codesandbox/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://bobi.ink/2019/06/20/codesandbox/&text=CodeSandbox å¦‚ä½•å·¥ä½œ? ä¸Šç¯‡"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://bobi.ink/2019/06/20/codesandbox/&title=CodeSandbox å¦‚ä½•å·¥ä½œ? ä¸Šç¯‡"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://bobi.ink/2019/06/20/codesandbox/&is_video=false&description=CodeSandbox å¦‚ä½•å·¥ä½œ? ä¸Šç¯‡"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=CodeSandbox å¦‚ä½•å·¥ä½œ? ä¸Šç¯‡&body=Check out this article: https://bobi.ink/2019/06/20/codesandbox/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://bobi.ink/2019/06/20/codesandbox/&title=CodeSandbox å¦‚ä½•å·¥ä½œ? ä¸Šç¯‡"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://bobi.ink/2019/06/20/codesandbox/&title=CodeSandbox å¦‚ä½•å·¥ä½œ? ä¸Šç¯‡"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://bobi.ink/2019/06/20/codesandbox/&title=CodeSandbox å¦‚ä½•å·¥ä½œ? ä¸Šç¯‡"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://bobi.ink/2019/06/20/codesandbox/&title=CodeSandbox å¦‚ä½•å·¥ä½œ? ä¸Šç¯‡"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://bobi.ink/2019/06/20/codesandbox/&name=CodeSandbox å¦‚ä½•å·¥ä½œ? ä¸Šç¯‡&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#å¼•"><span class="toc-number">1.</span> <span class="toc-text">å¼•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#åŸºæœ¬ç›®å½•ç»“æ„"><span class="toc-number">2.</span> <span class="toc-text">åŸºæœ¬ç›®å½•ç»“æ„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#é¡¹ç›®æ„å»ºè¿‡ç¨‹"><span class="toc-number">3.</span> <span class="toc-text">é¡¹ç›®æ„å»ºè¿‡ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#packager"><span class="toc-number">3.1.</span> <span class="toc-text">Packager</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#webpackdllplugin"><span class="toc-number">3.1.1.</span> <span class="toc-text">WebpackDllPlugin</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#åœ¨çº¿æ‰“åŒ…æœåŠ¡"><span class="toc-number">3.1.2.</span> <span class="toc-text">åœ¨çº¿æ‰“åŒ…æœåŠ¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å›é€€æ–¹æ¡ˆ"><span class="toc-number">3.1.3.</span> <span class="toc-text">å›é€€æ–¹æ¡ˆ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#transpilation"><span class="toc-number">3.2.</span> <span class="toc-text">Transpilation</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#åŸºæœ¬å¯¹è±¡"><span class="toc-number">3.2.1.</span> <span class="toc-text">åŸºæœ¬å¯¹è±¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#manager"><span class="toc-number">3.2.2.</span> <span class="toc-text">Manager</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#transpiledmodule"><span class="toc-number">3.2.3.</span> <span class="toc-text">TranspiledModule</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#transpiler"><span class="toc-number">3.2.4.</span> <span class="toc-text">Transpiler</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#babeltranspiler"><span class="toc-number">3.2.5.</span> <span class="toc-text">BabelTranspiler</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#evaluation"><span class="toc-number">3.3.</span> <span class="toc-text">Evaluation</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æŠ€æœ¯åœ°å›¾"><span class="toc-number">4.</span> <span class="toc-text">æŠ€æœ¯åœ°å›¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ‰©å±•"><span class="toc-number">5.</span> <span class="toc-text">æ‰©å±•</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        CodeSandbox å¦‚ä½•å·¥ä½œ? ä¸Šç¯‡
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Bobi.ink</span>
      </span>
      
    <div class="postdate">
        <time datetime="2019-06-19T16:00:00.000Z" itemprop="datePublished">2019-06-20</time>
    </div>


      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>è¿™æœŸæ¥å…³æ³¨ä¸€ä¸‹<a href="https://codesandbox.io" target="_blank" rel="noopener"><code>CodeSandbox</code></a>, è¿™æ˜¯ä¸€ä¸ªæµè§ˆå™¨ç«¯çš„æ²™ç›’è¿è¡Œç¯å¢ƒï¼Œæ”¯æŒå¤šç§æµè¡Œçš„æ„å»ºæ¨¡æ¿ï¼Œä¾‹å¦‚ <code>create-react-app</code>ã€ <code>vue-cli</code>ã€<code>parcel</code>ç­‰ç­‰ã€‚ å¯ä»¥ç”¨äºå¿«é€ŸåŸå‹å¼€å‘ã€DEMO å±•ç¤ºã€Bug è¿˜åŸç­‰ç­‰.</p>
<p>ç›¸ä¼¼çš„äº§å“æœ‰å¾ˆå¤šï¼Œä¾‹å¦‚<a href="https://codepen.io/pen" target="_blank" rel="noopener"><code>codepen</code></a>ã€<a href="https://jsfiddle.net" target="_blank" rel="noopener"><code>JSFiddle</code></a>ã€<a href="https://webpackbin-prod.firebaseapp.com" target="_blank" rel="noopener"><code>WebpackBin</code></a>(å·²åºŸå¼ƒ).</p>
<p>CodeSandbox åˆ™æ›´åŠ å¼ºå¤§ï¼Œå¯ä»¥è§†ä½œæ˜¯æµè§ˆå™¨ç«¯çš„ Webpack è¿è¡Œç¯å¢ƒ, ç”šè‡³åœ¨ V3 ç‰ˆæœ¬å·²ç»æ”¯æŒ VsCode æ¨¡å¼ï¼Œæ”¯æŒ Vscode çš„æ’ä»¶å’Œ Vim æ¨¡å¼ã€è¿˜æœ‰ä¸»é¢˜.</p>
<p>å¦å¤– CodeSandbox æ”¯æŒç¦»çº¿è¿è¡Œ(PWA)ã€‚åŸºæœ¬ä¸Šå¯ä»¥æ¥è¿‘æœ¬åœ° VSCode çš„ç¼–ç¨‹ä½“éªŒ. æœ‰ iPad çš„åŒå­¦ï¼Œä¹Ÿå¯ä»¥å°è¯•åŸºäºå®ƒæ¥è¿›è¡Œå¼€å‘ã€‚æ‰€ä»¥å¿«é€Ÿçš„åŸå‹å¼€å‘æˆ‘ä¸€èˆ¬ä¼šç›´æ¥ä½¿ç”¨ CodeSandbox</p>
<p><br></p>
<p><strong>ç›®å½•</strong></p>
<!-- TOC -->
<ul>
<li><a href="#å¼•">å¼•</a></li>
<li><a href="#åŸºæœ¬ç›®å½•ç»“æ„">åŸºæœ¬ç›®å½•ç»“æ„</a></li>
<li><a href="#é¡¹ç›®æ„å»ºè¿‡ç¨‹">é¡¹ç›®æ„å»ºè¿‡ç¨‹</a><ul>
<li><a href="#packager">Packager</a><ul>
<li><a href="#webpackdllplugin">WebpackDllPlugin</a></li>
<li><a href="#åœ¨çº¿æ‰“åŒ…æœåŠ¡">åœ¨çº¿æ‰“åŒ…æœåŠ¡</a></li>
<li><a href="#å›é€€æ–¹æ¡ˆ">å›é€€æ–¹æ¡ˆ</a></li>
</ul>
</li>
<li><a href="#transpilation">Transpilation</a><ul>
<li><a href="#åŸºæœ¬å¯¹è±¡">åŸºæœ¬å¯¹è±¡</a></li>
<li><a href="#manager">Manager</a></li>
<li><a href="#transpiledmodule">TranspiledModule</a></li>
<li><a href="#transpiler">Transpiler</a></li>
<li><a href="#babeltranspiler">BabelTranspiler</a></li>
</ul>
</li>
<li><a href="#evaluation">Evaluation</a></li>
</ul>
</li>
<li><a href="#æŠ€æœ¯åœ°å›¾">æŠ€æœ¯åœ°å›¾</a></li>
<li><a href="#æ‰©å±•">æ‰©å±•</a></li>
</ul>
<!-- /TOC -->
<p><br><br><br></p>
<h2 id="å¼•"><a href="#å¼•" class="headerlink" title="å¼•"></a>å¼•</h2><center><br>  <img src="/images/08/codesandbox.png" width="800"><br></center>

<p><br></p>
<p>ç¬”è€…å¯¹ CodeSandbox çš„ç¬¬ä¸€å°è±¡æ˜¯è¿™ç©æ„æ˜¯è¿è¡Œåœ¨æœåŠ¡å™¨çš„å§ï¼Ÿ æ¯”å¦‚ <code>create-react-app</code> è¦è¿è¡Œèµ·æ¥éœ€è¦ node ç¯å¢ƒï¼Œéœ€è¦é€šè¿‡ npm å®‰è£…ä¸€å¤§å †ä¾èµ–ï¼Œç„¶åé€šè¿‡ Webpack è¿›è¡Œæ‰“åŒ…ï¼Œæœ€åè¿è¡Œä¸€ä¸ªå¼€å‘æœåŠ¡å™¨æ‰èƒ½åœ¨æµè§ˆå™¨è·‘èµ·æ¥.</p>
<p><strong>å®é™…ä¸Š CodeSandbox æ‰“åŒ…å’Œè¿è¡Œå¹¶ä¸ä¾èµ–äºæœåŠ¡å™¨, å®ƒæ˜¯å®Œå…¨åœ¨æµè§ˆå™¨è¿›è¡Œçš„</strong>. å¤§æ¦‚çš„ç»“æ„å¦‚ä¸‹:</p>
<center><br> <img src="/images/08/codesandbox-arch.png" width="600"><br></center>

<ul>
<li><strong>Editor</strong>: ç¼–è¾‘å™¨ã€‚ä¸»è¦ç”¨äºä¿®æ”¹æ–‡ä»¶ï¼ŒCodeSandboxè¿™é‡Œé›†æˆäº† <code>VsCode</code>, æ–‡ä»¶å˜åŠ¨åä¼šé€šçŸ¥ <code>Sandbox</code> è¿›è¡Œè½¬è¯‘. è®¡åˆ’ä¼šæœ‰æ–‡ç« ä¸“é—¨ä»‹ç»CodeSandboxçš„ç¼–è¾‘å™¨å®ç°</li>
<li><strong>Sandbox</strong>: ä»£ç è¿è¡Œå™¨ã€‚<strong>Sandbox åœ¨ä¸€ä¸ªå•ç‹¬çš„ iframe ä¸­è¿è¡Œ, è´Ÿè´£ä»£ç çš„è½¬è¯‘(Transpiler)å’Œè¿è¡Œ(Evalation)</strong>. å¦‚æœ€ä¸Šé¢çš„å›¾ï¼Œå·¦è¾¹æ˜¯Editorï¼Œå³è¾¹æ˜¯Sandbox</li>
<li><strong>Packager</strong> åŒ…ç®¡ç†å™¨ã€‚ç±»ä¼¼äºyarnå’Œnpmï¼Œè´Ÿè´£æ‹‰å–å’Œç¼“å­˜ npm ä¾èµ–</li>
</ul>
<p><br></p>
<p>CodeSandbox çš„ä½œè€… <a href="https://twitter.com/CompuIves" target="_blank" rel="noopener">Ives van Hoorne</a> ä¹Ÿå°è¯•è¿‡å°† <code>Webpack</code> ç§»æ¤åˆ°æµè§ˆå™¨ä¸Šè¿è¡Œï¼Œå› ä¸ºç°åœ¨å‡ ä¹æ‰€æœ‰çš„ CLI éƒ½æ˜¯ä½¿ç”¨ Webpack è¿›è¡Œæ„å»ºçš„ï¼Œå¦‚æœèƒ½å°† Webpack ç§»æ¤åˆ°æµè§ˆå™¨ä¸Š, å¯ä»¥åˆ©ç”¨ Webpack å¼ºå¤§çš„ç”Ÿæ€ç³»ç»Ÿå’Œè½¬è¯‘æœºåˆ¶(loader/plugin)ï¼Œä½æˆæœ¬å…¼å®¹å„ç§ CLI.</p>
<p>ç„¶è€Œ Webpack å¤ªé‡äº†ğŸ˜±ï¼Œå‹ç¼©è¿‡åçš„å¤§å°å°±å¾— 3.5MBï¼Œè¿™è¿˜ç®—å‹‰å¼ºå¯ä»¥æ¥å—å§ï¼›æ›´å¤§çš„é—®é¢˜æ˜¯è¦åœ¨æµè§ˆå™¨ç«¯æ¨¡æ‹Ÿ Node è¿è¡Œç¯å¢ƒï¼Œè¿™ä¸ªæˆæœ¬å¤ªé«˜äº†ï¼Œå¾—ä¸å¿å¤±ã€‚</p>
<p>æ‰€ä»¥ CodeSandbox å†³å®šè‡ªå·±é€ ä¸ªæ‰“åŒ…å™¨ï¼Œè¿™ä¸ªæ‰“åŒ…å™¨æ›´è½»é‡ï¼Œå¹¶ä¸”é’ˆå¯¹ CodeSandbox å¹³å°è¿›è¡Œä¼˜åŒ–. æ¯”å¦‚ CodeSandbox åªå…³å¿ƒå¼€å‘ç¯å¢ƒçš„ä»£ç æ„å»º, ç›®æ ‡å°±æ˜¯èƒ½è·‘èµ·æ¥å°±è¡Œäº†, è·Ÿ Webpack ç›¸æ¯”è£å‰ªæ‰äº†ä»¥ä¸‹ç‰¹æ€§:</p>
<ul>
<li>ç”Ÿäº§æ¨¡å¼. CodeSandbox åªè€ƒè™‘ development æ¨¡å¼ï¼Œä¸éœ€è¦è€ƒè™‘ productionä¸€äº›ç‰¹æ€§ï¼Œæ¯”å¦‚<ul>
<li>ä»£ç å‹ç¼©ï¼Œä¼˜åŒ–</li>
<li>Tree-shaking</li>
<li>æ€§èƒ½ä¼˜åŒ–</li>
<li>ä»£ç åˆ†å‰²</li>
</ul>
</li>
<li>æ–‡ä»¶è¾“å‡º. ä¸éœ€è¦æ‰“åŒ…æˆchunk</li>
<li>æœåŠ¡å™¨é€šä¿¡. Sandboxç›´æ¥åŸåœ°è½¬è¯‘å’Œè¿è¡Œ, è€ŒWebpack éœ€è¦å’Œå¼€å‘æœåŠ¡å™¨å»ºç«‹ä¸€ä¸ªé•¿è¿æ¥ç”¨äºæ¥æ”¶æŒ‡ä»¤ï¼Œä¾‹å¦‚ HMR.</li>
<li>é™æ€æ–‡ä»¶å¤„ç†(å¦‚å›¾ç‰‡). è¿™äº›å›¾ç‰‡éœ€è¦ä¸Šä¼ åˆ° CodeSandbox çš„æœåŠ¡å™¨</li>
<li>æ’ä»¶æœºåˆ¶ç­‰ç­‰.</li>
</ul>
<p>æ‰€ä»¥å¯ä»¥è®¤ä¸º<strong>CodeSandboxæ˜¯ä¸€ä¸ªç®€åŒ–ç‰ˆçš„Webpack, ä¸”é’ˆå¯¹æµè§ˆå™¨ç¯å¢ƒè¿›è¡Œäº†ä¼˜åŒ–ï¼Œæ¯”å¦‚ä½¿ç”¨workeræ¥è¿›è¡Œå¹¶è¡Œè½¬è¯‘</strong></p>
<p>CodeSandbox çš„æ‰“åŒ…å™¨ä½¿ç”¨äº†æ¥è¿‘ <code>Webpack Loader</code> çš„ API, è¿™æ ·å¯ä»¥å¾ˆå®¹æ˜“åœ°å°† Webpack çš„ä¸€äº› loader ç§»æ¤è¿‡æ¥. ä¸¾ä¸ªä¾‹å­ï¼Œä¸‹é¢æ˜¯ <code>create-react-app</code> çš„å®ç°(æŸ¥çœ‹<a href="https://github.com/codesandbox/codesandbox-client/blob/84972fd027fe36c53652c22f6775e1e6d3c51145/packages/app/src/sandbox/eval/presets/create-react-app/index.js#L1" target="_blank" rel="noopener">æºç </a>):</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> stylesTranspiler <span class="keyword">from</span> <span class="string">"../../transpilers/style"</span>;</span><br><span class="line"><span class="keyword">import</span> babelTranspiler <span class="keyword">from</span> <span class="string">"../../transpilers/babe"</span>;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">import</span> sassTranspiler <span class="keyword">from</span> <span class="string">"../../transpilers/sass"</span>;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> preset = <span class="keyword">new</span> Preset(</span><br><span class="line">  <span class="string">"create-react-app"</span>,</span><br><span class="line">  [<span class="string">"web.js"</span>, <span class="string">"js"</span>, <span class="string">"json"</span>, <span class="string">"web.jsx"</span>, <span class="string">"jsx"</span>, <span class="string">"ts"</span>, <span class="string">"tsx"</span>],</span><br><span class="line">  &#123;</span><br><span class="line">    hasDotEnv: <span class="literal">true</span>,</span><br><span class="line">    setup: <span class="function"><span class="params">manager</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> babelOptions = &#123;</span><br><span class="line">        <span class="comment">/*..*/</span></span><br><span class="line">      &#125;;</span><br><span class="line">      preset.registerTranspiler(</span><br><span class="line">        <span class="built_in">module</span> =&gt;</span><br><span class="line">          /\.(t|j)sx?$/.test(<span class="built_in">module</span>.path) &amp;&amp; !<span class="built_in">module</span>.path.endsWith(<span class="string">".d.ts"</span>),</span><br><span class="line">        [</span><br><span class="line">          &#123;</span><br><span class="line">            transpiler: babelTranspiler,</span><br><span class="line">            options: babelOptions</span><br><span class="line">          &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="literal">true</span></span><br><span class="line">      );</span><br><span class="line">      preset.registerTranspiler(</span><br><span class="line">        <span class="built_in">module</span> =&gt; <span class="regexp">/\.svg$/</span>.test(<span class="built_in">module</span>.path),</span><br><span class="line">        [</span><br><span class="line">          &#123; <span class="attr">transpiler</span>: svgrTranspiler &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            transpiler: babelTranspiler,</span><br><span class="line">            options: babelOptions</span><br><span class="line">          &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="literal">true</span></span><br><span class="line">      );</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p><br></p>
<p>å¯ä»¥çœ‹å‡º, CodeSandboxçš„Presetå’ŒWebpackçš„é…ç½®é•¿çš„å·®ä¸å¤š. <strong>ä¸è¿‡, ç›®å‰ä½ åªèƒ½ä½¿ç”¨ CodeSandbox é¢„å®šä¹‰çš„ Preset, ä¸æ”¯æŒåƒ Webpack ä¸€æ ·è¿›è¡Œé…ç½®, ä¸ªäººè§‰å¾—è¿™ä¸ªæ˜¯ç¬¦åˆ CodeSandbox å®šä½çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªå¿«é€Ÿçš„åŸå‹å¼€å‘å·¥å…·ï¼Œä½ è¿˜æŠ˜è…¾ Webpack å¹²å˜›ï¼Ÿ</strong></p>
<p>ç›®å‰æ”¯æŒè¿™äº›Preset:</p>
<center><br> <img src="/images/08/presets.png" width="600"><br></center>

<p><br></p>
<hr>
<p><br></p>
<h2 id="åŸºæœ¬ç›®å½•ç»“æ„"><a href="#åŸºæœ¬ç›®å½•ç»“æ„" class="headerlink" title="åŸºæœ¬ç›®å½•ç»“æ„"></a>åŸºæœ¬ç›®å½•ç»“æ„</h2><p>CodeSandbox çš„å®¢æˆ·ç«¯æ˜¯å¼€æºçš„ï¼Œä¸ç„¶å°±æ²¡æœ‰æœ¬æ–‡äº†ï¼Œå®ƒçš„åŸºæœ¬ç›®å½•ç»“æ„å¦‚ä¸‹:</p>
<ul>
<li><strong>packages</strong><ul>
<li><strong>app</strong> CodeSandboxåº”ç”¨<ul>
<li><strong>app</strong> ç¼–è¾‘å™¨å®ç°</li>
<li><strong>embed</strong> ç½‘é¡µå†…åµŒè¿è¡Œ codesandbox</li>
<li><strong>sandbox</strong> è¿è¡Œæ²™ç›’ï¼Œåœ¨è¿™é‡Œæ‰§è¡Œä»£ç æ„å»ºå’Œé¢„è§ˆï¼Œç›¸å½“äºä¸€ä¸ªç¼©ç•¥ç‰ˆçš„ Webpack. è¿è¡Œåœ¨å•ç‹¬çš„ iframe ä¸­<ul>
<li>eval<ul>
<li>preset<ul>
<li>create-react-app</li>
<li>parcel</li>
<li>vue-cli</li>
<li>â€¦</li>
</ul>
</li>
<li>transpiler<ul>
<li>babel</li>
<li>sass</li>
<li>vue</li>
<li>â€¦</li>
</ul>
</li>
</ul>
</li>
<li>compile.ts ç¼–è¯‘å™¨</li>
</ul>
</li>
</ul>
</li>
<li><strong>common</strong> æ”¾ç½®é€šç”¨çš„ç»„ä»¶ã€å·¥å…·æ–¹æ³•ã€èµ„æº</li>
<li><strong>codesandbox-api</strong>: å°è£…äº†ç»Ÿä¸€çš„åè®®ï¼Œç”¨äº sandbox å’Œ editor ä¹‹é—´é€šä¿¡(åŸºäºpostmessage)</li>
<li><strong>codesandbox-browserfs</strong>: è¿™æ˜¯ä¸€ä¸ªæµè§ˆå™¨ç«¯çš„â€˜æ–‡ä»¶ç³»ç»Ÿâ€™ï¼Œæ¨¡æ‹Ÿäº† NodeJS çš„æ–‡ä»¶ç³»ç»Ÿ APIï¼Œæ”¯æŒåœ¨æœ¬åœ°æˆ–ä»å¤šä¸ªåç«¯æœåŠ¡ä¸­å­˜å‚¨æˆ–è·å–æ–‡ä»¶.</li>
<li><strong>react-sandpack</strong>: codesandboxå…¬å¼€çš„SDKï¼Œå¯ä»¥ç”¨äºè‡ªå®šä¹‰è‡ªå·±çš„codesandbox</li>
</ul>
</li>
</ul>
<p><a href="https://github.com/codesandbox/codesandbox-client" target="_blank" rel="noopener">æºç åœ¨è¿™</a></p>
<p><br></p>
<hr>
<p><br></p>
<h2 id="é¡¹ç›®æ„å»ºè¿‡ç¨‹"><a href="#é¡¹ç›®æ„å»ºè¿‡ç¨‹" class="headerlink" title="é¡¹ç›®æ„å»ºè¿‡ç¨‹"></a>é¡¹ç›®æ„å»ºè¿‡ç¨‹</h2><p><code>packager -&gt; transpilation -&gt; evaluation</code></p>
<p>Sandbox æ„å»ºåˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µ:</p>
<ul>
<li><strong>Packager</strong> åŒ…åŠ è½½é˜¶æ®µï¼Œä¸‹è½½å’Œå¤„ç†æ‰€æœ‰npmæ¨¡å—ä¾èµ–</li>
<li><strong>Transpilation</strong> è½¬è¯‘é˜¶æ®µï¼Œè½¬è¯‘æ‰€æœ‰å˜åŠ¨çš„ä»£ç , æ„å»ºæ¨¡å—ä¾èµ–å›¾</li>
<li><strong>Evaluation</strong> æ‰§è¡Œé˜¶æ®µï¼Œä½¿ç”¨ <code>eval</code> è¿è¡Œæ¨¡å—ä»£ç è¿›è¡Œé¢„è§ˆ</li>
</ul>
<p>ä¸‹é¢ä¼šæŒ‰ç…§ä¸Šè¿°çš„æ­¥éª¤æ¥æè¿°å…¶ä¸­çš„æŠ€æœ¯ç‚¹</p>
<p><br><br><br></p>
<h3 id="packager"><a href="#packager" class="headerlink" title="Packager"></a>Packager</h3><p>å°½ç®¡ npm æ˜¯ä¸ªâ€™é»‘æ´â€™ï¼Œæˆ‘ä»¬è¿˜æ˜¯ç¦»ä¸å¼€å®ƒã€‚ å…¶å®å¤§æ¦‚åˆ†æä¸€ä¸‹å‰ç«¯é¡¹ç›®çš„ <code>node_modules</code>ï¼Œ80%æ˜¯å„ç§å¼€å‘ä¾èµ–ç»„æˆçš„. </p>
<p>ç”±äº CodeSandbox å·²ç»åŒ…æ½äº†ä»£ç æ„å»ºçš„éƒ¨åˆ†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¹¶ä¸éœ€è¦<code>devDependencies</code>, ä¹Ÿå°±æ˜¯è¯´ <strong>åœ¨CodeSandbox ä¸­æˆ‘ä»¬åªéœ€è¦å®‰è£…æ‰€æœ‰å®é™…ä»£ç è¿è¡Œéœ€è¦çš„ä¾èµ–ï¼Œè¿™å¯ä»¥å‡å°‘æˆç™¾ä¸Šåƒçš„ä¾èµ–ä¸‹è½½. æ‰€ä»¥æš‚ä¸”ä¸ç”¨æ‹…å¿ƒæµè§ˆå™¨ä¼šæ‰›ä¸ä½</strong>.</p>
<p><br></p>
<h4 id="webpackdllplugin"><a href="#webpackdllplugin" class="headerlink" title="WebpackDllPlugin"></a>WebpackDllPlugin</h4><p>CodeSandbox çš„ä¾èµ–æ‰“åŒ…æ–¹å¼å— <code>WebpackDllPlugin</code> å¯å‘ï¼ŒDllPlugin ä¼šå°†æ‰€æœ‰ä¾èµ–éƒ½æ‰“åŒ…åˆ°ä¸€ä¸ª<code>dll</code>æ–‡ä»¶ä¸­ï¼Œå¹¶åˆ›å»ºä¸€ä¸ª <code>manifest</code> æ–‡ä»¶æ¥æè¿°dllçš„å…ƒæ•°æ®(å¦‚ä¸‹å›¾).</p>
<p>Webpack è½¬è¯‘æ—¶æˆ–è€… è¿è¡Œæ—¶å¯ä»¥æ ¹æ® manifest ä¸­çš„æ¨¡å—ç´¢å¼•(ä¾‹å¦‚<code>__webpack_require__(&#39;../node_modules/react/index.js&#39;)</code>)æ¥åŠ è½½ dll ä¸­çš„æ¨¡å—ã€‚ å› ä¸º<code>WebpackDllPlugin</code>æ˜¯åœ¨è¿è¡Œæˆ–è½¬è¯‘ä¹‹å‰é¢„å…ˆå¯¹ä¾èµ–çš„è¿›è¡Œè½¬è¯‘ï¼Œæ‰€ä»¥åœ¨é¡¹ç›®ä»£ç è½¬è¯‘é˜¶æ®µå¯ä»¥å¿½ç•¥æ‰è¿™éƒ¨åˆ†ä¾èµ–ä»£ç ï¼Œè¿™æ ·å¯ä»¥æé«˜æ„å»ºçš„é€Ÿåº¦(çœŸå®åœºæ™¯å¯¹npmä¾èµ–è¿›è¡ŒDllæ‰“åŒ…æé€Ÿæ•ˆæœå¹¶ä¸å¤§):</p>
<center><br>  <img src="/images/08/dll.png"><br></center>

<p>manifestæ–‡ä»¶</p>
<center><br>  <img src="/images/08/webpack-dll-manifest.png" width="500"><br></center>

<p><br></p>
<h4 id="åœ¨çº¿æ‰“åŒ…æœåŠ¡"><a href="#åœ¨çº¿æ‰“åŒ…æœåŠ¡" class="headerlink" title="åœ¨çº¿æ‰“åŒ…æœåŠ¡"></a>åœ¨çº¿æ‰“åŒ…æœåŠ¡</h4><p>åŸºäºè¿™ä¸ªæ€æƒ³, CodeSandbox æ„å»ºäº†è‡ªå·±çš„åœ¨çº¿æ‰“åŒ…æœåŠ¡, å’ŒWebpackDllPluginä¸ä¸€æ ·çš„æ˜¯ï¼ŒCodeSandboxæ˜¯åœ¨æœåŠ¡ç«¯é¢„å…ˆæ„å»ºManifestæ–‡ä»¶çš„, è€Œä¸”ä¸åŒºåˆ†Dllå’Œmanifestæ–‡ä»¶ã€‚ å…·ä½“æ€è·¯å¦‚ä¸‹:</p>
<center><br> <img src="/images/08/packager1.png" width="800"><br></center>

<p>ç®€è€Œè¨€ä¹‹ï¼ŒCodeSandbox å®¢æˆ·ç«¯æ‹¿åˆ°<code>package.json</code>ä¹‹åï¼Œå°†<code>dependencies</code>è½¬æ¢ä¸ºä¸€ä¸ªç”±ä¾èµ–å’Œç‰ˆæœ¬å·ç»„æˆçš„<code>Combination</code>(æ ‡è¯†ç¬¦, ä¾‹å¦‚ <a href="https://d1jyvh0kxilfa7.cloudfront.net/v1/combinations/babel-runtime@7.3.1%2Bcsbbust@1.0.0%2Breact@16.8.4%2Breact-dom@16.8.4%2Breact-router@5.0.1%2Breact-router-dom@5.0.1%2Breact-split-pane@0.1.87.json" target="_blank" rel="noopener"><code>v1/combinations/babel-runtime@7.3.1&amp;csbbust@1.0.0&amp;react@16.8.4&amp;react-dom@16.8.4&amp;react-router@5.0.1&amp;react-router-dom@5.0.1&amp;react-split-pane@0.1.87.json</code></a>), å†æ‹¿è¿™ä¸ª Combination åˆ°æœåŠ¡å™¨è¯·æ±‚ã€‚æœåŠ¡å™¨ä¼šæ ¹æ® Combination ä½œä¸ºç¼“å­˜é”®æ¥ç¼“å­˜æ‰“åŒ…ç»“æœï¼Œå¦‚æœæ²¡æœ‰å‘½ä¸­ç¼“å­˜ï¼Œåˆ™è¿›è¡Œæ‰“åŒ….</p>
<p><strong>æ‰“åŒ…å®é™…ä¸Šè¿˜æ˜¯ä½¿ç”¨<code>yarn</code>æ¥ä¸‹è½½æ‰€æœ‰ä¾èµ–ï¼Œåªä¸è¿‡è¿™é‡Œä¸ºäº†å‰”é™¤ npm æ¨¡å—ä¸­å¤šä½™çš„æ–‡ä»¶ï¼ŒæœåŠ¡ç«¯è¿˜éå†äº†æ‰€æœ‰ä¾èµ–çš„å…¥å£æ–‡ä»¶(package.json#main), è§£æ AST ä¸­çš„ require è¯­å¥ï¼Œé€’å½’è§£æè¢« require æ¨¡å—. æœ€ç»ˆå½¢æˆä¸€ä¸ªä¾èµ–å›¾, åªä¿ç•™å¿…è¦çš„æ–‡ä»¶</strong>. </p>
<p>æœ€ç»ˆè¾“å‡º Manifest æ–‡ä»¶ï¼Œå®ƒçš„ç»“æ„å¤§æ¦‚å¦‚ä¸‹, ä»–å°±ç›¸å½“äºWebpackDllPluginçš„dll.js+manifest.jsonçš„ç»“åˆä½“:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// æ¨¡å—å†…å®¹</span></span><br><span class="line">  <span class="string">"contents"</span>: &#123;</span><br><span class="line">    <span class="string">"/node_modules/react/index.js"</span>: &#123;</span><br><span class="line">      <span class="string">"content"</span>: <span class="string">"'use strict';â†µâ†µif ...."</span>, <span class="comment">// ä»£ç å†…å®¹</span></span><br><span class="line">      <span class="string">"requires"</span>: [                        <span class="comment">// ä¾èµ–çš„å…¶ä»–æ¨¡å—</span></span><br><span class="line">        <span class="string">"./cjs/react.development.js"</span>,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"/node_modules/react-dom/index.js"</span>: &#123;<span class="comment">/*..*/</span>&#125;,</span><br><span class="line">    <span class="string">"/node_modules/react/package.json"</span>: &#123;<span class="comment">/*...*/</span>&#125;,</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// æ¨¡å—å…·ä½“å®‰è£…ç‰ˆæœ¬å·</span></span><br><span class="line">  <span class="string">"dependencies"</span>: [&#123;<span class="attr">name</span>: <span class="string">"@babel/runtime"</span>, <span class="attr">version</span>: <span class="string">"7.3.1"</span>&#125;, &#123;<span class="attr">name</span>: <span class="string">"csbbust"</span>, <span class="attr">version</span>: <span class="string">"1.0.0"</span>&#125;,<span class="comment">/*â€¦*/</span>],</span><br><span class="line">  <span class="comment">// æ¨¡å—åˆ«å, æ¯”å¦‚å°†reactä½œä¸ºpreact-compatçš„åˆ«å</span></span><br><span class="line">  <span class="string">"dependencyAliases"</span>: &#123;&#125;,</span><br><span class="line">  <span class="comment">// ä¾èµ–çš„ä¾èµ–, å³é—´æ¥ä¾èµ–ä¿¡æ¯. è¿™äº›ä¿¡æ¯å¯ä»¥ä»yarn.lockè·å–</span></span><br><span class="line">  <span class="string">"dependencyDependencies"</span>: &#123;</span><br><span class="line">    <span class="string">"object-assign"</span>: &#123;</span><br><span class="line">      <span class="string">"entries"</span>: [<span class="string">"object-assign"</span>], <span class="comment">// æ¨¡å—å…¥å£</span></span><br><span class="line">      <span class="string">"parents"</span>: [<span class="string">"react"</span>, <span class="string">"prop-types"</span>, <span class="string">"scheduler"</span>, <span class="string">"react-dom"</span>], <span class="comment">// çˆ¶æ¨¡å—</span></span><br><span class="line">      <span class="string">"resolved"</span>: <span class="string">"4.1.1"</span>,</span><br><span class="line">      <span class="string">"semver"</span>: <span class="string">"^4.1.1"</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<blockquote>
<p><strong>Serverless æ€æƒ³</strong><br><br><br>å€¼å¾—ä¸€æçš„æ˜¯ CodeSandbox çš„ Packager åç«¯ä½¿ç”¨äº† Serverless(åŸºäº AWS Lambda)ï¼ŒåŸºäº Serverless çš„æ¶æ„è®© Packager æœåŠ¡æ›´å…·ä¼¸ç¼©æ€§ï¼Œå¯ä»¥çµæ´»åœ°åº”ä»˜é«˜å¹¶å‘çš„åœºæ™¯ã€‚ä½¿ç”¨ Serverless ä¹‹å Packager çš„å“åº”æ—¶é—´æ˜¾è‘—æé«˜ï¼Œè€Œä¸”è´¹ç”¨ä¹Ÿä¸‹å»äº†ã€‚</p>
</blockquote>
<blockquote>
<p>Packager ä¹Ÿæ˜¯å¼€æºçš„, <a href="https://github.com/codesandbox/dependency-packager" target="_blank" rel="noopener">å›´è§‚</a></p>
</blockquote>
<p><br></p>
<h4 id="å›é€€æ–¹æ¡ˆ"><a href="#å›é€€æ–¹æ¡ˆ" class="headerlink" title="å›é€€æ–¹æ¡ˆ"></a>å›é€€æ–¹æ¡ˆ</h4><p>AWS Lambdaå‡½æ•°æ˜¯æœ‰å±€é™æ€§çš„, æ¯”å¦‚<code>/tmp</code>æœ€å¤šåªèƒ½æœ‰ 500MB çš„ç©ºé—´. å°½ç®¡å¤§éƒ¨åˆ†ä¾èµ–æ‰“åŒ…åœºæ™¯ä¸ä¼šè¶…è¿‡è¿™ä¸ªé™é¢, ä¸ºäº†å¢å¼ºå¯é æ€§(æ¯”å¦‚ä¸Šè¿°çš„æ–¹æ¡ˆå¯èƒ½å‡ºé”™ï¼Œä¹Ÿå¯èƒ½æ¼æ‰ä¸€äº›æ¨¡å—), Packagerè¿˜æœ‰å›é€€æ–¹æ¡ˆ.</p>
<p>åæ¥CodeSanboxä½œè€…å¼€å‘äº†æ–°çš„Sandboxï¼Œæ”¯æŒæŠŠåŒ…ç®¡ç†çš„æ­¥éª¤æ”¾ç½®åˆ°æµè§ˆå™¨ç«¯, å’Œä¸Šé¢çš„æ‰“åŒ…æ–¹å¼ç»“åˆç€ä½¿ç”¨ã€‚åŸç†ä¹Ÿæ¯”è¾ƒç®€å•: <strong>åœ¨è½¬è¯‘ä¸€ä¸ªæ¨¡å—æ—¶ï¼Œå¦‚æœå‘ç°æ¨¡å—ä¾èµ–çš„npmæ¨¡å—æœªæ‰¾åˆ°ï¼Œåˆ™æƒ°æ€§ä»è¿œç¨‹ä¸‹è½½å›æ¥</strong>. æ¥çœ‹çœ‹å®ƒæ˜¯æ€ä¹ˆå¤„ç†çš„:</p>
<center><br> <img src="/images/08/packager2.png"><br></center>

<p>åœ¨å›é€€æ–¹æ¡ˆä¸­CodeSandbox å¹¶ä¸ä¼šå°† package.json ä¸­æ‰€æœ‰çš„åŒ…éƒ½ä¸‹è½½ä¸‹æ¥ï¼Œè€Œæ˜¯åœ¨æ¨¡å—æŸ¥æ‰¾å¤±è´¥æ—¶ï¼Œæƒ°æ€§çš„å»åŠ è½½ã€‚æ¯”å¦‚åœ¨è½¬è¯‘å…¥å£æ–‡ä»¶æ—¶ï¼Œå‘ç° react è¿™ä¸ªæ¨¡å—æ²¡æœ‰åœ¨æœ¬åœ°ç¼“å­˜æ¨¡å—é˜Ÿåˆ—ä¸­ï¼Œè¿™æ—¶å€™å°±ä¼šåˆ°è¿œç¨‹å°†å®ƒä¸‹è½½å›æ¥ï¼Œç„¶åæ¥ç€è½¬è¯‘ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå› ä¸ºåœ¨è½¬è¯‘é˜¶æ®µä¼šé™æ€åˆ†ææ¨¡å—çš„ä¾èµ–ï¼Œåªéœ€è¦å°†çœŸæ­£ä¾èµ–çš„æ–‡ä»¶ä¸‹è½½å›æ¥ï¼Œè€Œä¸éœ€è¦å°†æ•´ä¸ªnpmåŒ…ä¸‹è½½å›æ¥ï¼ŒèŠ‚çœäº†ç½‘ç»œä¼ è¾“çš„æˆæœ¬.</p>
<p>CodeSandbox é€šè¿‡ <code>unpkg.com</code> æˆ– <code>cdn.jsdelivr.net</code> æ¥è·å–æ¨¡å—çš„ä¿¡æ¯ä»¥åŠä¸‹è½½æ–‡ä»¶, ä¾‹å¦‚</p>
<ul>
<li>è·å– package.json: <code>https://unpkg.com/react@latest/package.json</code></li>
<li>åŒ…ç›®å½•ç»“æ„è·å–: <code>https://unpkg.com/antd@3.17.0/?meta</code> è¿™ä¸ªä¼šé€’å½’è¿”å›è¯¥åŒ…çš„æ‰€æœ‰ç›®å½•ä¿¡æ¯</li>
<li>å…·ä½“æ–‡ä»¶ä¸‹è½½: <code>https://unpkg.com/react@16.8.6/cjs/react.production.min.js</code> æˆ–è€… <code>https://cdn.jsdelivr.net/npm/@babel/runtime@7.3.1/helpers/interopRequireDefault.js</code></li>
</ul>
<p><br></p>
<hr>
<p><br></p>
<h3 id="transpilation"><a href="#transpilation" class="headerlink" title="Transpilation"></a>Transpilation</h3><p>è®²å®Œ Packager ç°åœ¨æ¥çœ‹ä¸€ä¸‹ Transpilation, è¿™ä¸ªé˜¶æ®µ<strong>ä»åº”ç”¨çš„å…¥å£æ–‡ä»¶å¼€å§‹, å¯¹æºä»£ç è¿›è¡Œè½¬è¯‘, è§£æASTï¼Œæ‰¾å‡ºä¸‹çº§ä¾èµ–æ¨¡å—ï¼Œç„¶åé€’å½’è½¬è¯‘ï¼Œæœ€ç»ˆå½¢æˆä¸€ä¸ªâ€™ä¾èµ–å›¾â€™</strong>:</p>
<center><br>  <img src="/images/08/transpile-dependency-graph.png"><br></center>


<p>CodeSandbox çš„æ•´ä¸ªè½¬è¯‘å™¨æ˜¯åœ¨ä¸€ä¸ªå•ç‹¬çš„ iframe ä¸­è¿è¡Œçš„ï¼š</p>
<center><br>  <img src="/images/08/editor-vs-compiler.png"><br></center>

<p>Editor è´Ÿè´£å˜æ›´æºä»£ç ï¼Œæºä»£ç å˜æ›´ä¼šé€šè¿‡ postmessage ä¼ é€’ç»™ Compilerï¼Œè¿™é‡Œé¢ä¼šæºå¸¦ <code>Module+template</code></p>
<ul>
<li><strong>Module</strong> ä¸­åŒ…å«æ‰€æœ‰æºä»£ç å†…å®¹å’Œæ¨¡å—è·¯å¾„ï¼Œå…¶ä¸­è¿˜åŒ…å« package.json, Compiler ä¼šæ ¹æ® package.json æ¥è¯»å– npm ä¾èµ–;</li>
<li><strong>template</strong> è¡¨ç¤º Compiler çš„ Presetï¼Œä¾‹å¦‚<code>create-react-app</code>ã€<code>vue-cli</code>, å®šä¹‰äº†ä¸€äº› loader è§„åˆ™ï¼Œç”¨æ¥è½¬è¯‘ä¸åŒç±»å‹çš„æ–‡ä»¶, å¦å¤–presetä¹Ÿå†³å®šäº†åº”ç”¨çš„æ¨¡æ¿å’Œå…¥å£æ–‡ä»¶ã€‚ é€šè¿‡ä¸Šæ–‡æˆ‘ä»¬çŸ¥é“, è¿™äº› template ç›®å‰çš„é¢„å®šä¹‰çš„.</li>
</ul>
<p><br></p>
<h4 id="åŸºæœ¬å¯¹è±¡"><a href="#åŸºæœ¬å¯¹è±¡" class="headerlink" title="åŸºæœ¬å¯¹è±¡"></a>åŸºæœ¬å¯¹è±¡</h4><p>åœ¨è¯¦ç»†ä»‹ç» Transpilation ä¹‹å‰å…ˆå¤§æ¦‚çœ‹ä¸€äº›åŸºæœ¬å¯¹è±¡ï¼Œäº†è§£è¿™äº›å¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼š</p>
<center><br> <img src="/images/08/baseobj.png"><br></center>

<ul>
<li><strong>Manager</strong> è¿™æ˜¯ Sandbox çš„æ ¸å¿ƒå¯¹è±¡ï¼Œè´Ÿè´£ç®¡ç†é…ç½®ä¿¡æ¯(Preset)ã€é¡¹ç›®ä¾èµ–(Manifest)ã€ä»¥åŠç»´æŠ¤é¡¹ç›®æ‰€æœ‰æ¨¡å—(TranspilerModule)</li>
<li><strong>Manifest</strong> é€šè¿‡ä¸Šæ–‡çš„ Packager æˆ‘ä»¬çŸ¥é“ï¼ŒManifest ç»´æŠ¤æ‰€æœ‰ä¾èµ–çš„ npm æ¨¡å—ä¿¡æ¯</li>
<li><strong>TranspiledModule</strong> è¡¨ç¤ºæ¨¡å—æœ¬èº«ã€‚è¿™é‡Œé¢ç»´æŠ¤è½¬è¯‘çš„ç»“æœã€ä»£ç æ‰§è¡Œçš„ç»“æœã€ä¾èµ–çš„æ¨¡å—ä¿¡æ¯ï¼Œè´Ÿè´£é©±åŠ¨å…·ä½“æ¨¡å—çš„è½¬è¯‘(è°ƒç”¨ Transpiler)å’Œæ‰§è¡Œ</li>
<li><strong>Preset</strong> ä¸€ä¸ªé¡¹ç›®æ„å»ºæ¨¡æ¿ï¼Œä¾‹å¦‚ <code>vue-cli</code>ã€<code>create-react-app</code>. é…ç½®äº†é¡¹ç›®æ–‡ä»¶çš„è½¬è¯‘è§„åˆ™, ä»¥åŠåº”ç”¨çš„ç›®å½•ç»“æ„(å…¥å£æ–‡ä»¶)</li>
<li><strong>Transpiler</strong> ç­‰ä»·äº Webpack çš„ loaderï¼Œè´Ÿè´£å¯¹æŒ‡å®šç±»å‹çš„æ–‡ä»¶è¿›è¡Œè½¬è¯‘ã€‚ä¾‹å¦‚ babelã€typescriptã€pugã€sass ç­‰ç­‰</li>
<li><strong>WorkerTranspiler</strong> è¿™æ˜¯ Transpiler çš„å­ç±»ï¼Œè°ƒåº¦ä¸€ä¸ª Workeræ± æ¥æ‰§è¡Œè½¬è¯‘ä»»åŠ¡ï¼Œä»è€Œæé«˜è½¬è¯‘çš„æ€§èƒ½</li>
</ul>
<p><br></p>
<h4 id="manager"><a href="#manager" class="headerlink" title="Manager"></a>Manager</h4><p>Manageræ˜¯ä¸€ä¸ªç®¡ç†è€…çš„è§’è‰²ï¼Œä»å¤§å±€ä¸ŠæŠŠæ§æ•´ä¸ªè½¬è¯‘å’Œæ‰§è¡Œçš„æµç¨‹. ç°åœ¨æ¥çœ‹çœ‹æ•´ä½“çš„è½¬è¯‘æµç¨‹ï¼š</p>
<center><br> <img src="/images/08/compiler.png"><br></center>

<p>å¤§å±€ä¸ŠåŸºæœ¬ä¸Šå¯ä»¥åˆ’åˆ†ä¸ºä»¥ä¸‹å››ä¸ªé˜¶æ®µ:</p>
<ul>
<li><strong>é…ç½®é˜¶æ®µ</strong>ï¼šé…ç½®é˜¶æ®µä¼šåˆ›å»º Preset å¯¹è±¡ï¼Œç¡®å®šå…¥å£æ–‡ä»¶ç­‰ç­‰. CodeSandbox ç›®å‰åªæ”¯æŒé™å®šçš„å‡ ç§åº”ç”¨æ¨¡æ¿ï¼Œä¾‹å¦‚ vue-cliã€create-react-appã€‚ä¸åŒæ¨¡æ¿ä¹‹é—´ç›®å½•ç»“æ„çš„çº¦å®šæ˜¯ä¸ä¸€æ ·çš„ï¼Œä¾‹å¦‚å…¥å£æ–‡ä»¶å’Œ html æ¨¡æ¿æ–‡ä»¶ã€‚å¦å¤–æ–‡ä»¶å¤„ç†çš„è§„åˆ™ä¹Ÿä¸ä¸€æ ·ï¼Œæ¯”å¦‚ vue-cli éœ€è¦å¤„ç†<code>.vue</code>æ–‡ä»¶ã€‚</li>
<li><strong>ä¾èµ–ä¸‹è½½é˜¶æ®µ</strong>ï¼š å³ Packager é˜¶æ®µï¼Œä¸‹è½½é¡¹ç›®çš„æ‰€æœ‰ä¾èµ–ï¼Œç”Ÿæˆ Manifest å¯¹è±¡</li>
<li><strong>å˜åŠ¨è®¡ç®—é˜¶æ®µ</strong>ï¼šæ ¹æ® Editor ä¼ é€’è¿‡æ¥çš„æºä»£ç ï¼Œè®¡ç®—æ–°å¢ã€æ›´æ–°ã€ç§»é™¤çš„æ¨¡å—ã€‚</li>
<li><strong>è½¬è¯‘é˜¶æ®µ</strong>ï¼šçœŸæ­£å¼€å§‹è½¬è¯‘äº†ï¼Œé¦–å…ˆé‡æ–°è½¬è¯‘ä¸Šä¸ªé˜¶æ®µè®¡ç®—å‡ºæ¥çš„éœ€è¦æ›´æ–°çš„æ¨¡å—ã€‚æ¥ç€ä»å…¥å£æ–‡ä»¶ä½œä¸ºå‡ºå‘ç‚¹ï¼Œè½¬è¯‘å’Œæ„å»ºæ–°çš„ä¾èµ–å›¾ã€‚è¿™é‡Œä¸ä¼šé‡å¤è½¬è¯‘æ²¡æœ‰å˜åŒ–çš„æ¨¡å—ä»¥åŠå…¶å­æ¨¡å—</li>
</ul>
<p><br><br><br></p>
<h4 id="transpiledmodule"><a href="#transpiledmodule" class="headerlink" title="TranspiledModule"></a>TranspiledModule</h4><p>TranspiledModuleç”¨äºç®¡ç†æŸä¸ªå…·ä½“çš„æ¨¡å—ï¼Œè¿™é‡Œé¢ä¼šç»´æŠ¤è½¬è¯‘å’Œè¿è¡Œçš„ç»“æœã€æ¨¡å—çš„ä¾èµ–ä¿¡æ¯ï¼Œå¹¶é©±åŠ¨æ¨¡å—çš„è½¬è¯‘å’Œæ‰§è¡Œï¼š</p>
<center><br> <img src="/images/08/transpiled-module.png"><br></center>

<p>TranspiledModule ä¼šä»Presetä¸­è·å–åŒ¹é…å½“å‰æ¨¡å—çš„Transpileråˆ—è¡¨çš„ï¼Œéå†Transpilerå¯¹æºä»£ç è¿›è¡Œè½¬è¯‘ï¼Œè½¬è¯‘çš„è¿‡ç¨‹ä¸­ä¼šè§£æASTï¼Œåˆ†ææ¨¡å—å¯¼å…¥è¯­å¥, æ”¶é›†æ–°çš„ä¾èµ–; å½“æ¨¡å—è½¬è¯‘å®Œæˆåï¼Œä¼šé€’å½’è½¬è¯‘ä¾èµ–åˆ—è¡¨ã€‚ æ¥çœ‹çœ‹å¤§æ¦‚çš„ä»£ç ï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> transpile(manager: Manager) &#123;</span><br><span class="line">  <span class="comment">// å·²è½¬è¯‘</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.source)  <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">  <span class="comment">// é¿å…é‡å¤è½¬è¯‘, ä¸€ä¸ªæ¨¡å—åªè½¬è¯‘ä¸€æ¬¡</span></span><br><span class="line">  <span class="keyword">if</span> (manager.transpileJobs[<span class="keyword">this</span>.getId()]) <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  manager.transpileJobs[<span class="keyword">this</span>.getId()] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...é‡ç½®çŠ¶æ€ </span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ğŸ”´ä»Presetè·å–Transpileråˆ—è¡¨</span></span><br><span class="line">  <span class="keyword">const</span> transpilers = manager.preset.getLoaders(<span class="keyword">this</span>.module, <span class="keyword">this</span>.query);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ğŸ”´ é“¾å¼è°ƒç”¨Transpiler</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; transpilers.length; i += <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> transpilerConfig = transpilers[i];</span><br><span class="line">    <span class="comment">// ğŸ”´æ„å»ºLoaderContextï¼Œè§ä¸‹æ–‡</span></span><br><span class="line">    <span class="keyword">const</span> loaderContext = <span class="keyword">this</span>.getLoaderContext(</span><br><span class="line">      manager,</span><br><span class="line">      transpilerConfig.options || &#123;&#125;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ğŸ”´è°ƒç”¨Transpilerè½¬è¯‘æºä»£ç </span></span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">      transpiledCode,</span><br><span class="line">      sourceMap,</span><br><span class="line">    &#125; = <span class="keyword">await</span> transpilerConfig.transpiler.transpile(code, loaderContext); <span class="comment">// eslint-disable-line no-await-in-loop</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.errors.length) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">this</span>.errors[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.logWarnings();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> <span class="built_in">Promise</span>.all(</span><br><span class="line">    <span class="keyword">this</span>.asyncDependencies.map(<span class="keyword">async</span> p =&gt; &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> tModule = <span class="keyword">await</span> p;</span><br><span class="line">        <span class="keyword">this</span>.dependencies.add(tModule);</span><br><span class="line">        tModule.initiators.add(<span class="keyword">this</span>);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="comment">/* let this handle at evaluation */</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">this</span>.asyncDependencies = [];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ğŸ”´é€’å½’è½¬è¯‘ä¾èµ–çš„æ¨¡å—</span></span><br><span class="line">  <span class="keyword">await</span> <span class="built_in">Promise</span>.all(</span><br><span class="line">    flattenDeep([</span><br><span class="line">      ...Array.from(<span class="keyword">this</span>.transpilationInitiators).map(<span class="function"><span class="params">t</span> =&gt;</span></span><br><span class="line">        t.transpile(manager)</span><br><span class="line">      ),</span><br><span class="line">      ...Array.from(<span class="keyword">this</span>.dependencies).map(<span class="function"><span class="params">t</span> =&gt;</span> t.transpile(manager)),</span><br><span class="line">    ])</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br><br><br></p>
<h4 id="transpiler"><a href="#transpiler" class="headerlink" title="Transpiler"></a>Transpiler</h4><p>Transpilerç­‰ä»·äºwebpackçš„loaderï¼Œå®ƒé…ç½®æ–¹å¼ä»¥åŠåŸºæœ¬APIä¹Ÿå’Œwebpack(æŸ¥çœ‹<a href="https://webpack.docschina.org/api/loaders/" target="_blank" rel="noopener">webpackçš„loader API</a>)å¤§æ¦‚ä¿æŒä¸€è‡´ï¼Œæ¯”å¦‚é“¾å¼è½¬è¯‘å’Œloader-context. æ¥çœ‹ä¸€ä¸‹Transpilerçš„åŸºæœ¬å®šä¹‰ï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">abstract</span> <span class="keyword">class</span> Transpiler &#123;</span><br><span class="line">  initialize() &#123;&#125;</span><br><span class="line"></span><br><span class="line">  dispose() &#123;&#125;</span><br><span class="line"></span><br><span class="line">  cleanModule(loaderContext: LoaderContext) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ğŸ”´ ä»£ç è½¬æ¢</span></span><br><span class="line">  transpile(</span><br><span class="line">    code: <span class="built_in">string</span>,</span><br><span class="line">    loaderContext: LoaderContext</span><br><span class="line">  ): <span class="built_in">Promise</span>&lt;TranspilerResult&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.doTranspilation(code, loaderContext);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ğŸ”´ æŠ½è±¡æ–¹æ³•ï¼Œç”±å…·ä½“å­ç±»å®ç°</span></span><br><span class="line">  <span class="keyword">abstract</span> doTranspilation(</span><br><span class="line">    code: <span class="built_in">string</span>,</span><br><span class="line">    loaderContext: LoaderContext</span><br><span class="line">  ): <span class="built_in">Promise</span>&lt;TranspilerResult&gt;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<p>Transpilerçš„æ¥å£å¾ˆç®€å•ï¼Œ<code>transpile</code>æ¥å—ä¸¤ä¸ªå‚æ•°: </p>
<ul>
<li><code>code</code>å³æºä»£ç .</li>
<li><p><code>loaderContext</code> ç”±TranspiledModuleæä¾›, å¯ä»¥ç”¨æ¥è®¿é—®ä¸€ä¸‹è½¬è¯‘ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œæ¯”å¦‚Transpilerçš„é…ç½®ã€ æ¨¡å—æŸ¥æ‰¾ã€æ³¨å†Œä¾èµ–ç­‰ç­‰ã€‚å¤§æ¦‚å¤–å½¢å¦‚ä¸‹:</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> LoaderContext = &#123;</span><br><span class="line">  <span class="comment">// ğŸ”´ ä¿¡æ¯æŠ¥å‘Š</span></span><br><span class="line">  emitWarning: <span class="function">(<span class="params">warning: WarningStructure</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  emitError: <span class="function">(<span class="params">error: <span class="built_in">Error</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  emitModule: <span class="function">(<span class="params">title: <span class="built_in">string</span>, code: <span class="built_in">string</span>, currentPath?: <span class="built_in">string</span>, overwrite?: <span class="built_in">boolean</span>, isChild?: <span class="built_in">boolean</span></span>) =&gt;</span> TranspiledModule;</span><br><span class="line">  emitFile: <span class="function">(<span class="params">name: <span class="built_in">string</span>, content: <span class="built_in">string</span>, sourceMap: SourceMap</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  <span class="comment">// ğŸ”´ é…ç½®ä¿¡æ¯</span></span><br><span class="line">  options: &#123;</span><br><span class="line">    context: <span class="built_in">string</span>;</span><br><span class="line">    config?: object;</span><br><span class="line">    [key: <span class="built_in">string</span>]: <span class="built_in">any</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  sourceMap: <span class="built_in">boolean</span>;</span><br><span class="line">  target: <span class="built_in">string</span>;</span><br><span class="line">  path: <span class="built_in">string</span>;</span><br><span class="line">  addTranspilationDependency: <span class="function">(<span class="params">depPath: <span class="built_in">string</span>, options?: &#123; isAbsolute?: <span class="built_in">boolean</span>; isEntry?: <span class="built_in">boolean</span>; &#125;</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  resolveTranspiledModule: <span class="function">(<span class="params"> depPath: <span class="built_in">string</span>, options?: &#123; isAbsolute?: <span class="built_in">boolean</span>; ignoredExtensions?: <span class="built_in">Array</span>&lt;<span class="built_in">string</span>&gt;; &#125;</span>) =&gt;</span> TranspiledModule;</span><br><span class="line">  resolveTranspiledModuleAsync: <span class="function">(<span class="params"> depPath: <span class="built_in">string</span>, options?: &#123; isAbsolute?: <span class="built_in">boolean</span>; ignoredExtensions?: <span class="built_in">Array</span>&lt;<span class="built_in">string</span>&gt;; &#125;</span>) =&gt;</span> <span class="built_in">Promise</span>&lt;TranspiledModule&gt;;</span><br><span class="line">   <span class="comment">// ğŸ”´ ä¾èµ–æ”¶é›†</span></span><br><span class="line">  addDependency: <span class="function">(<span class="params"> depPath: <span class="built_in">string</span>, options?: &#123; isAbsolute?: <span class="built_in">boolean</span>; isEntry?: <span class="built_in">boolean</span>; &#125;</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  addDependenciesInDirectory: <span class="function">(<span class="params"> depPath: <span class="built_in">string</span>, options?: &#123; isAbsolute?: <span class="built_in">boolean</span>; isEntry?: <span class="built_in">boolean</span>; &#125;</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  _module: TranspiledModule;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><br><br><br></p>
<p>å…ˆä»ç®€å•çš„å¼€å§‹ï¼Œæ¥çœ‹çœ‹JSONæ¨¡å—çš„Transpilerå®ç°, æ¯ä¸ªTranspilerå­ç±»éœ€è¦å®ç°doTranspilationï¼Œæ¥æ”¶æºä»£ç ï¼Œå¹¶å¼‚æ­¥è¿”å›å¤„ç†ç»“æœï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> JSONTranspiler <span class="keyword">extends</span> Transpiler &#123;</span><br><span class="line">  doTranspilation(code: <span class="built_in">string</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="string">`</span></span><br><span class="line"><span class="string">      module.exports = JSON.parse(<span class="subst">$&#123;JSON.stringify(code || '')&#125;</span>)</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(&#123;</span><br><span class="line">      transpiledCode: result,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br><br><br></p>
<h4 id="babeltranspiler"><a href="#babeltranspiler" class="headerlink" title="BabelTranspiler"></a>BabelTranspiler</h4><p>å¹¶ä¸æ˜¯æ‰€æœ‰æ¨¡å—éƒ½åƒJSONè¿™ä¹ˆç®€å•ï¼Œæ¯”å¦‚Typescriptå’ŒBabelã€‚ ä¸ºäº†æé«˜è½¬è¯‘çš„æ•ˆç‡ï¼ŒCodesandboxä¼šåˆ©ç”¨Workeræ¥è¿›è¡Œå¤šè¿›ç¨‹è½¬è¯‘ï¼Œå¤šWorkerçš„è°ƒåº¦å·¥ä½œç”±<code>WorkerTranspiler</code>å®Œæˆï¼Œè¿™æ˜¯Transpilerçš„å­ç±»ï¼Œç»´æŠ¤äº†ä¸€ä¸ªWorkeræ± ã€‚Babelã€Typescriptã€Sassè¿™ç±»å¤æ‚çš„è½¬è¯‘ä»»åŠ¡éƒ½æ˜¯åŸºäºWorkerTranspilerå®ç°çš„ï¼š</p>
<center><br> <img src="/images/08/transpiler.png"><br></center>

<p><br></p>
<p>å…¶ä¸­æ¯”è¾ƒå…¸å‹çš„å®ç°æ˜¯BabelTranspiler, åœ¨Sandboxå¯åŠ¨æ—¶å°±ä¼šé¢„å…ˆforkä¸‰ä¸ªworkerï¼Œæ¥æé«˜è½¬è¯‘å¯åŠ¨çš„é€Ÿåº¦, BabelTranspilerä¼šä¼˜å…ˆä½¿ç”¨è¿™ä¸‰ä¸ªworkeræ¥åˆå§‹åŒ–Workeræ± ï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨worker-loader forkä¸‰ä¸ªloaderï¼Œç”¨äºå¤„ç†babelç¼–è¯‘</span></span><br><span class="line"><span class="keyword">import</span> BabelWorker <span class="keyword">from</span> <span class="string">'worker-loader?publicPath=/&amp;name=babel-transpiler.[hash:8].worker.js!./eval/transpilers/babel/worker/index.js'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.babelworkers = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">window</span>.babelworkers.push(<span class="keyword">new</span> BabelWorker());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<p>è¿™é‡Œé¢ä½¿ç”¨åˆ°äº†webpackçš„<a href="https://github.com/webpack-contrib/worker-loader" target="_blank" rel="noopener">worker-loader</a>, å°†æŒ‡å®šæ¨¡å—å°è£…ä¸º Worker å¯¹è±¡ã€‚è®© Worker æ›´å®¹æ˜“ä½¿ç”¨:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="keyword">import</span> Worker <span class="keyword">from</span> <span class="string">"./file.worker.js"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> worker = <span class="keyword">new</span> Worker();</span><br><span class="line"></span><br><span class="line">worker.postMessage(&#123; <span class="attr">a</span>: <span class="number">1</span> &#125;);</span><br><span class="line">worker.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line">worker.addEventListener(<span class="string">"message"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;&#125;);</span><br></pre></td></tr></table></figure>
<p><br></p>
<p>BabelTranpilerå…·ä½“çš„æµç¨‹å¦‚ä¸‹:</p>
<center><br><img src="/images/08/babel-transpiler.png"><br></center>

<p>WorkerTranspilerä¼šç»´æŠ¤<code>ç©ºé—²çš„Workeré˜Ÿåˆ—</code>å’Œä¸€ä¸ª<code>ä»»åŠ¡é˜Ÿåˆ—</code>, å®ƒçš„å·¥ä½œå°±æ˜¯é©±åŠ¨Workeræ¥æ¶ˆè´¹ä»»åŠ¡é˜Ÿåˆ—ã€‚å…·ä½“çš„è½¬è¯‘å·¥ä½œåœ¨Workerä¸­è¿›è¡Œï¼š</p>
<center><br><img src="/images/08/babel-worker.png"><br></center>

<p><br></p>
<hr>
<p><br></p>
<h3 id="evaluation"><a href="#evaluation" class="headerlink" title="Evaluation"></a>Evaluation</h3><p>è™½ç„¶ç§°ä¸ºæ‰“åŒ…å™¨(bundler), ä½†æ˜¯ CodeSandbox å¹¶ä¸ä¼šè¿›è¡Œæ‰“åŒ…ï¼Œä¹Ÿå°±æ˜¯è¯´ä»–ä¸ä¼šåƒ Webpack ä¸€æ ·ï¼Œå°†æ‰€æœ‰çš„æ¨¡å—éƒ½æ‰“åŒ…åˆå¹¶æˆ chunks æ–‡ä»¶.</p>
<p><code>Transpilation</code>ä»<code>å…¥å£æ–‡ä»¶</code>å¼€å§‹è½¬è¯‘, å†åˆ†ææ–‡ä»¶çš„æ¨¡å—å¯¼å…¥è§„åˆ™ï¼Œé€’å½’è½¬è¯‘ä¾èµ–çš„æ¨¡å—. åˆ°<code>Evaluation</code>é˜¶æ®µï¼ŒCodeSandbox å·²ç»æ„å»ºå‡ºäº†ä¸€ä¸ªå®Œæ•´çš„<strong>ä¾èµ–å›¾</strong>. ç°åœ¨è¦æŠŠåº”ç”¨è·‘èµ·æ¥äº†ğŸƒ</p>
<p><img src="/images/08/dependency-graph.png" alt></p>
<p>Evaluation çš„åŸç†ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå’Œ Transpilation ä¸€æ ·ï¼Œä¹Ÿæ˜¯ä»å…¥å£æ–‡ä»¶å¼€å§‹: <strong>ä½¿ç”¨<code>eval</code>æ‰§è¡Œå…¥å£æ–‡ä»¶ï¼Œå¦‚æœæ‰§è¡Œè¿‡ç¨‹ä¸­è°ƒç”¨äº†<code>require</code>ï¼Œåˆ™é€’å½’ eval è¢«ä¾èµ–çš„æ¨¡å—</strong>ã€‚</p>
<p>å¦‚æœä½ äº†è§£è¿‡ Node çš„æ¨¡å—å¯¼å…¥åŸç†ï¼Œä½ å¯ä»¥å¾ˆå®¹æ˜“ç†è§£è¿™ä¸ªè¿‡ç¨‹ï¼š</p>
<p><img src="/images/08/evaluation.png" alt></p>
<ul>
<li>â‘  é¦–å…ˆè¦åˆå§‹åŒ– htmlï¼Œæ‰¾åˆ°<code>index.html</code>æ–‡ä»¶ï¼Œå°† document.body.innerHTML è®¾ç½®ä¸º html æ¨¡æ¿çš„ body å†…å®¹.</li>
<li>â‘¡ æ³¨å…¥å¤–éƒ¨èµ„æºã€‚ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰ä¸€äº›å¤–éƒ¨é™æ€æ–‡ä»¶ï¼Œä¾‹å¦‚ css å’Œ jsï¼Œè¿™äº›éœ€è¦ append åˆ° head ä¸­</li>
<li>â‘¢ evaluate å…¥å£æ¨¡å—</li>
<li><p>â‘£ æ‰€æœ‰æ¨¡å—éƒ½ä¼šè¢«è½¬è¯‘æˆ CommonJS æ¨¡å—è§„èŒƒã€‚æ‰€ä»¥éœ€è¦æ¨¡æ‹Ÿè¿™ä¸ªæ¨¡å—ç¯å¢ƒã€‚å¤§æ¦‚çœ‹ä¸€ä¸‹ä»£ç :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å®ç°requireæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">require</span>(<span class="params">path: string</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ... æ‹¦æˆªä¸€äº›ç‰¹æ®Šæ¨¡å—</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// åœ¨Managerå¯¹è±¡ä¸­æŸ¥æ‰¾æ¨¡å—</span></span><br><span class="line">  <span class="keyword">const</span> requiredTranspiledModule = manager.resolveTranspiledModule(</span><br><span class="line">    path,</span><br><span class="line">    localModule.path</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ¨¡å—ç¼“å­˜, å¦‚æœå­˜åœ¨ç¼“å­˜åˆ™è¯´æ˜ä¸éœ€è¦é‡æ–°æ‰§è¡Œ</span></span><br><span class="line">  <span class="keyword">const</span> cache = requiredTranspiledModule.compilation;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> cache</span><br><span class="line">    ? cache.exports</span><br><span class="line">    : <span class="comment">// ğŸ”´é€’å½’evaluate</span></span><br><span class="line">      manager.evaluateTranspiledModule(</span><br><span class="line">        requiredTranspiledModule,</span><br><span class="line">        transpiledModule</span><br><span class="line">      );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°require.resolve</span></span><br><span class="line"><span class="built_in">require</span>.resolve = <span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">path: string</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> manager.resolveModule(path, localModule.path).path;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨¡æ‹Ÿä¸€äº›å…¨å±€å˜é‡</span></span><br><span class="line"><span class="keyword">const</span> globals = &#123;&#125;;</span><br><span class="line">globals.__dirname = pathUtils.dirname(<span class="keyword">this</span>.module.path);</span><br><span class="line">globals.__filename = <span class="keyword">this</span>.module.path;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ğŸ”´æ”¾ç½®æ‰§è¡Œç»“æœï¼Œå³CommonJSçš„moduleå¯¹è±¡</span></span><br><span class="line"><span class="keyword">this</span>.compilation = &#123;</span><br><span class="line">  id: <span class="keyword">this</span>.getId(),</span><br><span class="line">  exports: &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ğŸ”´eval</span></span><br><span class="line"><span class="keyword">const</span> exports = evaluate(</span><br><span class="line">  <span class="keyword">this</span>.source.compiledCode,</span><br><span class="line">  <span class="built_in">require</span>,</span><br><span class="line">  <span class="keyword">this</span>.compilation,</span><br><span class="line">  manager.envVariables,</span><br><span class="line">  globals</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li><p>â‘¤ ä½¿ç”¨ eval æ¥æ‰§è¡Œæ¨¡å—ã€‚åŒæ ·çœ‹çœ‹ä»£ç :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params">code, require, module, env = &#123;&#125;, globals = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> exports = <span class="built_in">module</span>.exports;</span><br><span class="line">  <span class="keyword">const</span> global = g;</span><br><span class="line">  <span class="keyword">const</span> process = buildProcess(env);</span><br><span class="line">  g.global = global;</span><br><span class="line">  <span class="keyword">const</span> allGlobals = &#123;</span><br><span class="line">    <span class="built_in">require</span>,</span><br><span class="line">    <span class="built_in">module</span>,</span><br><span class="line">    exports,</span><br><span class="line">    process,</span><br><span class="line">    setImmediate: requestFrame,</span><br><span class="line">    global,</span><br><span class="line">    ...globals</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> allGlobalKeys = <span class="built_in">Object</span>.keys(allGlobals);</span><br><span class="line">  <span class="keyword">const</span> globalsCode = allGlobalKeys.length ? allGlobalKeys.join(<span class="string">", "</span>) : <span class="string">""</span>;</span><br><span class="line">  <span class="keyword">const</span> globalsValues = allGlobalKeys.map(<span class="function"><span class="params">k</span> =&gt;</span> allGlobals[k]);</span><br><span class="line">  <span class="comment">// ğŸ”´å°†ä»£ç å°è£…åˆ°ä¸€ä¸ªå‡½æ•°ä¸‹é¢ï¼Œå…¨å±€å˜é‡ä»¥å‡½æ•°å½¢å¼ä¼ å…¥</span></span><br><span class="line">  <span class="keyword">const</span> newCode = <span class="string">`(function evaluate(`</span> + globalsCode + <span class="string">`) &#123;`</span> + code + <span class="string">`\n&#125;)`</span>;</span><br><span class="line">  (<span class="number">0</span>, <span class="built_in">eval</span>)(newCode).apply(<span class="keyword">this</span>, globalsValues);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">module</span>.exports;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>Okï¼åˆ°è¿™é‡Œ Evaluation å°±è§£é‡Šå®Œäº†ï¼Œå®é™…çš„ä»£ç æ¯”è¿™é‡Œè¦å¤æ‚å¾—å¤šï¼Œæ¯”å¦‚ HMR(hot module replacement)æ”¯æŒ, æœ‰å…´è¶£çš„è¯»è€…ï¼Œå¯ä»¥è‡ªå·±å»çœ‹ CodeSandbox çš„æºç .</p>
<p><br></p>
<hr>
<p><br></p>
<h2 id="æŠ€æœ¯åœ°å›¾"><a href="#æŠ€æœ¯åœ°å›¾" class="headerlink" title="æŠ€æœ¯åœ°å›¾"></a>æŠ€æœ¯åœ°å›¾</h2><p>ä¸€ä¸å°å¿ƒåˆå†™äº†ä¸€ç¯‡é•¿æ–‡ï¼Œè¦æŠŠè¿™ä¹ˆå¤æ‚ä»£ç è®²æ¸…æ¥šçœŸæ˜¯ä¸€ä¸ªæŒ‘æˆ˜, æˆ‘è¿˜åšçš„ä¸å¤Ÿå¥½ï¼ŒæŒ‰ç…§ä»¥å¾€çš„ç»éªŒï¼Œè¿™åˆæ˜¯ä¸€ç¯‡æ— äººé—®æ´¥çš„æ–‡ç« , åˆ«è¯´æ˜¯ä½ ä»¬, æˆ‘è‡ªå·±éƒ½ä¸æ€ä¹ˆæœ‰è€å¿ƒçœ‹è¿™ç±»æ–‡ç« , åé¢è¿˜æ˜¯å°½é‡é¿å…å§!</p>
<ul>
<li>worker-loader: å°†æŒ‡å®šæ¨¡å—å°è£…ä¸ºWorker</li>
<li>babel: JavaScriptä»£ç è½¬è¯‘ï¼Œæ”¯æŒES, Flow, Typescript</li>
<li>browserfs: åœ¨æµè§ˆå™¨ä¸­æ¨¡æ‹ŸNodeç¯å¢ƒ</li>
<li>localForage: å®¢æˆ·ç«¯å­˜å‚¨åº“ï¼Œä¼˜å…ˆä½¿ç”¨(IndexedDB or WebSQL)è¿™äº›å¼‚æ­¥å­˜å‚¨æ–¹æ¡ˆï¼Œæä¾›ç±»LocalStorageçš„æ¥å£</li>
<li>lru-cache: least-recently-usedç¼“å­˜</li>
</ul>
<h2 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h2><ul>
<li><a href="https://hackernoon.com/how-i-created-a-parallel-offline-extensible-browser-based-bundler-886db508cc31" target="_blank" rel="noopener">Creating a parallel, offline, extensible, browser based bundler for CodeSandbox</a></li>
<li><a href="https://www.youtube.com/watch?v=qURPenhndYA" target="_blank" rel="noopener">year of CodeSandbox - Ives van Hoorne aka @CompuIves at @ReactEurope 2018</a></li>
<li><a href="https://hackernoon.com/how-we-make-npm-packages-work-in-the-browser-announcing-the-new-packager-6ce16aa4cee6" target="_blank" rel="noopener">How we make npm packages work in the browser</a></li>
<li><a href="https://github.com/codesandbox/dependency-packager" target="_blank" rel="noopener">codesandbox/dependency-packager</a></li>
</ul>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Blogs</a></li>
         
          <li><a href="http://github.com/ivan-94">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#å¼•"><span class="toc-number">1.</span> <span class="toc-text">å¼•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#åŸºæœ¬ç›®å½•ç»“æ„"><span class="toc-number">2.</span> <span class="toc-text">åŸºæœ¬ç›®å½•ç»“æ„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#é¡¹ç›®æ„å»ºè¿‡ç¨‹"><span class="toc-number">3.</span> <span class="toc-text">é¡¹ç›®æ„å»ºè¿‡ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#packager"><span class="toc-number">3.1.</span> <span class="toc-text">Packager</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#webpackdllplugin"><span class="toc-number">3.1.1.</span> <span class="toc-text">WebpackDllPlugin</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#åœ¨çº¿æ‰“åŒ…æœåŠ¡"><span class="toc-number">3.1.2.</span> <span class="toc-text">åœ¨çº¿æ‰“åŒ…æœåŠ¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å›é€€æ–¹æ¡ˆ"><span class="toc-number">3.1.3.</span> <span class="toc-text">å›é€€æ–¹æ¡ˆ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#transpilation"><span class="toc-number">3.2.</span> <span class="toc-text">Transpilation</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#åŸºæœ¬å¯¹è±¡"><span class="toc-number">3.2.1.</span> <span class="toc-text">åŸºæœ¬å¯¹è±¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#manager"><span class="toc-number">3.2.2.</span> <span class="toc-text">Manager</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#transpiledmodule"><span class="toc-number">3.2.3.</span> <span class="toc-text">TranspiledModule</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#transpiler"><span class="toc-number">3.2.4.</span> <span class="toc-text">Transpiler</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#babeltranspiler"><span class="toc-number">3.2.5.</span> <span class="toc-text">BabelTranspiler</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#evaluation"><span class="toc-number">3.3.</span> <span class="toc-text">Evaluation</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æŠ€æœ¯åœ°å›¾"><span class="toc-number">4.</span> <span class="toc-text">æŠ€æœ¯åœ°å›¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ‰©å±•"><span class="toc-number">5.</span> <span class="toc-text">æ‰©å±•</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://bobi.ink/2019/06/20/codesandbox/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://bobi.ink/2019/06/20/codesandbox/&text=CodeSandbox å¦‚ä½•å·¥ä½œ? ä¸Šç¯‡"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://bobi.ink/2019/06/20/codesandbox/&title=CodeSandbox å¦‚ä½•å·¥ä½œ? ä¸Šç¯‡"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://bobi.ink/2019/06/20/codesandbox/&is_video=false&description=CodeSandbox å¦‚ä½•å·¥ä½œ? ä¸Šç¯‡"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=CodeSandbox å¦‚ä½•å·¥ä½œ? ä¸Šç¯‡&body=Check out this article: https://bobi.ink/2019/06/20/codesandbox/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://bobi.ink/2019/06/20/codesandbox/&title=CodeSandbox å¦‚ä½•å·¥ä½œ? ä¸Šç¯‡"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://bobi.ink/2019/06/20/codesandbox/&title=CodeSandbox å¦‚ä½•å·¥ä½œ? ä¸Šç¯‡"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://bobi.ink/2019/06/20/codesandbox/&title=CodeSandbox å¦‚ä½•å·¥ä½œ? ä¸Šç¯‡"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://bobi.ink/2019/06/20/codesandbox/&title=CodeSandbox å¦‚ä½•å·¥ä½œ? ä¸Šç¯‡"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://bobi.ink/2019/06/20/codesandbox/&name=CodeSandbox å¦‚ä½•å·¥ä½œ? ä¸Šç¯‡&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2023 Ivan
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Blogs</a></li>
         
          <li><a href="http://github.com/ivan-94">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/lib/meslo-LG/styles.css">
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>


    <!-- Google Analytics -->
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-44571525-2', 'auto');
        ga('send', 'pageview');
    </script>


    <!-- Disqus Comments -->
    <script type="text/javascript">
        var disqus_shortname = 'bobi-ink';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


