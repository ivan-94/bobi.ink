<!DOCTYPE html>
<html lang=zh>
<head><meta name="generator" content="Hexo 3.8.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="Electronçš„remoteæ¨¡å—æ˜¯ä¸€ä¸ªæ¯”è¾ƒç¥å¥‡çš„ä¸œè¥¿ï¼Œä¸ºæ¸²æŸ“è¿›ç¨‹å’Œä¸»è¿›ç¨‹é€šä¿¡å°è£…äº†ä¸€ç§ç®€å•æ–¹æ³•ï¼Œé€šè¿‡remoteä½ å¯ä»¥â€™ç›´æ¥â€™è·å–ä¸»è¿›ç¨‹å¯¹è±¡æˆ–è€…è°ƒç”¨ä¸»è¿›ç¨‹å‡½æ•°æˆ–å¯¹è±¡çš„æ–¹æ³•, è€Œä¸å¿…æ˜¾å¼å‘é€è¿›ç¨‹é—´æ¶ˆæ¯, ç±»ä¼¼äº Java çš„ RMI. ä¾‹å¦‚: const &amp;#123; remote &amp;#125; = require(&apos;electron&apos;)const myModal = remote.require">
<meta name="keywords" content="Blog,FrontEnd,React,Javascript,Typescript">
<meta property="og:type" content="article">
<meta property="og:title" content="æ­å¼€Electronçš„remoteæ¨¡å—çš„é¢çº±">
<meta property="og:url" content="https://bobi.ink/2019/08/04/electron-remote/index.html">
<meta property="og:site_name" content="Bobi.ink">
<meta property="og:description" content="Electronçš„remoteæ¨¡å—æ˜¯ä¸€ä¸ªæ¯”è¾ƒç¥å¥‡çš„ä¸œè¥¿ï¼Œä¸ºæ¸²æŸ“è¿›ç¨‹å’Œä¸»è¿›ç¨‹é€šä¿¡å°è£…äº†ä¸€ç§ç®€å•æ–¹æ³•ï¼Œé€šè¿‡remoteä½ å¯ä»¥â€™ç›´æ¥â€™è·å–ä¸»è¿›ç¨‹å¯¹è±¡æˆ–è€…è°ƒç”¨ä¸»è¿›ç¨‹å‡½æ•°æˆ–å¯¹è±¡çš„æ–¹æ³•, è€Œä¸å¿…æ˜¾å¼å‘é€è¿›ç¨‹é—´æ¶ˆæ¯, ç±»ä¼¼äº Java çš„ RMI. ä¾‹å¦‚: const &amp;#123; remote &amp;#125; = require(&apos;electron&apos;)const myModal = remote.require">
<meta property="og:locale" content="zh">
<meta property="og:image" content="https://bobi.ink/images/electron-remote/ipc.png">
<meta property="og:image" content="https://bobi.ink/images/electron-remote/meta-transform.png">
<meta property="og:image" content="https://bobi.ink/images/electron-remote/naruto.jpeg">
<meta property="og:image" content="https://bobi.ink/images/electron-remote/lifetime.png">
<meta property="og:image" content="https://bobi.ink/images/electron-remote/callback.png">
<meta property="og:image" content="https://bobi.ink/images/electron-remote/gzb.png">
<meta property="og:image" content="https://bobi.ink/images/electron-remote/addListener.png">
<meta property="og:image" content="https://bobi.ink/images/electron-remote/addListener2.png">
<meta property="og:updated_time" content="2023-06-01T09:55:14.328Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="æ­å¼€Electronçš„remoteæ¨¡å—çš„é¢çº±">
<meta name="twitter:description" content="Electronçš„remoteæ¨¡å—æ˜¯ä¸€ä¸ªæ¯”è¾ƒç¥å¥‡çš„ä¸œè¥¿ï¼Œä¸ºæ¸²æŸ“è¿›ç¨‹å’Œä¸»è¿›ç¨‹é€šä¿¡å°è£…äº†ä¸€ç§ç®€å•æ–¹æ³•ï¼Œé€šè¿‡remoteä½ å¯ä»¥â€™ç›´æ¥â€™è·å–ä¸»è¿›ç¨‹å¯¹è±¡æˆ–è€…è°ƒç”¨ä¸»è¿›ç¨‹å‡½æ•°æˆ–å¯¹è±¡çš„æ–¹æ³•, è€Œä¸å¿…æ˜¾å¼å‘é€è¿›ç¨‹é—´æ¶ˆæ¯, ç±»ä¼¼äº Java çš„ RMI. ä¾‹å¦‚: const &amp;#123; remote &amp;#125; = require(&apos;electron&apos;)const myModal = remote.require">
<meta name="twitter:image" content="https://bobi.ink/images/electron-remote/ipc.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>æ­å¼€Electronçš„remoteæ¨¡å—çš„é¢çº±</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Blogs</a></li>
         
          <li><a href="http://github.com/ivan-94">Projects</a></li>
        
      </ul>
    </span>
    <br>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2019/08/09/ejs/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2019/07/29/react-event/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://bobi.ink/2019/08/04/electron-remote/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://bobi.ink/2019/08/04/electron-remote/&text=æ­å¼€Electronçš„remoteæ¨¡å—çš„é¢çº±"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://bobi.ink/2019/08/04/electron-remote/&title=æ­å¼€Electronçš„remoteæ¨¡å—çš„é¢çº±"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://bobi.ink/2019/08/04/electron-remote/&is_video=false&description=æ­å¼€Electronçš„remoteæ¨¡å—çš„é¢çº±"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=æ­å¼€Electronçš„remoteæ¨¡å—çš„é¢çº±&body=Check out this article: https://bobi.ink/2019/08/04/electron-remote/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://bobi.ink/2019/08/04/electron-remote/&title=æ­å¼€Electronçš„remoteæ¨¡å—çš„é¢çº±"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://bobi.ink/2019/08/04/electron-remote/&title=æ­å¼€Electronçš„remoteæ¨¡å—çš„é¢çº±"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://bobi.ink/2019/08/04/electron-remote/&title=æ­å¼€Electronçš„remoteæ¨¡å—çš„é¢çº±"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://bobi.ink/2019/08/04/electron-remote/&title=æ­å¼€Electronçš„remoteæ¨¡å—çš„é¢çº±"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://bobi.ink/2019/08/04/electron-remote/&name=æ­å¼€Electronçš„remoteæ¨¡å—çš„é¢çº±&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#é€šä¿¡åè®®çš„å®šä¹‰"><span class="toc-number">1.</span> <span class="toc-text">é€šä¿¡åè®®çš„å®šä¹‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å¯¹è±¡çš„åºåˆ—åŒ–"><span class="toc-number">2.</span> <span class="toc-text">å¯¹è±¡çš„åºåˆ—åŒ–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å½±å­å¯¹è±¡"><span class="toc-number">3.</span> <span class="toc-text">å½±å­å¯¹è±¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ"><span class="toc-number">4.</span> <span class="toc-text">å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ¸²æŸ“è¿›ç¨‹æ€ä¹ˆç»™ä¸»è¿›ç¨‹ä¼ é€’å›è°ƒ"><span class="toc-number">5.</span> <span class="toc-text">æ¸²æŸ“è¿›ç¨‹æ€ä¹ˆç»™ä¸»è¿›ç¨‹ä¼ é€’å›è°ƒ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸€äº›ç¼ºé™·"><span class="toc-number">6.</span> <span class="toc-text">ä¸€äº›ç¼ºé™·</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#remoteæ¨¡å—å®è·µå’Œä¼˜åŒ–"><span class="toc-number">7.</span> <span class="toc-text">remoteæ¨¡å—å®è·µå’Œä¼˜åŒ–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ€»ç»“"><span class="toc-number">8.</span> <span class="toc-text">æ€»ç»“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ‰©å±•"><span class="toc-number">9.</span> <span class="toc-text">æ‰©å±•</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        æ­å¼€Electronçš„remoteæ¨¡å—çš„é¢çº±
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Bobi.ink</span>
      </span>
      
    <div class="postdate">
        <time datetime="2019-08-03T16:00:00.000Z" itemprop="datePublished">2019-08-04</time>
    </div>


      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>Electronçš„remoteæ¨¡å—æ˜¯ä¸€ä¸ªæ¯”è¾ƒç¥å¥‡çš„ä¸œè¥¿ï¼Œä¸º<code>æ¸²æŸ“è¿›ç¨‹</code>å’Œ<code>ä¸»è¿›ç¨‹</code>é€šä¿¡å°è£…äº†ä¸€ç§ç®€å•æ–¹æ³•ï¼Œé€šè¿‡remoteä½ å¯ä»¥â€™ç›´æ¥â€™è·å–ä¸»è¿›ç¨‹å¯¹è±¡æˆ–è€…è°ƒç”¨ä¸»è¿›ç¨‹å‡½æ•°æˆ–å¯¹è±¡çš„æ–¹æ³•, è€Œä¸å¿…æ˜¾å¼å‘é€è¿›ç¨‹é—´æ¶ˆæ¯, ç±»ä¼¼äº Java çš„ RMI. ä¾‹å¦‚:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; remote &#125; = <span class="built_in">require</span>(<span class="string">'electron'</span>)</span><br><span class="line"><span class="keyword">const</span> myModal = remote.require(<span class="string">'myModal'</span>) <span class="comment">// è®©ä¸»è¿›ç¨‹requireæŒ‡å®šæ¨¡å—ï¼Œå¹¶è¿”å›åˆ°æ¸²æŸ“è¿›ç¨‹</span></span><br><span class="line">myModal.dosomething()                     <span class="comment">// è°ƒç”¨æ–¹æ³•</span></span><br></pre></td></tr></table></figure>
<p><br></p>
<p><strong>æœ¬è´¨ä¸Šï¼Œremoteæ¨¡å—æ˜¯åŸºäºElectronçš„IPCæœºåˆ¶çš„ï¼Œè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡çš„æ•°æ®å¿…é¡»æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œæ¯”å¦‚JSONåºåˆ—åŒ–</strong>ã€‚æ‰€ä»¥æœ¬æ–‡çš„ç›®çš„æ˜¯ä»‹ç»Electronæ˜¯å¦‚ä½•è®¾è®¡remoteæ¨¡å—çš„ï¼Œä»¥åŠé‡Œé¢æœ‰ä»€ä¹ˆå‘ã€‚</p>
<p><br></p>
<p><img src="/images/electron-remote/ipc.png" alt></p>
<p><br></p>
<p><strong>æ–‡ç« å¤§çº²</strong></p>
<ul>
<li><a href="#%e9%80%9a%e4%bf%a1%e5%8d%8f%e8%ae%ae%e7%9a%84%e5%ae%9a%e4%b9%89">é€šä¿¡åè®®çš„å®šä¹‰</a></li>
<li><a href="#%e5%af%b9%e8%b1%a1%e7%9a%84%e5%ba%8f%e5%88%97%e5%8c%96">å¯¹è±¡çš„åºåˆ—åŒ–</a></li>
<li><a href="#%e5%bd%b1%e5%ad%90%e5%af%b9%e8%b1%a1">å½±å­å¯¹è±¡</a></li>
<li><a href="#%e5%af%b9%e8%b1%a1%e7%9a%84%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f">å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ</a></li>
<li><a href="#%e6%b8%b2%e6%9f%93%e8%bf%9b%e7%a8%8b%e6%80%8e%e4%b9%88%e7%bb%99%e4%b8%bb%e8%bf%9b%e7%a8%8b%e4%bc%a0%e9%80%92%e5%9b%9e%e8%b0%83">æ¸²æŸ“è¿›ç¨‹æ€ä¹ˆç»™ä¸»è¿›ç¨‹ä¼ é€’å›è°ƒ</a></li>
<li><a href="#%e4%b8%80%e4%ba%9b%e7%bc%ba%e9%99%b7">ä¸€äº›ç¼ºé™·</a></li>
<li><a href="#remote%e6%a8%a1%e5%9d%97%e5%ae%9e%e8%b7%b5%e5%92%8c%e4%bc%98%e5%8c%96">remoteæ¨¡å—å®è·µå’Œä¼˜åŒ–</a></li>
<li><a href="#%e6%80%bb%e7%bb%93">æ€»ç»“</a></li>
<li><a href="#%e6%89%a9%e5%b1%95">æ‰©å±•</a></li>
</ul>
<p><br></p>
<h2 id="é€šä¿¡åè®®çš„å®šä¹‰"><a href="#é€šä¿¡åè®®çš„å®šä¹‰" class="headerlink" title="é€šä¿¡åè®®çš„å®šä¹‰"></a>é€šä¿¡åè®®çš„å®šä¹‰</h2><p>ä¸Šæ–‡è¯´åˆ°ï¼Œremoteæœ¬è´¨ä¸ŠåŸºäºåºåˆ—åŒ–çš„IPCé€šä¿¡çš„ï¼Œæ‰€ä»¥é¦–å…ˆå…³é”®éœ€è¦<strong>å®šä¹‰ä¸€ä¸ªåè®®æ¥æè¿°ä¸€ä¸ªæ¨¡å—/å¯¹è±¡çš„å¤–å½¢</strong>ï¼Œå…¶ä¸­åŒ…å«ä¸‹åˆ—ç±»å‹:</p>
<ul>
<li>åŸå§‹å€¼ã€‚ä¾‹å¦‚å­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”å€¼</li>
<li>æ•°ç»„ã€‚</li>
<li>å¯¹è±¡ã€‚å¯¹è±¡å±æ€§ã€å¯¹è±¡çš„æ–¹æ³•ã€ä»¥åŠå¯¹è±¡çš„åŸå‹</li>
<li>å‡½æ•°ã€‚æ™®é€šå‡½æ•°å’Œæ„é€ æ–¹æ³•ã€å¼‚å¸¸å¤„ç†</li>
<li>ç‰¹æ®Šå¯¹è±¡ã€‚Dateã€Bufferã€Promiseã€å¼‚å¸¸å¯¹è±¡ç­‰ç­‰</li>
</ul>
<p><br></p>
<p>Electronä½¿ç”¨MetaData(å…ƒæ•°æ®)æ¥æè¿°è¿™äº›å¯¹è±¡å¤–å½¢çš„åè®®. ä¸‹é¢æ˜¯ä¸€äº›è½¬æ¢çš„ç¤ºä¾‹:</p>
<ul>
<li><p><strong>åŸºæœ¬å¯¹è±¡</strong>: åŸºæœ¬å¯¹è±¡å¾ˆå®¹æ˜“å¤„ç†ï¼Œç›´æ¥å€¼æ‹·è´ä¼ é€’å³å¯</p>
<ul>
<li><p>è¾“å…¥</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>;</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">Buffer.from(<span class="string">'hello world'</span>);</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'message'</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>è¾“å‡º</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;<span class="attr">type</span>: <span class="string">"value"</span>, <span class="attr">value</span>: <span class="number">1</span>&#125;;</span><br><span class="line">&#123;<span class="attr">type</span>: <span class="string">"date"</span>, <span class="attr">value</span>: <span class="number">1565002306662</span>&#125;;  <span class="comment">// åºåˆ—åŒ–ä¸ºæ—¶é—´æˆ³</span></span><br><span class="line">&#123;<span class="attr">type</span>:Â <span class="string">"buffer"</span>, <span class="attr">value</span>:Â &#123;<span class="attr">data</span>:Â <span class="built_in">Uint8Array</span>(<span class="number">11</span>),Â <span class="attr">length</span>:Â <span class="number">11</span>,Â <span class="attr">type</span>:Â <span class="string">"Buffer"</span>&#125;&#125;; <span class="comment">// åºåˆ—åŒ–ä¸ºæ•°ç»„</span></span><br><span class="line">&#123;</span><br><span class="line">  members: [</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">"stack"</span>,</span><br><span class="line">      value: <span class="string">"Error: message\n    at Object.&lt;anonymous&gt; (çœç•¥è°ƒç”¨æ ˆ)"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">"message"</span>, <span class="attr">value</span>: <span class="string">"message"</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">"name"</span>, <span class="attr">value</span>: <span class="string">"Error"</span> &#125;</span><br><span class="line">  ],</span><br><span class="line">  type: <span class="string">"error"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
</li>
</ul>
</li>
<li><p><strong>æ•°ç»„</strong>: æ•°ç»„ä¹Ÿæ˜¯å€¼æ‹·è´</p>
<ul>
<li><p>è¾“å…¥</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br></pre></td></tr></table></figure>
</li>
<li><p>è¾“å‡º</p>
<p>æ•°ç»„ä¼šé€’å½’å¯¹æˆå‘˜è¿›è¡Œè½¬æ¢. æ³¨æ„æ•°ç»„å’ŒåŸºæœ¬ç±»å‹æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œå®ƒä¹Ÿæ˜¯å€¼æ‹·è´ï¼Œä¹Ÿå°±æ˜¯è¯´ä¿®æ”¹æ•°ç»„ä¸ä¼šå½±å“åˆ°å¯¹ç«¯è¿›ç¨‹çš„æ•°ç»„å€¼ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"members"</span>: [</span><br><span class="line">    &#123;<span class="string">"type"</span>:<span class="string">"value"</span>,<span class="string">"value"</span>:<span class="number">1</span>&#125;,</span><br><span class="line">    &#123;<span class="string">"type"</span>:<span class="string">"value"</span>,<span class="string">"value"</span>:<span class="number">2</span>&#125;,</span><br><span class="line">    &#123;<span class="string">"type"</span>:<span class="string">"value"</span>,<span class="string">"value"</span>:<span class="number">3</span>&#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"type"</span>:<span class="string">"array"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p><br></p>
<ul>
<li><p><strong>çº¯å¯¹è±¡</strong>: </p>
<ul>
<li><p>è¾“å…¥</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.a;</span><br><span class="line">  &#125;,</span><br><span class="line">  c: &#123;</span><br><span class="line">    d: <span class="string">'d'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>è¾“å‡º</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// è¿™é‡Œæœ‰ä¸€ä¸ªidï¼Œç”¨äºæ ‡è¯†ä¸»è¿›ç¨‹çš„ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">  id: <span class="number">1</span>,</span><br><span class="line">  <span class="comment">// å¯¹è±¡æˆå‘˜</span></span><br><span class="line">  members: [</span><br><span class="line">    &#123; <span class="attr">enumerable</span>: <span class="literal">true</span>, <span class="attr">name</span>: <span class="string">"a"</span>, <span class="attr">type</span>: <span class="string">"get"</span>, <span class="attr">writable</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">enumerable</span>: <span class="literal">true</span>, <span class="attr">name</span>: <span class="string">"b"</span>, <span class="attr">type</span>: <span class="string">"method"</span>, <span class="attr">writable</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">    <span class="comment">// electronåªä¼šè½¬æ¢ä¸€å±‚ï¼Œä¸ä¼šé€’å½’è½¬æ¢å†…åµŒå¯¹è±¡</span></span><br><span class="line">    &#123; <span class="attr">enumerable</span>: <span class="literal">true</span>, <span class="attr">name</span>: <span class="string">"c"</span>, <span class="attr">type</span>: <span class="string">"get"</span>, <span class="attr">writable</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">  ],</span><br><span class="line">  name: <span class="string">"Object"</span>,</span><br><span class="line">  <span class="comment">// å¯¹è±¡çš„ä¸Šçº§åŸå‹çš„MetaData</span></span><br><span class="line">  proto: <span class="literal">null</span>,</span><br><span class="line">  type: <span class="string">"object"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
</li>
</ul>
</li>
<li><p><strong>å‡½æ•°</strong>:</p>
<ul>
<li><p>è¾“å…¥</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'hello world'</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>è¾“å‡º</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// å‡½æ•°ä¹Ÿæœ‰ä¸€ä¸ªå”¯ä¸€idæ ‡è¯†ï¼Œå› ä¸ºå®ƒä¹Ÿæ˜¯å¯¹è±¡ï¼Œä¸»è¿›ç¨‹éœ€è¦ä¿æŒè¯¥å¯¹è±¡çš„å¼•ç”¨</span></span><br><span class="line">  id: <span class="number">2</span>,</span><br><span class="line">  <span class="comment">// å‡½æ•°å±æ€§æˆå‘˜</span></span><br><span class="line">  members: [],</span><br><span class="line">  name: <span class="string">"Function"</span>,</span><br><span class="line">  type: <span class="string">"function"</span></span><br><span class="line">  <span class="comment">// Electronè§£æå¯¹è±¡çš„åŸå‹é“¾</span></span><br><span class="line">  proto: &#123;</span><br><span class="line">    members: [</span><br><span class="line">      <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">      &#123;</span><br><span class="line">        enumerable: <span class="literal">false</span>,</span><br><span class="line">        name: <span class="string">"constructor"</span>,</span><br><span class="line">        type: <span class="string">"method"</span>,</span><br><span class="line">        writable: <span class="literal">false</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123; <span class="attr">enumerable</span>: <span class="literal">false</span>, <span class="attr">name</span>: <span class="string">"apply"</span>, <span class="attr">type</span>: <span class="string">"method"</span>, <span class="attr">writable</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">enumerable</span>: <span class="literal">false</span>, <span class="attr">name</span>: <span class="string">"bind"</span>, <span class="attr">type</span>: <span class="string">"method"</span>, <span class="attr">writable</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">enumerable</span>: <span class="literal">false</span>, <span class="attr">name</span>: <span class="string">"call"</span>, <span class="attr">type</span>: <span class="string">"method"</span>, <span class="attr">writable</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">enumerable</span>: <span class="literal">false</span>, <span class="attr">name</span>: <span class="string">"toString"</span>, <span class="attr">type</span>: <span class="string">"method"</span>, <span class="attr">writable</span>: <span class="literal">false</span> &#125;</span><br><span class="line">    ],</span><br><span class="line">    proto: <span class="literal">null</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
</li>
</ul>
</li>
<li><p><strong>Promise</strong>ï¼šPromiseåªéœ€æè¿°thenå‡½æ•°</p>
<ul>
<li><p>è¾“å…¥:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.resolve();</span><br></pre></td></tr></table></figure>
</li>
<li><p>è¾“å…¥:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Promiseè¿™é‡Œå…³é”®åœ¨äºthenï¼Œè¯¦è§ä¸Šé¢çš„å‡½æ•°å…ƒæ•°æ®</span></span><br><span class="line">&#123;</span><br><span class="line">  type: <span class="string">"promise"</span></span><br><span class="line">  then: &#123;</span><br><span class="line">    id: <span class="number">2</span>,</span><br><span class="line">    members: [],</span><br><span class="line">    name: <span class="string">"Function"</span>,</span><br><span class="line">    proto: &#123;<span class="comment">/*è§ä¸Šé¢*/</span>&#125;,</span><br><span class="line">    type: <span class="string">"function"</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p><br></p>
<p>äº†è§£remoteçš„æ•°æ®ä¼ è¾“åè®®åï¼Œæœ‰ç»éªŒçš„å¼€å‘è€…åº”è¯¥å¿ƒé‡Œæœ‰åº•äº†ï¼Œå®ƒçš„åŸç†å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="/images/electron-remote/meta-transform.png" alt></p>
<p>ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ä¹‹é—´éœ€è¦å°†å¯¹è±¡åºåˆ—åŒ–æˆMetaDataæè¿°ï¼Œè½¬æ¢çš„è§„åˆ™ä¸Šé¢å·²ç»è§£é‡Šçš„æ¯”è¾ƒæ¸…æ¥šäº†ã€‚è¿™é‡Œé¢éœ€è¦ç‰¹æ®Šå¤„ç†æ˜¯å¯¹è±¡å’Œå‡½æ•°ï¼Œæ¸²æŸ“è¿›ç¨‹æ‹¿åˆ°MetaDataåéœ€è¦å°è£…æˆä¸€ä¸ªå½±å­å¯¹è±¡/å‡½æ•°ï¼Œæ¥ä¾›æ¸²æŸ“è¿›ç¨‹åº”ç”¨è°ƒç”¨ã€‚</p>
<p>å…¶ä¸­æ¯”è¾ƒå¤æ‚çš„æ˜¯å¯¹è±¡å’Œå‡½æ•°çš„å¤„ç†ï¼ŒElectronä¸ºäº†é˜²æ­¢å¯¹è±¡è¢«åƒåœ¾å›æ”¶ï¼Œéœ€è¦å°†è¿™äº›å¯¹è±¡æ”¾è¿›ä¸€ä¸ªæ³¨å†Œè¡¨ä¸­ï¼Œåœ¨è¿™ä¸ªè¡¨ä¸­æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„idæ¥æ ‡è¯†ã€‚è¿™ä¸ªidæœ‰ç‚¹ç±»ä¼¼äºâ€˜æŒ‡é’ˆâ€™ï¼Œæ¸²æŸ“è¿›ç¨‹ä¼šæ‹¿ç€è¿™ä¸ªidå‘ä¸»è¿›ç¨‹è¯·æ±‚è®¿é—®å¯¹è±¡ã€‚</p>
<p>é‚£ä»€ä¹ˆæ—¶å€™éœ€è¦é‡Šæ”¾è¿™äº›å¯¹è±¡å‘¢ï¼Ÿä¸‹æ–‡ä¼šè®²å…·ä½“çš„å®ç°ç»†èŠ‚ã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ªä¸Šå›¾æ²¡æœ‰å±•ç¤ºå‡ºæ¥çš„ç»†èŠ‚æ˜¯ï¼ŒElectronä¸ä¼šé€’å½’å»è½¬æ¢å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒåªä¼šè½¬æ¢ä¸€å±‚ã€‚è¿™æ ·å¯ä»¥å®‰å…¨åœ°å¼•ç”¨å­˜åœ¨å¾ªç¯å¼•ç”¨çš„å¯¹è±¡ã€å¦å¤–æ‰€æœ‰å±æ€§å€¼åº”è¯¥ä»è¿œç¨‹è·å–æœ€æ–°çš„å€¼ï¼Œä¸èƒ½å‡è®¾å®ƒçš„ç»“æ„ä¸å¯å˜ã€‚</p>
<p><br><br><br></p>
<h2 id="å¯¹è±¡çš„åºåˆ—åŒ–"><a href="#å¯¹è±¡çš„åºåˆ—åŒ–" class="headerlink" title="å¯¹è±¡çš„åºåˆ—åŒ–"></a>å¯¹è±¡çš„åºåˆ—åŒ–</h2><p>å…ˆæ¥çœ‹çœ‹ä¸»è¿›ç¨‹çš„å®ç°ï¼Œå®ƒçš„ä»£ç ä½äº<a href="https://github.com/electron/electron/blob/master/lib/browser/rpc-server.js" target="_blank" rel="noopener">/lib/browser/rpc-server.js</a>ï¼Œä»£ç å¾ˆå°‘è€Œä¸”å¾ˆå¥½ç†è§£ï¼Œè¯»è€…å¯ä»¥è‡ªå·±è¯»ä¸€ä¸‹ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬ä¸å…³æ³¨å¯¹è±¡åºåˆ—åŒ–çš„ç»†èŠ‚ï¼Œé‡ç‚¹å…³æ³¨å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œè°ƒç”¨çš„æµç¨‹. </p>
<p><br></p>
<p>ä»¥<code>remote.require</code>ä¸ºä¾‹, è¿™ä¸ªæ–¹æ³•ç”¨äºè®©ä¸»è¿›ç¨‹å»requireæŒ‡å®šæ¨¡å—ï¼Œç„¶åè¿”å›æ¨¡å—å†…å®¹ç»™æ¸²æŸ“è¿›ç¨‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">handleRemoteCommand(<span class="string">'ELECTRON_BROWSER_REQUIRE'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event, contextId, moduleName</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// è°ƒç”¨require</span></span><br><span class="line">  <span class="keyword">const</span> returnValue = process.mainModule.require(moduleName)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å°†returnValueåºåˆ—åŒ–ä¸ºMetaData</span></span><br><span class="line">  <span class="keyword">return</span> valueToMeta(event.sender, contextId, returnValue)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>handleRemoteCommand</code> ä½¿ç”¨<a href="https://electronjs.org/docs/api/ipc-main" target="_blank" rel="noopener">ipcMain</a>ç›‘å¬rendererå‘é€çš„è¯·æ±‚ï¼Œ<code>contextId</code>ç”¨äºæ ‡è¯†ä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ã€‚</p>
<p><br></p>
<p><code>valueToMeta</code>æ–¹æ³•å°†å€¼åºåˆ—åŒ–ä¸ºMetaData:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> valueToMeta = <span class="function"><span class="keyword">function</span> (<span class="params">sender, contextId, value, optimizeSimpleObject = false</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Determine the type of value.</span></span><br><span class="line">  <span class="keyword">const</span> meta = &#123; <span class="attr">type</span>: <span class="keyword">typeof</span> value &#125;</span><br><span class="line">  <span class="keyword">if</span> (meta.type === <span class="string">'object'</span>) &#123;</span><br><span class="line">    <span class="comment">// Recognize certain types of objects.</span></span><br><span class="line">    <span class="keyword">if</span> (value === <span class="literal">null</span>) &#123;</span><br><span class="line">      meta.type = <span class="string">'value'</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (bufferUtils.isBuffer(value)) &#123;</span><br><span class="line">      <span class="comment">// ... ğŸ”´ åŸºæœ¬ç±»å‹</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (meta.type === <span class="string">'array'</span>) &#123;</span><br><span class="line">    <span class="comment">// ğŸ”´ æ•°ç»„è½¬æ¢</span></span><br><span class="line">    meta.members = value.map(<span class="function">(<span class="params">el</span>) =&gt;</span> valueToMeta(sender, contextId, el, optimizeSimpleObject))</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (meta.type === <span class="string">'object'</span> || meta.type === <span class="string">'function'</span>) &#123;</span><br><span class="line">    meta.name = value.constructor ? value.constructor.name : <span class="string">''</span></span><br><span class="line">    <span class="comment">// ğŸ”´ å°†å¯¹è±¡ä¿å­˜åˆ°æ³¨å†Œè¡¨ä¸­ï¼Œå¹¶è¿”å›å”¯ä¸€çš„å¯¹è±¡id.</span></span><br><span class="line">    <span class="comment">// Electronä¼šå‡è®¾æ¸²æŸ“è¿›ç¨‹ä¼šä¸€ç›´å¼•ç”¨è¿™ä¸ªå¯¹è±¡, ç›´åˆ°æ¸²æŸ“è¿›ç¨‹é€€å‡º</span></span><br><span class="line">    meta.id = objectsRegistry.add(sender, contextId, value)</span><br><span class="line">    meta.members = getObjectMembers(value)</span><br><span class="line">    meta.proto = getObjectPrototype(value)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (meta.type === <span class="string">'buffer'</span>) &#123;</span><br><span class="line">    meta.value = bufferUtils.bufferToMeta(value)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (meta.type === <span class="string">'promise'</span>) &#123;</span><br><span class="line">    <span class="comment">// ğŸ”´promise</span></span><br><span class="line">    value.then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;)</span><br><span class="line">    meta.then = valueToMeta(sender, contextId, <span class="function"><span class="keyword">function</span> (<span class="params">onFulfilled, onRejected</span>) </span>&#123;</span><br><span class="line">      value.then(onFulfilled, onRejected)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (meta.type === <span class="string">'error'</span>) &#123;</span><br><span class="line">    <span class="comment">// ğŸ”´é”™è¯¯å¯¹è±¡</span></span><br><span class="line">    meta.members = plainObjectToMeta(value)</span><br><span class="line">    meta.members.push(&#123;</span><br><span class="line">      name: <span class="string">'name'</span>,</span><br><span class="line">      value: value.name</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (meta.type === <span class="string">'date'</span>) &#123;</span><br><span class="line">    <span class="comment">// ğŸ”´æ—¥æœŸ</span></span><br><span class="line">    meta.value = value.getTime()</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// å…¶ä»–</span></span><br><span class="line">    meta.type = <span class="string">'value'</span></span><br><span class="line">    meta.value = value</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> meta</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br><br><br></p>
<h2 id="å½±å­å¯¹è±¡"><a href="#å½±å­å¯¹è±¡" class="headerlink" title="å½±å­å¯¹è±¡"></a>å½±å­å¯¹è±¡</h2><p><img src="/images/electron-remote/naruto.jpeg" alt></p>
<p>æ¸²æŸ“è¿›ç¨‹ä¼šä»MetaDataä¸­ååºåˆ—åŒ–çš„å¯¹è±¡æˆ–å‡½æ•°, ä¸è¿‡è¿™åªæ˜¯ä¸€ä¸ªâ€˜å½±å­â€™ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å®ƒä»¬ç§°ä¸º<strong>å½±å­å¯¹è±¡</strong>æˆ–è€…<strong>ä»£ç†å¯¹è±¡</strong>ã€<strong>æ›¿èº«</strong>. ç±»ä¼¼äºç«å½±å¿è€…ä¸­çš„å½±åˆ†èº«ä¹‹æœ¯ï¼Œä¸»ä½“å­˜å‚¨åœ¨ä¸»è¿›ç¨‹ä¸­ï¼Œå½±å­å¯¹è±¡ä¸åŒ…å«ä»»ä½•å®ä½“æ•°æ®ï¼Œå½“è®¿é—®è¿™äº›å¯¹è±¡æˆ–è°ƒç”¨å‡½æ•°/æ–¹æ³•æ—¶ï¼Œå½±å­å¯¹è±¡ç›´æ¥è¿œç¨‹è¯·æ±‚ã€‚</p>
<blockquote>
<p>æ¸²æŸ“è¿›ç¨‹çš„ä»£ç å¯ä»¥çœ‹<a href="https://github.com/electron/electron/blob/master/lib/renderer/api/remote.js" target="_blank" rel="noopener">è¿™é‡Œ</a></p>
</blockquote>
<p>æ¥çœ‹çœ‹æ¸²æŸ“è¿›ç¨‹æ€ä¹ˆåˆ›å»ºâ€˜å½±å­å¯¹è±¡â€™:</p>
<p><strong>å‡½æ•°çš„å¤„ç†</strong>:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (meta.type === <span class="string">'function'</span>) &#123;</span><br><span class="line">  <span class="comment">// ğŸ”´åˆ›å»ºä¸€ä¸ª'å½±å­'å‡½æ•°</span></span><br><span class="line">  <span class="keyword">const</span> remoteFunction = <span class="function"><span class="keyword">function</span> (<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> command</span><br><span class="line">    <span class="comment">// é€šè¿‡new Objå½¢å¼è°ƒç”¨</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span> &amp;&amp; <span class="keyword">this</span>.constructor === remoteFunction) &#123;</span><br><span class="line">      command = <span class="string">'ELECTRON_BROWSER_CONSTRUCTOR'</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      command = <span class="string">'ELECTRON_BROWSER_FUNCTION_CALL'</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ğŸ”´åŒæ­¥IPCè¿œç¨‹</span></span><br><span class="line">    <span class="comment">// wrapArgså°†å‡½æ•°å‚æ•°åºåˆ—åŒ–ä¸ºMetaData</span></span><br><span class="line">    <span class="keyword">const</span> obj = ipcRendererInternal.sendSync(command, contextId, meta.id, wrapArgs(args))</span><br><span class="line">    <span class="comment">// ğŸ”´ååºåˆ—åŒ–è¿”å›å€¼</span></span><br><span class="line">    <span class="keyword">return</span> metaToValue(obj)</span><br><span class="line">  &#125;</span><br><span class="line">  ret = remoteFunction</span><br></pre></td></tr></table></figure>
<p><br></p>
<p><strong>å¯¹è±¡æˆå‘˜çš„å¤„ç†</strong>:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setObjectMembers</span> (<span class="params">ref, object, metaId, members</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> member <span class="keyword">of</span> members) &#123;</span><br><span class="line">    <span class="keyword">if</span> (object.hasOwnProperty(member.name)) <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> descriptor = &#123; <span class="attr">enumerable</span>: member.enumerable &#125;</span><br><span class="line">    <span class="keyword">if</span> (member.type === <span class="string">'method'</span>) &#123;</span><br><span class="line">      <span class="comment">// ğŸ”´åˆ›å»ºâ€˜å½±å­â€™æ–¹æ³•. å’Œä¸Šé¢çš„å‡½æ•°è°ƒç”¨å·®ä¸å¤š</span></span><br><span class="line">      <span class="keyword">const</span> remoteMemberFunction = <span class="function"><span class="keyword">function</span> (<span class="params">...args</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> command</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> &amp;&amp; <span class="keyword">this</span>.constructor === remoteMemberFunction) &#123;</span><br><span class="line">          command = <span class="string">'ELECTRON_BROWSER_MEMBER_CONSTRUCTOR'</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          command = <span class="string">'ELECTRON_BROWSER_MEMBER_CALL'</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> ret = ipcRendererInternal.sendSync(command, contextId, metaId, member.name, wrapArgs(args))</span><br><span class="line">        <span class="keyword">return</span> metaToValue(ret)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (member.type === <span class="string">'get'</span>) &#123;</span><br><span class="line">      <span class="comment">// ğŸ”´å±æ€§çš„è·å–</span></span><br><span class="line">      descriptor.get = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> command = <span class="string">'ELECTRON_BROWSER_MEMBER_GET'</span></span><br><span class="line">        <span class="keyword">const</span> meta = ipcRendererInternal.sendSync(command, contextId, metaId, member.name)</span><br><span class="line">        <span class="keyword">return</span> metaToValue(meta)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// ğŸ”´å±æ€§çš„è®¾ç½®</span></span><br><span class="line">      <span class="keyword">if</span> (member.writable) &#123;</span><br><span class="line">        descriptor.set = <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> args = wrapArgs([value])</span><br><span class="line">          <span class="keyword">const</span> command = <span class="string">'ELECTRON_BROWSER_MEMBER_SET'</span></span><br><span class="line">          <span class="keyword">const</span> meta = ipcRendererInternal.sendSync(command, contextId, metaId, member.name, args)</span><br><span class="line">          <span class="keyword">if</span> (meta != <span class="literal">null</span>) metaToValue(meta)</span><br><span class="line">          <span class="keyword">return</span> value</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(object, member.name, descriptor)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br><br><br></p>
<h2 id="å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ"></a>å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ</h2><p><strong>ä¸»è¿›ç¨‹çš„<code>valueToMeta</code>ä¼šå°†æ¯ä¸€ä¸ªå¯¹è±¡å’Œå‡½æ•°éƒ½æ”¾å…¥æ³¨å†Œè¡¨ä¸­ï¼ŒåŒ…æ‹¬æ¯æ¬¡å‡½æ•°è°ƒç”¨çš„è¿”å›å€¼</strong>ã€‚</p>
<p>è¿™æ˜¯å¦æ„å‘³ç€ï¼Œå¦‚æœé¢‘ç¹è°ƒç”¨å‡½æ•°ï¼Œä¼šå¯¼è‡´æ³¨å†Œè¡¨æš´æ¶¨å ç”¨å¤ªå¤šå†…å­˜å‘¢ï¼Ÿè¿™äº›å¯¹è±¡ä»€ä¹ˆæ—¶å€™é‡Šæ”¾?</p>
<p><br></p>
<p>é¦–å…ˆ<strong>å½“æ¸²æŸ“è¿›ç¨‹é”€æ¯æ—¶ï¼Œä¸»è¿›ç¨‹ä¼šé›†ä¸­é”€æ¯æ‰è¯¥è¿›ç¨‹çš„æ‰€æœ‰å¯¹è±¡å¼•ç”¨</strong>ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ¸²æŸ“è¿›ç¨‹é€€å‡ºæ—¶ä¼šé€šè¿‡è¿™ä¸ªäº‹ä»¶å‘Šè¯‰ä¸»è¿›ç¨‹ï¼Œä½†æ˜¯è¿™ä¸ªå¹¶ä¸èƒ½ä¿è¯æ”¶åˆ°</span></span><br><span class="line">handleRemoteCommand(<span class="string">'ELECTRON_BROWSER_CONTEXT_RELEASE'</span>, (event, contextId) =&gt; &#123;</span><br><span class="line">  <span class="comment">// æ¸…ç©ºå¯¹è±¡æ³¨å†Œè¡¨</span></span><br><span class="line">  objectsRegistry.clear(event.sender, contextId)</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>å› ä¸º<code>ELECTRON_BROWSER_CONTEXT_RELEASE</code>ä¸èƒ½ä¿è¯èƒ½å¤Ÿæ”¶åˆ°ï¼Œæ‰€ä»¥<code>objectsRegistry</code>è¿˜ä¼šç›‘å¬å¯¹åº”æ¸²æŸ“è¿›ç¨‹çš„é”€æ¯äº‹ä»¶:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ObjectsRegistry</span> </span>&#123;</span><br><span class="line">    registerDeleteListener (webContents, contextId) &#123;</span><br><span class="line">    <span class="comment">// contextId =&gt; $&#123;processHostId&#125;-$&#123;contextCount&#125;</span></span><br><span class="line">    <span class="keyword">const</span> processHostId = contextId.split(<span class="string">'-'</span>)[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">const</span> listener = <span class="function">(<span class="params">event, deletedProcessHostId</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (deletedProcessHostId &amp;&amp;</span><br><span class="line">          deletedProcessHostId.toString() === processHostId) &#123;</span><br><span class="line">        webContents.removeListener(<span class="string">'render-view-deleted'</span>, listener)</span><br><span class="line">        <span class="keyword">this</span>.clear(webContents, contextId)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ğŸ”´ ç›‘å¬æ¸²æŸ“è¿›ç¨‹é”€æ¯äº‹ä»¶, ç¡®ä¿ä¸‡æ— ä¸€å¤±</span></span><br><span class="line">    webContents.on(<span class="string">'render-view-deleted'</span>, listener)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<p>ç­‰<strong>åˆ°æ¸²æŸ“è¿›ç¨‹é”€æ¯å†å»é‡Šæ”¾è¿™äº›å¯¹è±¡æ˜¾ç„¶æ˜¯æ— æ³•æ¥å—çš„</strong>ï¼Œå’Œç½‘é¡µä¸ä¸€æ ·ï¼Œæ¡Œé¢ç«¯åº”ç”¨å¯èƒ½ä¼š7*24ä¸é—´æ–­è¿è¡Œï¼Œå¦‚æœè¦ç­‰åˆ°æ¸²æŸ“è¿›ç¨‹é€€å‡ºæ‰å»å›æ”¶å¯¹è±¡, æœ€ç»ˆä¼šå¯¼è‡´ç³»ç»Ÿèµ„æºè¢«æ¶ˆè€—æ®†å°½ã€‚</p>
<p>æ‰€ä»¥<strong>Electronä¼šåœ¨æ¸²æŸ“è¿›ç¨‹ä¸­ç›‘å¬å¯¹è±¡çš„åƒåœ¾å›æ”¶äº‹ä»¶ï¼Œå†é€šè¿‡IPCé€šçŸ¥ä¸»è¿›ç¨‹æ¥é€’å‡å¯¹åº”å¯¹è±¡çš„å¼•ç”¨è®¡æ•°</strong>ï¼Œ çœ‹çœ‹æ¸²æŸ“è¿›ç¨‹æ˜¯æ€ä¹ˆåšçš„ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¸²æŸ“è¿›ç¨‹ï¼Œååºåˆ—åŒ–</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">metaToValue</span> (<span class="params">meta</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// å¯¹è±¡ç±»å‹è½¬æ¢</span></span><br><span class="line">    <span class="keyword">let</span> ret</span><br><span class="line">    <span class="keyword">if</span> (remoteObjectCache.has(meta.id)) &#123;</span><br><span class="line">      <span class="comment">// ğŸ”´ å¯¹è±¡å†ä¸€æ¬¡è¢«è®¿é—®ï¼Œé€’å¢å¯¹è±¡å¼•ç”¨è®¡æ•°. </span></span><br><span class="line">      <span class="comment">// v8Utilæ˜¯electronåŸç”Ÿæ¨¡å—</span></span><br><span class="line">      v8Util.addRemoteObjectRef(contextId, meta.id)</span><br><span class="line">      <span class="keyword">return</span> remoteObjectCache.get(meta.id)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªå½±å­ç±»è¡¨ç¤ºè¿œç¨‹å‡½æ•°å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">if</span> (meta.type === <span class="string">'function'</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> remoteFunction = <span class="function"><span class="keyword">function</span> (<span class="params">...args</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">      &#125;</span><br><span class="line">      ret = remoteFunction</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      ret = &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    setObjectMembers(ret, ret, meta.id, meta.members)</span><br><span class="line">    setObjectPrototype(ret, ret, meta.id, meta.proto)</span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(ret.constructor, <span class="string">'name'</span>, &#123; <span class="attr">value</span>: meta.name &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ğŸ”´ ç›‘å¬å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œå½“å¯¹è±¡è¢«åƒåœ¾å›æ”¶æ—¶ï¼Œé€šçŸ¥åˆ°ä¸»è¿›ç¨‹</span></span><br><span class="line">    v8Util.setRemoteObjectFreer(ret, contextId, meta.id)</span><br><span class="line">    v8Util.setHiddenValue(ret, <span class="string">'atomId'</span>, meta.id)</span><br><span class="line">    <span class="comment">// ğŸ”´ æ·»åŠ å¯¹è±¡å¼•ç”¨è®¡æ•°</span></span><br><span class="line">    v8Util.addRemoteObjectRef(contextId, meta.id)</span><br><span class="line">    remoteObjectCache.set(meta.id, ret)</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<p>ç®€å•äº†è§£ä¸€ä¸‹ObjectFreerä»£ç :</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// atom/common/api/remote_object_freer.cc</span></span><br><span class="line"><span class="comment">// æ·»åŠ å¼•ç”¨è®¡æ•°</span></span><br><span class="line"><span class="keyword">void</span> RemoteObjectFreer::AddRef(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; context_id, <span class="keyword">int</span> object_id) &#123;</span><br><span class="line">  ref_mapper_[context_id][object_id]++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹è±¡é‡Šæ”¾äº‹ä»¶å¤„ç†å™¨</span></span><br><span class="line"><span class="keyword">void</span> RemoteObjectFreer::RunDestructor() &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="keyword">auto</span>* channel = <span class="string">"ELECTRON_BROWSER_DEREFERENCE"</span>;</span><br><span class="line">  base::ListValue args;</span><br><span class="line">  args.AppendString(context_id_);</span><br><span class="line">  args.AppendInteger(object_id_);</span><br><span class="line">  args.AppendInteger(ref_mapper_[context_id_][object_id_]);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ğŸ”´ æ¸…ç©ºå¼•ç”¨è¡¨</span></span><br><span class="line">  ref_mapper_[context_id_].erase(object_id_);</span><br><span class="line">  <span class="keyword">if</span> (ref_mapper_[context_id_].empty())</span><br><span class="line">    ref_mapper_.erase(context_id_);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ğŸ”´ ipcé€šçŸ¥ä¸»è¿›ç¨‹</span></span><br><span class="line">  electron_ptr-&gt;Message(<span class="literal">true</span>, channel, args.Clone());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<p>å†å›åˆ°ä¸»è¿›ç¨‹, ä¸»è¿›ç¨‹ç›‘å¬<code>ELECTRON_BROWSER_DEREFERENCE</code>äº‹ä»¶ï¼Œå¹¶é€’å‡æŒ‡å®šå¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">handleRemoteCommand(<span class="string">'ELECTRON_BROWSER_DEREFERENCE'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event, contextId, id, rendererSideRefCount</span>) </span>&#123;</span><br><span class="line">  objectsRegistry.remove(event.sender, contextId, id, rendererSideRefCount)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><br></p>
<p>å¦‚æœè¢«ä¸Šé¢çš„ä»£ç ç»•å¾—ä¼˜ç‚¹æ™•ï¼Œé‚£å°±çœ‹çœ‹ä¸‹é¢çš„æµç¨‹å›¾, æ¶ˆåŒ–æ¶ˆåŒ–ï¼š</p>
<p><img src="/images/electron-remote/lifetime.png" alt></p>
<p><br><br><br></p>
<h2 id="æ¸²æŸ“è¿›ç¨‹æ€ä¹ˆç»™ä¸»è¿›ç¨‹ä¼ é€’å›è°ƒ"><a href="#æ¸²æŸ“è¿›ç¨‹æ€ä¹ˆç»™ä¸»è¿›ç¨‹ä¼ é€’å›è°ƒ" class="headerlink" title="æ¸²æŸ“è¿›ç¨‹æ€ä¹ˆç»™ä¸»è¿›ç¨‹ä¼ é€’å›è°ƒ"></a>æ¸²æŸ“è¿›ç¨‹æ€ä¹ˆç»™ä¸»è¿›ç¨‹ä¼ é€’å›è°ƒ</h2><p>åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­ï¼Œé€šè¿‡remoteè¿˜å¯ä»¥ç»™ä¸»è¿›ç¨‹çš„å‡½æ•°ä¼ é€’å›è°ƒã€‚å…¶å®è·Ÿä¸»è¿›ç¨‹æš´éœ²å‡½æ•°/å¯¹è±¡ç»™æ¸²æŸ“è¿›ç¨‹çš„åŸç†ä¸€æ ·ï¼Œæ¸²æŸ“è¿›ç¨‹åœ¨å°†å›è°ƒä¼ é€’ç»™ä¸»è¿›ç¨‹ä¹‹å‰ä¼šæ”¾ç½®åˆ°<strong>å›è°ƒæ³¨å†Œè¡¨</strong>ä¸­ï¼Œç„¶åç»™ä¸»è¿›ç¨‹æš´éœ²ä¸€ä¸ªcallbackIDã€‚</p>
<p>æ¸²æŸ“è¿›ç¨‹ä¼šè°ƒç”¨<code>wrapArgs</code>å°†å‡½æ•°è°ƒç”¨å‚æ•°åºåˆ—åŒ–ä¸ºMetaData:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">wrapArgs</span> (<span class="params">args, visited = new Set(</span>)) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> valueToMeta = <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ğŸ”´ é˜²æ­¢å¾ªç¯å¼•ç”¨</span></span><br><span class="line">    <span class="keyword">if</span> (visited.has(value)) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        type: <span class="string">'value'</span>,</span><br><span class="line">        value: <span class="literal">null</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ... çœç•¥å…¶ä»–ç±»å‹çš„å¤„ç†ï¼Œè¿™äº›ç±»å‹åŸºæœ¬éƒ½æ˜¯å€¼æ‹·è´</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string">'function'</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        type: <span class="string">'function'</span>,</span><br><span class="line">        <span class="comment">// ğŸ”´ ç»™ä¸»è¿›ç¨‹ä¼ é€’callbackIdï¼Œå¹¶æ·»åŠ åˆ°å›è°ƒæ³¨å†Œè¡¨ä¸­</span></span><br><span class="line">        id: callbacksRegistry.add(value),</span><br><span class="line">        location: v8Util.getHiddenValue(value, <span class="string">'location'</span>),</span><br><span class="line">        length: value.length</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<p>å›åˆ°ä¸»è¿›ç¨‹ï¼Œè¿™é‡Œä¹Ÿæœ‰ä¸€ä¸ªå¯¹åº”çš„<code>unwrapArgs</code>å‡½æ•°æ¥ååºåˆ—åŒ–å‡½æ•°å‚æ•°ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> unwrapArgs = <span class="function"><span class="keyword">function</span> (<span class="params">sender, frameId, contextId, args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> metaToValue = <span class="function"><span class="keyword">function</span> (<span class="params">meta</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (meta.type) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">'value'</span>:</span><br><span class="line">        <span class="keyword">return</span> meta.value</span><br><span class="line">      <span class="comment">// ... çœç•¥</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">'function'</span>: &#123;</span><br><span class="line">        <span class="keyword">const</span> objectId = [contextId, meta.id]</span><br><span class="line">        <span class="comment">// å›è°ƒç¼“å­˜</span></span><br><span class="line">        <span class="keyword">if</span> (rendererFunctions.has(objectId)) &#123;</span><br><span class="line">          <span class="keyword">return</span> rendererFunctions.get(objectId)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ğŸ”´ å°è£…å½±å­å‡½æ•°</span></span><br><span class="line">        <span class="keyword">const</span> callIntoRenderer = <span class="function"><span class="keyword">function</span> (<span class="params">...args</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">let</span> succeed = <span class="literal">false</span></span><br><span class="line">          <span class="keyword">if</span> (!sender.isDestroyed()) &#123;</span><br><span class="line">            <span class="comment">// ğŸ”´ è°ƒç”¨æ—¶ï¼Œé€šè¿‡IPCé€šçŸ¥æ¸²æŸ“è¿›ç¨‹</span></span><br><span class="line">            <span class="comment">// å¿½ç•¥å›è°ƒè¿”å›å€¼</span></span><br><span class="line">            succeed = sender._sendToFrameInternal(frameId, <span class="string">'ELECTRON_RENDERER_CALLBACK'</span>, contextId, meta.id, valueToMeta(sender, contextId, args))</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> (!succeed) &#123;</span><br><span class="line">            <span class="comment">// æ²¡æœ‰å‘é€æˆåŠŸåˆ™è¡¨æ˜æ¸²æŸ“è¿›ç¨‹çš„å›è°ƒå¯èƒ½è¢«é‡Šæ”¾äº†ï¼Œè¾“å‡ºè­¦å‘Šä¿¡æ¯</span></span><br><span class="line">            <span class="comment">// è¿™ç§æƒ…å†µæ¯”è¾ƒå¸¸è§ï¼Œæ¯”å¦‚è¢«æ¸²æŸ“è¿›ç¨‹åˆ·æ–°äº†</span></span><br><span class="line">            removeRemoteListenersAndLogWarning(<span class="keyword">this</span>, callIntoRenderer)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        v8Util.setHiddenValue(callIntoRenderer, <span class="string">'location'</span>, meta.location)</span><br><span class="line">        <span class="built_in">Object</span>.defineProperty(callIntoRenderer, <span class="string">'length'</span>, &#123; <span class="attr">value</span>: meta.length &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ğŸ”´ ç›‘å¬å›è°ƒå‡½æ•°åƒåœ¾å›æ”¶äº‹ä»¶</span></span><br><span class="line">        v8Util.setRemoteCallbackFreer(callIntoRenderer, contextId, meta.id, sender)</span><br><span class="line">        rendererFunctions.set(objectId, callIntoRenderer)</span><br><span class="line">        <span class="keyword">return</span> callIntoRenderer</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">`Unknown type: <span class="subst">$&#123;meta.type&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> args.map(metaToValue)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¸²æŸ“è¿›ç¨‹å“åº”å°±æ¯”è¾ƒç®€å•äº†ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">handleMessage(<span class="string">'ELECTRON_RENDERER_CALLBACK'</span>, (id, args) =&gt; &#123;</span><br><span class="line">  callbacksRegistry.apply(id, metaToValue(args))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><br></p>
<p>é‚£å›è°ƒä»€ä¹ˆæ—¶å€™é‡Šæ”¾å‘¢ï¼Ÿè¿™ä¸ªç›¸æ¯”æ¸²æŸ“è¿›ç¨‹çš„å¯¹è±¡å¼•ç”¨è¦ç®€å•å¾ˆå¤šï¼Œå› ä¸ºä¸»è¿›ç¨‹åªæœ‰ä¸€ä¸ªã€‚é€šè¿‡ä¸Šé¢çš„ä»£ç å¯ä»¥çŸ¥é“, <code>setRemoteCallbackFreer</code>ä¼šç›‘å¬å½±å­å›è°ƒæ˜¯å¦è¢«åƒåœ¾å›æ”¶ï¼Œä¸€æ—¦è¢«åƒåœ¾å›æ”¶äº†åˆ™é€šçŸ¥æ¸²æŸ“è¿›ç¨‹:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ¸²æŸ“è¿›ç¨‹</span></span><br><span class="line">handleMessage(<span class="string">'ELECTRON_RENDERER_RELEASE_CALLBACK'</span>, (id) =&gt; &#123;</span><br><span class="line">  callbacksRegistry.remove(id)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><br></p>
<p>æŒ‰ç…§æƒ¯ä¾‹ï¼Œæ¥ä¸ªæµç¨‹å›¾:</p>
<p><img src="/images/electron-remote/callback.png" alt></p>
<p><br><br><br></p>
<h2 id="ä¸€äº›ç¼ºé™·"><a href="#ä¸€äº›ç¼ºé™·" class="headerlink" title="ä¸€äº›ç¼ºé™·"></a>ä¸€äº›ç¼ºé™·</h2><p>remoteæœºåˆ¶åªæ˜¯å¯¹è¿œç¨‹å¯¹è±¡çš„ä¸€ä¸ªâ€˜å½±åˆ†èº«â€™ï¼Œæ— æ³•ç™¾åˆ†ç™¾å’Œè¿œç¨‹å¯¹è±¡çš„è¡Œä¸ºä¿æŒä¸€è‡´ï¼Œä¸‹é¢æ˜¯ä¸€äº›æ¯”è¾ƒå¸¸è§çš„ç¼ºé™·:</p>
<ul>
<li>å½“æ¸²æŸ“è¿›ç¨‹è°ƒç”¨è¿œç¨‹å¯¹è±¡çš„æ–¹æ³•/å‡½æ•°æ—¶ï¼Œæ˜¯è¿›è¡ŒåŒæ­¥IPCé€šä¿¡çš„ã€‚æ¢è¨€ä¹‹ï¼ŒåŒæ­¥IPCè°ƒç”¨ä¼šé˜»å¡ç”¨æˆ·ä»£ç çš„æ‰§è¡Œï¼Œè€Œä¸”è·¨ç«¯çš„é€šä¿¡æ•ˆç‡æ— æ³•å’ŒåŸç”Ÿå‡½æ•°è°ƒç”¨ç›¸æ¯”ï¼Œæ‰€ä»¥é¢‘ç¹çš„IPCè°ƒç”¨ä¼šå½±å“ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹çš„æ€§èƒ½.</li>
<li>ä¸»è¿›ç¨‹ä¼šä¿æŒå¼•ç”¨æ¯ä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹è®¿é—®çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬å‡½æ•°çš„è¿”å›å€¼ã€‚åŒç†ï¼Œé¢‘ç¹çš„è¿œç¨‹å¯¹è±¡è¯·æ±‚ï¼Œå¯¹å†…å­˜çš„å ç”¨å’Œåƒåœ¾å›æ”¶é€ æˆä¸å°çš„å‹åŠ›</li>
<li>æ— æ³•å®Œå…¨æ¨¡æ‹ŸJavaScriptå¯¹è±¡çš„è¡Œä¸ºã€‚æ¯”å¦‚åœ¨remoteæ¨¡å—ä¸­å­˜åœ¨è¿™äº›é—®é¢˜:<ul>
<li>æ•°ç»„å±äºâ€™åŸºæœ¬å¯¹è±¡â€™ï¼Œå®ƒæ˜¯é€šè¿‡å€¼æ‹·è´ä¼ é€’ç»™å¯¹ç«¯çš„ã€‚ä¹Ÿå°±æ˜¯è¯´å®ƒä¸æ˜¯ä¸€ä¸ªâ€˜å¼•ç”¨å¯¹è±¡â€™ï¼Œåœ¨å¯¹ç«¯ä¿®æ”¹å®ƒä»¬æ—¶ï¼Œæ— æ³•ååº”åˆ°åŸå§‹çš„æ•°ç»„.</li>
<li>å¯¹è±¡åœ¨ç¬¬ä¸€æ¬¡å¼•ç”¨æ—¶ï¼Œåªæœ‰å¯æšä¸¾çš„å±æ€§å¯ä»¥è¿œç¨‹è®¿é—®ã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼Œä¸€å¼€å§‹å¯¹è±¡çš„å¤–å½¢å°±ç¡®å®šä¸‹æ¥äº†ï¼Œå¦‚æœè¿œç¨‹å¯¹è±¡åŠ¨æ€æ‰©å±•äº†å±æ€§ï¼Œæ˜¯æ— æ³•è¢«è¿œç¨‹è®¿é—®åˆ°çš„</li>
<li>æ¸²æŸ“è¿›ç¨‹ä¼ é€’çš„å›è°ƒä¼šè¢«å¼‚æ­¥è°ƒç”¨ï¼Œè€Œä¸”ä¸»è¿›ç¨‹ä¼šå¿½ç•¥å®ƒçš„è¿”å›å€¼ã€‚å¼‚æ­¥è°ƒç”¨æ˜¯ä¸ºäº†é¿å…äº§ç”Ÿæ­»é”</li>
</ul>
</li>
<li>å¯¹è±¡æ³„éœ²ã€‚<ul>
<li>å¦‚æœè¿œç¨‹å¯¹è±¡åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­æ³„éœ²ï¼ˆä¾‹å¦‚å­˜å‚¨åœ¨æ˜ å°„ä¸­ï¼Œä½†ä»æœªé‡Šæ”¾ï¼‰ï¼Œåˆ™ä¸»è¿›ç¨‹ä¸­çš„ç›¸åº”å¯¹è±¡ä¹Ÿå°†è¢«æ³„æ¼ï¼Œæ‰€ä»¥æ‚¨åº”è¯¥éå¸¸å°å¿ƒï¼Œä¸è¦æ³„æ¼è¿œç¨‹å¯¹è±¡ã€‚</li>
<li>åœ¨ç»™ä¸»è¿›ç¨‹ä¼ é€’å›è°ƒæ—¶ä¹Ÿè¦ç‰¹åˆ«å°å¿ƒï¼Œä¸»è¿›ç¨‹ä¼šä¿æŒå›è°ƒçš„å¼•ç”¨ï¼Œç›´åˆ°å®ƒè¢«é‡Šæ”¾ã€‚æ‰€ä»¥åœ¨ä½¿ç”¨remoteæ¨¡å—è¿›è¡Œä¸€äº›â€˜äº‹ä»¶è®¢é˜…â€™æ—¶ï¼Œåˆ‡è®°è¦è§£é™¤äº‹ä»¶è®¢é˜….</li>
<li>è¿˜æœ‰ä¸€ç§åœºæ™¯ï¼Œä¸‹æ–‡ä¼šæåˆ°</li>
</ul>
</li>
</ul>
<p><br><br><br></p>
<h2 id="remoteæ¨¡å—å®è·µå’Œä¼˜åŒ–"><a href="#remoteæ¨¡å—å®è·µå’Œä¼˜åŒ–" class="headerlink" title="remoteæ¨¡å—å®è·µå’Œä¼˜åŒ–"></a>remoteæ¨¡å—å®è·µå’Œä¼˜åŒ–</h2><p><img src="/images/electron-remote/gzb.png" alt></p>
<p>ä¸Šé¢æ˜¯æˆ‘å‚ä¸è¿‡çš„æŸä¸ªé¡¹ç›®çš„è½¯ä»¶æ¶æ„å›¾ï¼Œ<code>Hybrid</code>å±‚ä½¿ç”¨C/C++ç¼–å†™ï¼Œå°è£…äº†è·¨å¹³å°çš„æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œåœ¨æ­¤ä¹‹ä¸Šæ¥æ„å»ºå„ä¸ªå¹³å°çš„è§†å›¾ã€‚å…¶ä¸­æ¡Œé¢ç«¯æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ElectronæŠ€æœ¯ã€‚</p>
<p>å¦‚ä¸Šå›¾ï¼ŒBridgeè¿›æ˜¯å¯¹Hybridçš„ä¸€å±‚Nodeæ¡¥æ¥å°è£…ã€‚ä¸€ä¸ªåº”ç”¨ä¸­åªèƒ½æœ‰ä¸€ä¸ªBridgeå®ä¾‹ï¼Œå› æ­¤æˆ‘ä»¬çš„åšæ³•æ˜¯ä½¿ç”¨Electronçš„remoteæ¨¡å—ï¼Œè®©æ¸²æŸ“è¿›ç¨‹é€šè¿‡ä¸»è¿›ç¨‹é—´æ¥åœ°è®¿é—®Bridge.</p>
<p><br></p>
<p>é¡µé¢éœ€è¦ç›‘å¬Bridgeçš„ä¸€äº›äº‹ä»¶ï¼Œæœ€åˆæˆ‘ä»¬çš„ä»£ç æ˜¯è¿™æ ·çš„:</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// bridge.ts</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨remoteçš„ä¸€ä¸ªå¥½å¤„æ—¶ï¼Œå¯ä»¥é…åˆTypescriptå®ç°è¾ƒå¥½çš„ç±»å‹æ£€æŸ¥</span></span><br><span class="line"><span class="keyword">const</span> bridge = electron.remote.require(<span class="string">'bridge'</span>) <span class="keyword">as</span> <span class="keyword">typeof</span> <span class="keyword">import</span>(<span class="string">'bridge'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> bridge</span><br></pre></td></tr></table></figure>
<p>ç›‘å¬Bridgeäº‹ä»¶:</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> bridge <span class="keyword">from</span> <span class="string">'~/bridge'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Store <span class="keyword">extends</span> MobxStore &#123;</span><br><span class="line">  <span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line">  pageReady() &#123;</span><br><span class="line">    <span class="keyword">this</span>.someEventDispose = bridge.addListener(<span class="string">'someEvent'</span>, <span class="keyword">this</span>.handleSomeEvent)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é¡µé¢å…³é—­</span></span><br><span class="line">  pageWillClose() &#123;</span><br><span class="line">    <span class="keyword">this</span>.someEventDispose()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµç¨‹å›¾å¦‚ä¸‹:</p>
<p><img src="/images/electron-remote/addListener.png" alt></p>
<p>è¿™ç§æ–¹å¼å­˜åœ¨å¾ˆå¤šé—®é¢˜:</p>
<ul>
<li><p>ä¸»è¿›ç¨‹éœ€è¦ä¸ºæ¯ä¸€ä¸ªaddListenerå›è°ƒéƒ½ç»´æŒä¸€ä¸ªå¼•ç”¨ã€‚ä¸Šé¢çš„ä»£ç ä¼šåœ¨é¡µé¢å…³é—­æ—¶é‡Šæ”¾è®¢é˜…ï¼Œä½†æ˜¯å®ƒæ²¡æœ‰è€ƒè™‘ç”¨æˆ·åˆ·æ–°é¡µé¢æˆ–è€…é¡µé¢å´©æºƒçš„åœºæ™¯ã€‚è¿™ä¼šå¯¼è‡´å›è°ƒåœ¨ä¸»è¿›ç¨‹æ³„éœ²ã€‚</p>
<p>ç„¶è€Œå°±ç®—Electronå¯ä»¥åœ¨è°ƒç”¨å›è°ƒæ—¶å‘ç°å›è°ƒåœ¨æ¸²æŸ“è¿›ç¨‹å·²ç»è¢«é‡Šæ”¾æ‰äº†ï¼Œä½†æ˜¯å¼€å‘è€…å´è·å–ä¸åˆ°è¿™äº›ä¿¡æ¯ï¼Œ Bridgeä¼šå§‹ç»ˆä¿æŒå¯¹å½±å­å›è°ƒçš„å¼•ç”¨.</p>
</li>
<li><p>å¦å¤–ä¸€ä¸ªæ¯”è¾ƒæ˜æ˜¾çš„æ˜¯è°ƒç”¨æ•ˆç‡çš„é—®é¢˜ã€‚å‡è®¾é¡µé¢ç›‘å¬äº†Næ¬¡Aäº‹ä»¶ï¼Œå½“Aäº‹ä»¶è§¦å‘æ—¶ï¼Œä¸»è¿›ç¨‹éœ€è¦ç»™è¿™ä¸ªé¡µé¢å‘é€Nä¸ªé€šçŸ¥ã€‚</p>
</li>
</ul>
<p><br></p>
<p>åæ¥æˆ‘ä»¬æŠ›å¼ƒäº†ä½¿ç”¨remoteè¿›è¡Œäº‹ä»¶è®¢é˜…è¿™ç§æ–¹å¼ï¼Œè®©ä¸»è¿›ç¨‹æ¥ç»´æŠ¤è¿™ç§è®¢é˜…å…³ç³», å¦‚ä¸‹å›¾:</p>
<p><img src="/images/electron-remote/addListener2.png" alt></p>
<p>æˆ‘ä»¬æ”¹è¿›äº†å¾ˆå¤šä¸œè¥¿ï¼š</p>
<p><strong>ä¸»è¿›ç¨‹ç°åœ¨åªç»´æŠ¤â€˜å“ªä¸ªé¡µé¢â€™è®¢é˜…äº†å“ªä¸ªäº‹ä»¶ï¼Œä»â€˜ç»‘å®šå›è°ƒâ€™è¿›åŒ–æˆä¸ºâ€˜ç»‘å®šé¡µé¢â€™</strong>ã€‚è¿™æ ·å¯ä»¥è§£å†³ä¸Šé¢è°ƒç”¨æ•ˆç‡å’Œå›è°ƒæ³„éœ²é—®é¢˜ã€æ¯”å¦‚ä¸ä¼šå› ä¸ºé¡µé¢åˆ·æ–°å¯¼è‡´å›è°ƒæ³„éœ², å¹¶ä¸”å½“äº‹ä»¶è§¦å‘æ—¶åªä¼šé€šçŸ¥ä¸€æ¬¡é¡µé¢ã€‚</p>
<p>å¦å¤–è¿™é‡Œå‚è€ƒäº†remoteæœ¬èº«çš„å®ç°ï¼Œåœ¨é¡µé¢é”€æ¯æ—¶ç§»é™¤è¯¥é¡µé¢çš„æ‰€æœ‰è®¢é˜…ã€‚ç›¸æ¯”æ¯”remoteé»‘ç›’ï¼Œæˆ‘ä»¬è‡ªå·±æ¥å®ç°è¿™ç§äº‹ä»¶è®¢é˜…å…³ç³»æ¯”ä¹‹å‰è¦æ›´å¥½è°ƒè¯•ã€‚</p>
<p><br><br><br></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>remoteæ¨¡å—å¯¹äºElectronå¼€å‘æœ‰å¾ˆé‡è¦çš„æ„ä¹‰ï¼Œæ¯•ç«Ÿå¾ˆå¤šæ¨¡å—åªæœ‰åœ¨ä¸»è¿›ç¨‹æ‰èƒ½è®¿é—®ï¼Œæ¯”å¦‚BrowserWindowã€dialog. </p>
<p>ç›¸æ¯”ipcé€šä¿¡ï¼Œremoteå®åœ¨æ–¹é¢å¾ˆå¤šã€‚é€šè¿‡ä¸Šæ–‡æˆ‘ä»¬ä¹Ÿäº†è§£äº†å®ƒçš„åŸºæœ¬åŸç†å’Œç¼ºé™·ï¼Œæ‰€ä»¥remoteè™½å¥½ï¼Œåˆ‡å¿Œä¸è¦æ»¥ç”¨ã€‚</p>
<p>remoteçš„æºç ä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼Œå€¼å¾—å­¦ä¹ . æ¯•ç«Ÿå‰ç«¯ç›®å‰è·¨ç«¯é€šä¿¡éå¸¸å¸¸è§ï¼Œä¾‹å¦‚WebViewBridgeã€Worker. </p>
<p>remoteå¯ä»¥ç»™ä½ ä¸€äº›çµæ„Ÿï¼Œä½†æ˜¯è¦å®Œå…¨ç…§æ¬å®ƒæ˜¯ä¸å¯è¡Œçš„ï¼Œå› ä¸ºæ¯”å¦‚å®ƒä¾èµ–ä¸€äº›v8 â€˜Hackâ€™æ¥ç›‘å¬å¯¹è±¡çš„åƒåœ¾å›æ”¶ï¼Œæ™®é€šå¼€å‘åœºæ™¯æ˜¯åšä¸åˆ°çš„ã€‚</p>
<p>æœ¬æ–‡å®Œ.</p>
<p><br><br><br></p>
<h2 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h2><ul>
<li><a href="https://electronjs.org/docs/api/remote" target="_blank" rel="noopener">Electron remote æ–‡æ¡£</a></li>
</ul>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Blogs</a></li>
         
          <li><a href="http://github.com/ivan-94">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#é€šä¿¡åè®®çš„å®šä¹‰"><span class="toc-number">1.</span> <span class="toc-text">é€šä¿¡åè®®çš„å®šä¹‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å¯¹è±¡çš„åºåˆ—åŒ–"><span class="toc-number">2.</span> <span class="toc-text">å¯¹è±¡çš„åºåˆ—åŒ–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å½±å­å¯¹è±¡"><span class="toc-number">3.</span> <span class="toc-text">å½±å­å¯¹è±¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ"><span class="toc-number">4.</span> <span class="toc-text">å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ¸²æŸ“è¿›ç¨‹æ€ä¹ˆç»™ä¸»è¿›ç¨‹ä¼ é€’å›è°ƒ"><span class="toc-number">5.</span> <span class="toc-text">æ¸²æŸ“è¿›ç¨‹æ€ä¹ˆç»™ä¸»è¿›ç¨‹ä¼ é€’å›è°ƒ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸€äº›ç¼ºé™·"><span class="toc-number">6.</span> <span class="toc-text">ä¸€äº›ç¼ºé™·</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#remoteæ¨¡å—å®è·µå’Œä¼˜åŒ–"><span class="toc-number">7.</span> <span class="toc-text">remoteæ¨¡å—å®è·µå’Œä¼˜åŒ–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ€»ç»“"><span class="toc-number">8.</span> <span class="toc-text">æ€»ç»“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ‰©å±•"><span class="toc-number">9.</span> <span class="toc-text">æ‰©å±•</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://bobi.ink/2019/08/04/electron-remote/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://bobi.ink/2019/08/04/electron-remote/&text=æ­å¼€Electronçš„remoteæ¨¡å—çš„é¢çº±"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://bobi.ink/2019/08/04/electron-remote/&title=æ­å¼€Electronçš„remoteæ¨¡å—çš„é¢çº±"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://bobi.ink/2019/08/04/electron-remote/&is_video=false&description=æ­å¼€Electronçš„remoteæ¨¡å—çš„é¢çº±"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=æ­å¼€Electronçš„remoteæ¨¡å—çš„é¢çº±&body=Check out this article: https://bobi.ink/2019/08/04/electron-remote/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://bobi.ink/2019/08/04/electron-remote/&title=æ­å¼€Electronçš„remoteæ¨¡å—çš„é¢çº±"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://bobi.ink/2019/08/04/electron-remote/&title=æ­å¼€Electronçš„remoteæ¨¡å—çš„é¢çº±"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://bobi.ink/2019/08/04/electron-remote/&title=æ­å¼€Electronçš„remoteæ¨¡å—çš„é¢çº±"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://bobi.ink/2019/08/04/electron-remote/&title=æ­å¼€Electronçš„remoteæ¨¡å—çš„é¢çº±"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://bobi.ink/2019/08/04/electron-remote/&name=æ­å¼€Electronçš„remoteæ¨¡å—çš„é¢çº±&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2023 Ivan
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Blogs</a></li>
         
          <li><a href="http://github.com/ivan-94">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/lib/meslo-LG/styles.css">
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>


    <!-- Google Analytics -->
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-44571525-2', 'auto');
        ga('send', 'pageview');
    </script>


    <!-- Disqus Comments -->
    <script type="text/javascript">
        var disqus_shortname = 'bobi-ink';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


