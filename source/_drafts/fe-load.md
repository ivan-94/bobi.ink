---
title: "if 我是前端Leader，小微团队前端应该走向何处?"
date: 2019/11/17
categories: 前端
---

这个星期一直忙于救火，周末还赶去参加了[Tweb Conf](TODO:)，所以没有什么干货输出。但是这个星期的紧张、忙碌以及焦虑，让我想明白了一些事情，这篇文章没什么干货，就是一些唠叨。

转折、LV5、哗众取宠，掘金打开频率，沉下心来，

<br>

## 小微/外包企业前端的困境

![](/images/fe-load/audi.jpg)
<br>

相信待在大厂的头部程序员只是少数，大部分前端还是蜗居在小微企业或者外包公司，望着大厂的围墙。想象他们光鲜亮丽、充满激情样子。同样是拧螺丝，同样实践着前端工程化、同样用着Vue、React 全家桶，别人是搞的是航母上的铆钉，你拧的是奥迪双钻的螺丝。

大企业高大上技术、架构，场景， 小微企业前端都或多或少面临这些困境:

**边缘化**

在这类公司，前端扮演的角色很卑微，他们只是一个页面实现者，简称切图仔。这一般是公司的业务类型决定的，这种环境下，前端不会关心太多业务，当然容易被边缘化，扮演一个捧哏的角色。我们的工作很被动，受人摆布。

在这类公司，业务决定了前端的工作不会占用太大比重，自然也不会受到太多重视可取代性也很高。这类公司往往是传统行业，例如硬件、电力。相反依赖于端行业，如电商、社交，前端的地位会高很多。

话语权

<br>

**协助混乱**

小微企业，因为整体水平不高，协作通常也比较混乱、不规范。这里指的是一个项目的整体研发协作。对于前端来说，我们的上游可能是后端，后端的代码质量和规范性对前端影响也会特别大。

例如接口混乱、文档不规范、未考虑应用场景、接口不测试等等... 这种工作环境下，效率会非常低，前端开发会非常痛苦

<br>

**忙碌**

感觉每天都很忙碌，却像什么事情都没有做。每天的工作重复一次又一次，原地踏步。

<br>

**孤岛**

这种工作环境其实像一个孤岛，消息是封闭的，个人能力和技术很难有大的突破。公司的格局决定个人的格局。

<br>

**人员变动**

吸引不了优秀的人才，而且优秀人才也留不住，整体水平较低，很难有技术沉淀和开拓。
 
<br>

**理想/企业文化的认同感**

我们只是为了赚钱，别跟我谈什么理想。我们感觉自己在被压榨，是机器，这样的工作自然不会有什么幸福感。

<br>

等等等...

## 中台的概念

今年中台的概念的很火，我没怎么去关注它，因为我认为它跟我们前端的距离还是比较远，大厂才能搞得起来。直到昨天在[TWeb Conf]() 上 张云龙 讲了 [《Headless CMS——小微项目的业务中台解决方案》](TODO:) 让我对‘中台’提起了兴趣。

> 这里有一篇文章[《漫画：什么是中台？》](https://juejin.im/post/5d995f82f265da5ba308389d#comment) 通俗讲解了中台的概念。

不是大厂才能实践中台，我发现我们的应用也存在很多重复的业务，每新建一个应用，都要重复去拷贝和实现这些业务。对于后端来说，资源非常浪费，对于前端来说也是一个灾难。因为我们发现，尽管后端的业务本质上是重复的，但是他们每一次拷贝暴露出来的接口和流程或多或少和其他应用不一致，每次我们都需要重新适配。

![配图](/images/fe-load/strapi.png)

张云龙介绍了一个小微项目的业务中台解决方案，它举的例子是[Strapi](): 这是一个`Headless CMS`, 无头内容管理系统，和传统 CMS 的最大区别是 Headless，即它只暴露接口，没有固定的界面。

通过它你可以实现：

- 可视化的业务模型创建。类似创建数据库模型（数据系统无关），可以灵活地配置各种字段类型(除了原始类型、还支持邮箱、文件上传)以及模型关系。
- 暴露规范的接口。支持Restful和GraphQL。内置支持排序、分页、过滤、自动生成文档
- 健全的权限控制系统。角色、JWT 鉴权
- 内部系统集成。可以灵活地和自己的内部系统对接
- 扩展性。插件系统

Headless CMS 是一种设用于小微企业的业务'中台'解决方案。通过Strapi 我们可以快速搭建简单的外围业务模型, 复用通用的服务和插件。

你也可以认为这是一种分层的架构，隔离了核心业务和外围业务。外层相比内层更加多变和冗杂，Strapi 中台层隔离了 UI 和 核心服务，它让核心服务可以下沉，专注于实现更加通用的服务；通过Strapi 可以快速搭建非核心的外围衍生业务模式，以及标准化的接口范式，一方面可以及时响应前端多变的需求，另一方面提供标准化、一致化的接口范式，也可以降低沟通成本、提高开发效率。基于此，前端也可以沉淀自己的可复用的业务组件。

当然，正如张云龙所说的，Strapi 相比大厂中台，就是个玩具。对于小微企业，迅速开发原型响应市场、提高研发效率，却是一剂良药。

<br>

## 前/后端分离再分离

你会发现前端开发的体系化、正规化，其实伴随着前后端分离再分离:

**盘古开天**：没有前后端之分

**模板时代**: 按照MVC架构，后端负责MC, 实现业务，给前端提供数据。前端负责 V, 即写模板。前端后在项目结构上并没有分离，但是职责开始了分化。

**接口时代**：后端提供HTTP接口，前端负责请求接口和实现页面渲染。CSR(客户端渲染)技术开始爆发，Backbone，Angular，React... 前端在项目结构上已经从后端脱离。开发效率进一步提高。接口就是一个约定，按照约定先行的原则，前后端可以实现并行开发。但是这个阶段后端接口实现还是要关心页面的呈现，提要提供能够满足UI渲染的接口。

**BFF时代**：BFF 即 Backends for Frontend。伴随着阵痛，前后端进一步分离。主要有两个原因：终端多样性，桌面端、iOS、Android、前端、小程序... 不同的客户端对接口有不同的需求、而且这些需求是多变的。另外后端业务也向微服务演化, 于是后端的接口会趋向原子化、功能更加单一、更加通用。 这对于前端开发来说也是比较痛苦的，实现一个页面需要调用很多接口、随之页面性能也会降低。那就多加一层，这一层就是BFF，它让客户端开发者根据的自己需求来粘合后端的通用服务。这会后端再也不用关心UI了，GraphQL、NodeJS 是这个时代的明星。

**Serverless时代**：BFF推行需要良好的基础设施和研发流程支持，架构难度也比较高，因此通常只有大厂搞得起来。Serverless 借助云平台, 降低了对基础设施的依赖，以及开发和维护的难度。 所以基于 Serverless 的 BFF 门槛更低。Serverless 对前端开发的意义不止于此，例如Serverless For SSR，强烈推荐 [Serverless 掀起新的前端技术变革](https://zhuanlan.zhihu.com/p/65914436)

<br>

后端不想关心UI呈现所需要的数据，只想关注于业务的实现。前端也想摆脱后端的下游依赖，既然大家都觉得不合适，分开是最好的。

回到开头那句话，前端开发的体系化、正规化伴随着前/后端的分离再分离，反之，因为前/后端分离的深化，前端开发得以正规化、体系化。上一节张云龙介绍的‘中台‘的概念，在某种意义上，也是一种前后端分离的深化。

因此，如果你的团队感受到了阵痛，其实也正好说明公司正在成长，如无意外，我们踏上前人走过的路，和后端进一步撕裂。

<br>

## 极简的技术栈

Keep it Stupid, Keep it Simple. 最近对这个原则体会颇深。小微团队不应该随大流、追随最新最热的技术，而是应该符合自己的团队水平和业务情况选择极简的技术栈。这四个原则非常重要：

- 简单
- 自动化
- 清晰健全的文档
- 约束

举几个例子:

‘简单’主要是为了减低学习的门槛、降低心智的负担：

- 接口协议: JSONRPC > Restful
- 构建工具: Parcel > Webpack, 除此之外还有Vue-cli, create-react-app
- 框架：Vue > React。Vue 入门和写法会‘相对’简单，React 太灵活、社区百花齐放、尽管我很爱它，但是它没办法阻止别人干蠢事。
- 状态管理: Mobx > Redux > Rxjs。

‘自动化’，能够自动化解决的事情，就不要靠文档规范、靠口头沟通:

- ESlint 代码规范检查。推荐设计常用的规范，例如 [JavaScript Standard Style](https://standardjs.com/)
- Prettier 代码格式化。只有一种代码样式，别BB

'文档'，重要性不言而喻。有事先看文档

'约束'，在事情失去控制时，我能体会到那种绝望。这时候你会想要更多的约束，尽量让代码保持在可控范围之内。例如Typescript，各种 *Lint。如果没有约束机制，规范永远只是规范。

<br>

## 避免'单点故障'

小微前端团队，人员非常有限，往往每个人负责不同的项目，这就可能出现‘单点故障’。这时候项目的负责人请假或者离职，就会让人措手不及。一方面项目交接过程会拉长，另一方面其他成员上下文切换的成本也很高。尤其接手的项目是一个烂摊子时。

解决单点故障的唯一办法是让更多的成员交叉参与不同的项目。另外可以配合代码 Review，多种途径让团队成员可以熟悉项目的代码。

代码规范以及共享代码在这里也可以起到很大的作用。如果知识可以在多个项目中复用和共享，那么项目上下文切换的成本就会非常低。

<br>

## 集体利益大于个人利益

不管是大公司还是小公司，集体的利益永远是大于个人利益的。

本周作了两个错误的决策，一个批了一个紧急项目负责人请假，二是项目未完整测试上线就带队去参加Tweb Conf。这两个决策导致很大的风险，也挨上级领导批评了，还好最后都搞定了。反省以下几点欠缺：

- 集体利益大于个人利益。这是我们从小被灌输的思想，在一个集体中，你的行为和决策是需要对集体负责的。
- 对项目缺乏整体的把控，没有充分的风险评估。尽管前端只是一个完整项目的一环，作为前端团队Leader, 还是需要从整体上了解项目的进度。你要知道项目的开始时间、截止时间、提测时间、开发/测试进度、当前资源情况等。通过这些信息来进行制定资源的分配计划和风险预估。
- 推动协作效率的改进。作为团队 Leader，就不能只单纯关注技术和代码。我们需要去关注团队之间的协作通道，提高团队层面的协作效率，为团队成员扫除沟通方面的障碍。

就像我经常跟我们的团队成员说：问题不可怕，可怕的是不知道问题在哪里，你要进步、就要多反思、多问为什么...

<br>

## 谈谈个人的发展: 跳槽与跳槽路上

跳槽与准备跳槽的路上

大公司有什么
小公司有什么, 什么都没有，有空间

对于个人

确定自己的方向, 深入挖掘
跳出自己的舒适区
勇气
社区
个人品牌
好奇心
基础
拓展
眼界

FEX

## 扩展

- [Serverless For Frontend 前世今生](https://zhuanlan.zhihu.com/p/77095720)
- [Serverless 掀起新的前端技术变革](https://zhuanlan.zhihu.com/p/65914436)
